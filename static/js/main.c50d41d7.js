/*! For license information please see main.c50d41d7.js.LICENSE.txt */
!function(){var e={892:function(e){e.exports=function(){"use strict";var e=1e3,t=6e4,n=36e5,r="millisecond",i="second",a="minute",o="hour",u="day",s="week",c="month",l="quarter",h="year",f="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},m=function(e,t,n){var r=String(e);return!r||r.length>=t?e:""+Array(t+1-r.length).join(n)+e},g={s:m,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),r=Math.floor(n/60),i=n%60;return(t<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var r=12*(n.year()-t.year())+(n.month()-t.month()),i=t.clone().add(r,c),a=n-i<0,o=t.clone().add(r+(a?-1:1),c);return+(-(r+(n-i)/(a?i-o:o-i))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:h,w:s,d:u,D:f,h:o,m:a,s:i,ms:r,Q:l}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},k="en",w={};w[k]=y;var _=function(e){return e instanceof T},b=function e(t,n,r){var i;if(!t)return k;if("string"==typeof t){var a=t.toLowerCase();w[a]&&(i=a),n&&(w[a]=n,i=a);var o=t.split("-");if(!i&&o.length>1)return e(o[0])}else{var u=t.name;w[u]=t,i=u}return!r&&i&&(k=i),i||!r&&k},x=function(e,t){if(_(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new T(n)},I=g;I.l=b,I.i=_,I.w=function(e,t){return x(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function y(e){this.$L=b(e.locale,null,!0),this.parse(e)}var m=y.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(I.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var r=t.match(p);if(r){var i=r[2]-1||0,a=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,a)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return I},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var n=x(e);return this.startOf(t)<=n&&n<=this.endOf(t)},m.isAfter=function(e,t){return x(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<x(e)},m.$g=function(e,t,n){return I.u(e)?this[t]:this.set(n,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var n=this,r=!!I.u(t)||t,l=I.p(e),d=function(e,t){var i=I.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return r?i:i.endOf(u)},p=function(e,t){return I.w(n.toDate()[e].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},v=this.$W,y=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(l){case h:return r?d(1,0):d(31,11);case c:return r?d(1,y):d(0,y+1);case s:var k=this.$locale().weekStart||0,w=(v<k?v+7:v)-k;return d(r?m-w:m+(6-w),y);case u:case f:return p(g+"Hours",0);case o:return p(g+"Minutes",1);case a:return p(g+"Seconds",2);case i:return p(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var n,s=I.p(e),l="set"+(this.$u?"UTC":""),d=(n={},n[u]=l+"Date",n[f]=l+"Date",n[c]=l+"Month",n[h]=l+"FullYear",n[o]=l+"Hours",n[a]=l+"Minutes",n[i]=l+"Seconds",n[r]=l+"Milliseconds",n)[s],p=s===u?this.$D+(t-this.$W):t;if(s===c||s===h){var v=this.clone().set(f,1);v.$d[d](p),v.init(),this.$d=v.set(f,Math.min(this.$D,v.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[I.p(e)]()},m.add=function(r,l){var f,d=this;r=Number(r);var p=I.p(l),v=function(e){var t=x(d);return I.w(t.date(t.date()+Math.round(e*r)),d)};if(p===c)return this.set(c,this.$M+r);if(p===h)return this.set(h,this.$y+r);if(p===u)return v(1);if(p===s)return v(7);var y=(f={},f[a]=t,f[o]=n,f[i]=e,f)[p]||1,m=this.$d.getTime()+r*y;return I.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=e||"YYYY-MM-DDTHH:mm:ssZ",i=I.z(this),a=this.$H,o=this.$m,u=this.$M,s=n.weekdays,c=n.months,l=function(e,n,i,a){return e&&(e[n]||e(t,r))||i[n].slice(0,a)},h=function(e){return I.s(a%12||12,e,"0")},f=n.meridiem||function(e,t,n){var r=e<12?"AM":"PM";return n?r.toLowerCase():r},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:u+1,MM:I.s(u+1,2,"0"),MMM:l(n.monthsShort,u,c,3),MMMM:l(c,u),D:this.$D,DD:I.s(this.$D,2,"0"),d:String(this.$W),dd:l(n.weekdaysMin,this.$W,s,2),ddd:l(n.weekdaysShort,this.$W,s,3),dddd:s[this.$W],H:String(a),HH:I.s(a,2,"0"),h:h(1),hh:h(2),a:f(a,o,!0),A:f(a,o,!1),m:String(o),mm:I.s(o,2,"0"),s:String(this.$s),ss:I.s(this.$s,2,"0"),SSS:I.s(this.$ms,3,"0"),Z:i};return r.replace(v,(function(e,t){return t||p[e]||i.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,f,d){var p,v=I.p(f),y=x(r),m=(y.utcOffset()-this.utcOffset())*t,g=this-y,k=I.m(this,y);return k=(p={},p[h]=k/12,p[c]=k,p[l]=k/3,p[s]=(g-m)/6048e5,p[u]=(g-m)/864e5,p[o]=g/n,p[a]=g/t,p[i]=g/e,p)[v]||g,d?k:I.a(k)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return w[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),r=b(e,t,!0);return r&&(n.$L=r),n},m.clone=function(){return I.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},y}(),S=T.prototype;return x.prototype=S,[["$ms",r],["$s",i],["$m",a],["$H",o],["$W",u],["$M",c],["$y",h],["$D",f]].forEach((function(e){S[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),x.extend=function(e,t){return e.$i||(e(t,T,x),e.$i=!0),x},x.locale=b,x.isDayjs=_,x.unix=function(e){return x(1e3*e)},x.en=w[k],x.Ls=w,x.p={},x}()},463:function(e,t,n){"use strict";var r=n(791),i=n(296),a={usingClientEntryPoint:!1,Events:null,Dispatcher:{current:null}};function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)u.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function y(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(p,e)&&(d.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,k);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),x=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),C=Symbol.for("react.context"),N=Symbol.for("react.server_context"),R=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),L=Symbol.for("react.scope");Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen"),F=Symbol.for("react.legacy_hidden"),U=Symbol.for("react.cache");Symbol.for("react.tracing_marker");var V=Symbol.for("react.default_value"),q=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=q&&e[q]||e["@@iterator"])?e:null}var z,B=Object.assign;function W(e){if(void 0===z)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z=t&&t[1]||""}return"\n"+z+e}var H=!1;function K(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?W(e):""}function G(e){switch(e.tag){case 26:case 27:case 5:return W(e.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return e=K(e.type,!1);case 11:return e=K(e.type.render,!1);case 1:return e=K(e.type,!0);default:return""}}function Q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case x:return"Portal";case S:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList";case U:return"Cache"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case R:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:Q(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return Q(e(t))}catch(n){break}case N:return(e.displayName||e._globalName)+".Provider"}return null}function Y(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 26:case 27:case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Q(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function $(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Z(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ee(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function te(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ne(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function re(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function ie(e,t){re(e,t);var n=$(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?oe(e,t.type,n):t.hasOwnProperty("defaultValue")&&oe(e,t.type,$(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ae(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function oe(e,t,n){"number"===t&&ee(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ue=Array.isArray;function se(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ce(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(ue(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$(n)}}function he(e,t){var n=$(t.value),r=$(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function fe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function de(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?de(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,ye,me=(ye=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ye(e,t)}))}:ye);function ge(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var ke={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},we=["Webkit","ms","Moz","O"];function _e(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||ke.hasOwnProperty(e)&&ke[e]?(""+t).trim():t+"px"}function be(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=_e(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(ke).forEach((function(e){we.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ke[t]=ke[e]}))}));var xe=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ie(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ne=null,Re=null;function Ae(e){if(e=da(e)){if("function"!==typeof Ce)throw Error(o(280));var t=e.stateNode;t&&(t=va(t),Ce(e.stateNode,e.type,t))}}function Pe(e){Ne?Re?Re.push(e):Re=[e]:Ne=e}function De(){if(Ne){var e=Ne,t=Re;if(Re=Ne=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Oe(e,t){return e(t)}function Le(){}var Me=!1;function Fe(e,t,n){if(Me)return e(t,n);Me=!0;try{return Oe(e,t,n)}finally{Me=!1,(null!==Ne||null!==Re)&&(Le(),De())}}function Ue(e,t){var n=e.stateNode;if(null===n)return null;var r=va(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ve=!1;if(h)try{var qe={};Object.defineProperty(qe,"passive",{get:function(){Ve=!0}}),window.addEventListener("test",qe,qe),window.removeEventListener("test",qe,qe)}catch(ye){Ve=!1}function je(e,t,n){var r=Array.prototype.slice.call(arguments,3);try{t.apply(n,r)}catch(i){this.onError(i)}}var ze=!1,Be=null,We=!1,He=null,Ke={onError:function(e){ze=!0,Be=e}};function Ge(e,t,n,r,i,a,o,u,s){ze=!1,Be=null,je.apply(Ke,arguments)}function Qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(2050&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ye(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Qe(e)!==e)throw Error(o(188))}function Xe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Qe(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $e(i),e;if(a===r)return $e(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=a;break}if(s===r){u=!0,r=i,n=a;break}s=s.sibling}if(!u){for(s=a.child;s;){if(s===n){u=!0,n=a,r=i;break}if(s===r){u=!0,r=a,n=i;break}s=s.sibling}if(!u)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Je(e):null}function Je(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=Je(e)))return t;e=e.sibling}return null}var Ze=i.unstable_scheduleCallback,et=i.unstable_cancelCallback,tt=i.unstable_shouldYield,nt=i.unstable_requestPaint,rt=i.unstable_now,it=i.unstable_getCurrentPriorityLevel,at=i.unstable_ImmediatePriority,ot=i.unstable_UserBlockingPriority,ut=i.unstable_NormalPriority,st=i.unstable_LowPriority,ct=i.unstable_IdlePriority,lt=null,ht=null;var ft=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(dt(e)/pt|0)|0},dt=Math.log,pt=Math.LN2;var vt=64,yt=4194304;function mt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=mt(u):0!==(a&=o)&&(r=mt(a))}else 0!==(o=n&~i)?r=mt(o):0!==a&&(r=mt(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ft(t)),r|=e[n],t&=~i;return r}function kt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function wt(e,t){return e.errorRecoveryDisabledLanes&t?0:0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function _t(){var e=vt;return 0===(4194240&(vt<<=1))&&(vt=64),e}function bt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ft(t)]=n}function It(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ft(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Tt=0;function St(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,Ct,Nt,Rt,At,Pt=!1,Dt=[],Ot=null,Lt=null,Mt=null,Ft=new Map,Ut=new Map,Vt=[],qt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Ot=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Mt=null;break;case"pointerover":case"pointerout":Ft.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ut.delete(t.pointerId)}}function zt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=da(t))&&Ct(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=fa(e.target);if(null!==t){var n=Qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ye(n)))return e.blockedOn=t,void At(e.priority,(function(){Nt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Wt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=tn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=da(n))&&Ct(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Se=r,n.target.dispatchEvent(r),Se=null,t.shift()}return!0}function Ht(e,t,n){Wt(e)&&n.delete(t)}function Kt(){Pt=!1,null!==Ot&&Wt(Ot)&&(Ot=null),null!==Lt&&Wt(Lt)&&(Lt=null),null!==Mt&&Wt(Mt)&&(Mt=null),Ft.forEach(Ht),Ut.forEach(Ht)}function Gt(e,t){e.blockedOn===t&&(e.blockedOn=null,Pt||(Pt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Kt)))}function Qt(e){function t(t){return Gt(t,e)}if(0<Dt.length){Gt(Dt[0],e);for(var n=1;n<Dt.length;n++){var r=Dt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ot&&Gt(Ot,e),null!==Lt&&Gt(Lt,e),null!==Mt&&Gt(Mt,e),Ft.forEach(t),Ut.forEach(t),n=0;n<Vt.length;n++)(r=Vt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Vt.length&&null===(n=Vt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Vt.shift()}var Yt=_.ReactCurrentBatchConfig,$t=!0;function Xt(e,t,n,r){var i=Tt,a=Yt.transition;Yt.transition=null;try{Tt=1,Zt(e,t,n,r)}finally{Tt=i,Yt.transition=a}}function Jt(e,t,n,r){var i=Tt,a=Yt.transition;Yt.transition=null;try{Tt=4,Zt(e,t,n,r)}finally{Tt=i,Yt.transition=a}}function Zt(e,t,n,r){if($t){var i=tn(e,t,n,r);if(null===i)$r(e,t,r,en,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ot=zt(Ot,e,t,n,r,i),!0;case"dragenter":return Lt=zt(Lt,e,t,n,r,i),!0;case"mouseover":return Mt=zt(Mt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Ft.set(a,zt(Ft.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ut.set(a,zt(Ut.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<qt.indexOf(e)){for(;null!==i;){var a=da(i);if(null!==a&&Et(a),null===(a=tn(e,t,n,r))&&$r(e,t,r,en,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else $r(e,t,r,null,n)}}var en=null;function tn(e,t,n,r){if(en=null,null!==(e=fa(e=Ee(r))))if(null===(t=Qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ye(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return en=e,null}function nn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(it()){case at:return 1;case ot:return 4;case ut:case st:return 16;case ct:return 536870912;default:return 16}default:return 16}}var rn=null,an=null,on=null;function un(){if(on)return on;var e,t,n=an,r=n.length,i="value"in rn?rn.value:rn.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return on=i.slice(e,1<t?1-t:void 0)}function sn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function cn(){return!0}function ln(){return!1}function hn(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?cn:ln,this.isPropagationStopped=ln,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=cn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=cn)},persist:function(){},isPersistent:cn}),t}var fn,dn,pn,vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yn=hn(vn),mn=B({},vn,{view:0,detail:0}),gn=hn(mn),kn=B({},mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==pn&&(pn&&"mousemove"===e.type?(fn=e.screenX-pn.screenX,dn=e.screenY-pn.screenY):dn=fn=0,pn=e),fn)},movementY:function(e){return"movementY"in e?e.movementY:dn}}),wn=hn(kn),_n=hn(B({},kn,{dataTransfer:0})),bn=hn(B({},mn,{relatedTarget:0})),xn=hn(B({},vn,{animationName:0,elapsedTime:0,pseudoElement:0})),In=B({},vn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Tn=hn(In),Sn=hn(B({},vn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function An(){return Rn}var Pn=B({},mn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=sn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Cn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?sn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?sn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Dn=hn(Pn),On=hn(B({},kn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ln=hn(B({},mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Mn=hn(B({},vn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Fn=B({},kn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Un=hn(Fn),Vn=[9,13,27,32],qn=h&&"CompositionEvent"in window,jn=null;h&&"documentMode"in document&&(jn=document.documentMode);var zn=h&&"TextEvent"in window&&!jn,Bn=h&&(!qn||jn&&8<jn&&11>=jn),Wn=String.fromCharCode(32),Hn=!1;function Kn(e,t){switch(e){case"keyup":return-1!==Vn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Qn=!1;var Yn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $n(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Yn[e.type]:"textarea"===t}function Xn(e,t,n,r){Pe(r),0<(t=Jr(t,"onChange")).length&&(n=new yn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Jn=null,Zn=null;function er(e){Wr(e,0)}function tr(e){if(Z(pa(e)))return e}function nr(e,t){if("change"===e)return t}var rr=!1;if(h){var ir;if(h){var ar="oninput"in document;if(!ar){var or=document.createElement("div");or.setAttribute("oninput","return;"),ar="function"===typeof or.oninput}ir=ar}else ir=!1;rr=ir&&(!document.documentMode||9<document.documentMode)}function ur(){Jn&&(Jn.detachEvent("onpropertychange",sr),Zn=Jn=null)}function sr(e){if("value"===e.propertyName&&tr(Zn)){var t=[];Xn(t,Zn,e,Ee(e)),Fe(er,t)}}function cr(e,t,n){"focusin"===e?(ur(),Zn=n,(Jn=t).attachEvent("onpropertychange",sr)):"focusout"===e&&ur()}function lr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return tr(Zn)}function hr(e,t){if("click"===e)return tr(t)}function fr(e,t){if("input"===e||"change"===e)return tr(t)}var dr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function pr(e,t){if(dr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!dr(e[i],t[i]))return!1}return!0}function vr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yr(e,t){var n,r=vr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vr(r)}}function mr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?mr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function gr(){for(var e=window,t=ee();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ee((e=t.contentWindow).document)}return t}function kr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function wr(e){var t=gr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&mr(n.ownerDocument.documentElement,n)){if(null!==r&&kr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=yr(n,a);var o=yr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _r=h&&"documentMode"in document&&11>=document.documentMode,br=null,xr=null,Ir=null,Tr=!1;function Sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Tr||null==br||br!==ee(r)||("selectionStart"in(r=br)&&kr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Ir&&pr(Ir,r)||(Ir=r,0<(r=Jr(xr,"onSelect")).length&&(t=new yn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=br)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Cr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Nr={},Rr={};function Ar(e){if(Nr[e])return Nr[e];if(!Cr[e])return e;var t,n=Cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Rr)return Nr[e]=n[t];return e}h&&(Rr=document.createElement("div").style,"AnimationEvent"in window||(delete Cr.animationend.animation,delete Cr.animationiteration.animation,delete Cr.animationstart.animation),"TransitionEvent"in window||delete Cr.transitionend.transition);var Pr=Ar("animationend"),Dr=Ar("animationiteration"),Or=Ar("animationstart"),Lr=Ar("transitionend"),Mr=new Map,Fr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ur(e,t){Mr.set(e,t),c(t,[e])}for(var Vr=0;Vr<Fr.length;Vr++){var qr=Fr[Vr];Ur(qr.toLowerCase(),"on"+(qr[0].toUpperCase()+qr.slice(1)))}Ur(Pr,"onAnimationEnd"),Ur(Dr,"onAnimationIteration"),Ur(Or,"onAnimationStart"),Ur("dblclick","onDoubleClick"),Ur("focusin","onFocus"),Ur("focusout","onBlur"),Ur(Lr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zr=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,u,s,c){if(Ge.apply(this,arguments),ze){if(!ze)throw Error(o(198));var l=Be;ze=!1,Be=null,We||(We=!0,He=l)}}(r,t,void 0,e),e.currentTarget=null}function Wr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Br(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Br(i,u,c),a=s}}}if(We)throw e=He,We=!1,He=null,e}function Hr(e,t){var n=t[oa];void 0===n&&(n=t[oa]=new Set);var r=e+"__bubble";n.has(r)||(Yr(t,e,2,!1),n.add(r))}function Kr(e,t,n){var r=0;t&&(r|=4),Yr(n,e,r,t)}var Gr="_reactListening"+Math.random().toString(36).slice(2);function Qr(e){if(!e[Gr]){e[Gr]=!0,u.forEach((function(t){"selectionchange"!==t&&(zr.has(t)||Kr(t,!1,e),Kr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Gr]||(t[Gr]=!0,Kr("selectionchange",!1,t))}}function Yr(e,t,n,r){switch(nn(t)){case 1:var i=Xt;break;case 4:i=Jt;break;default:i=Zt}n=i.bind(null,t,n,e),i=void 0,!Ve||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function $r(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=fa(u)))return;if(5===(s=o.tag)||6===s||26===s||27===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Fe((function(){var r=a,i=Ee(n),o=[];e:{var u=Mr.get(e);if(void 0!==u){var s=yn,c=e;switch(e){case"keypress":if(0===sn(n))break e;case"keydown":case"keyup":s=Dn;break;case"focusin":c="focus",s=bn;break;case"focusout":c="blur",s=bn;break;case"beforeblur":case"afterblur":s=bn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=wn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=_n;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Ln;break;case Pr:case Dr:case Or:s=xn;break;case Lr:s=Mn;break;case"scroll":s=gn;break;case"wheel":s=Un;break;case"copy":case"cut":case"paste":s=Tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=On}var l=0!==(4&t),h=!l&&"scroll"===e,f=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=p;if(d=v.stateNode,5!==(v=v.tag)&&26!==v&&27!==v||null===d||null===f||null!=(v=Ue(p,f))&&l.push(Xr(p,v,d)),h)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===Se||!(c=n.relatedTarget||n.fromElement)||!fa(c)&&!c[aa])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?fa(c):null)&&(h=Qe(c),l=c.tag,c!==h||5!==l&&27!==l&&6!==l)&&(c=null)):(s=null,c=r),s!==c)){if(l=wn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=On,v="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==s?u:pa(s),d=null==c?u:pa(c),(u=new l(v,p+"leave",s,n,i)).target=h,u.relatedTarget=d,v=null,fa(i)===r&&((l=new l(f,p+"enter",c,n,i)).target=d,l.relatedTarget=h,v=l),h=v,s&&c)e:{for(f=c,p=0,d=l=s;d;d=Zr(d))p++;for(d=0,v=f;v;v=Zr(v))d++;for(;0<p-d;)l=Zr(l),p--;for(;0<d-p;)f=Zr(f),d--;for(;p--;){if(l===f||null!==f&&l===f.alternate)break e;l=Zr(l),f=Zr(f)}l=null}else l=null;null!==s&&ei(o,u,s,l,!1),null!==c&&null!==h&&ei(o,h,c,l,!0)}if("select"===(s=(u=r?pa(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=nr;else if($n(u))if(rr)y=fr;else{y=lr;var m=cr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=hr);switch(y&&(y=y(e,r))?Xn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&oe(u,"number",u.value)),m=r?pa(r):window,e){case"focusin":($n(m)||"true"===m.contentEditable)&&(br=m,xr=r,Ir=null);break;case"focusout":Ir=xr=br=null;break;case"mousedown":Tr=!0;break;case"contextmenu":case"mouseup":case"dragend":Tr=!1,Sr(o,n,i);break;case"selectionchange":if(_r)break;case"keydown":case"keyup":Sr(o,n,i)}var g;if(qn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Qn?Kn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Bn&&"ko"!==n.locale&&(Qn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Qn&&(g=un()):(an="value"in(rn=i)?rn.value:rn.textContent,Qn=!0)),0<(m=Jr(r,k)).length&&(k=new Sn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=Gn(n))&&(k.data=g))),(g=zn?function(e,t){switch(e){case"compositionend":return Gn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Wn);case"textInput":return(e=t.data)===Wn&&Hn?null:e;default:return null}}(e,n):function(e,t){if(Qn)return"compositionend"===e||!qn&&Kn(e,t)?(e=un(),on=an=rn=null,Qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Jr(r,"onBeforeInput")).length&&(i=new Sn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Wr(o,t)}))}function Xr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Jr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5!==(i=i.tag)&&26!==i&&27!==i||null===a||(null!=(i=Ue(e,n))&&r.unshift(Xr(e,i,a)),null!=(i=Ue(e,t))&&r.push(Xr(e,i,a))),e=e.return}return r}function Zr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ei(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(u=u.tag,null!==s&&s===r)break;5!==u&&26!==u&&27!==u||null===c||(s=c,i?null!=(c=Ue(n,a))&&o.unshift(Xr(n,c,s)):i||null!=(c=Ue(n,a))&&o.push(Xr(n,c,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var ti=/\r\n?/g,ni=/\u0000|\uFFFD/g;function ri(e){return("string"===typeof e?e:""+e).replace(ti,"\n").replace(ni,"")}function ii(e,t,n){if(t=ri(t),ri(e)!==t&&n)throw Error(o(425))}function ai(){}function oi(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===r&&(r=de(e)),"http://www.w3.org/1999/xhtml"===r?"script"===e?((t=n.createElement("div")).innerHTML="<script><\/script>",r=t.removeChild(t.firstChild)):"string"===typeof t.is?r=n.createElement(e,{is:t.is}):(r=n.createElement(e),"select"===e&&(e=r,t.multiple?e.multiple=!0:t.size&&(e.size=t.size))):r=n.createElementNS(r,e),r}function ui(e,t,n){var r=Te(t,n);switch(t){case"dialog":Hr("cancel",e),Hr("close",e);var i=n;break;case"iframe":case"object":case"embed":Hr("load",e),i=n;break;case"video":case"audio":for(i=0;i<jr.length;i++)Hr(jr[i],e);i=n;break;case"source":Hr("error",e),i=n;break;case"img":case"image":case"link":Hr("error",e),Hr("load",e),i=n;break;case"details":Hr("toggle",e),i=n;break;case"input":ne(e,n),i=te(e,n),Hr("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=B({},n,{value:void 0}),Hr("invalid",e);break;case"textarea":le(e,n),i=ce(e,n),Hr("invalid",e)}Ie(t,i);var a,o=i;for(a in o)if(o.hasOwnProperty(a)){var u=o[a];"style"===a?be(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&me(e,u):"children"===a?"string"===typeof u?"body"===t||"textarea"===t&&""===u||ge(e,u):"number"===typeof u&&"body"!==t&&ge(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Hr("scroll",e):null!=u&&w(e,a,u,r))}switch(t){case"input":J(e),ae(e,n,!1);break;case"textarea":J(e),fe(e);break;case"option":null!=n.value&&e.setAttribute("value",""+$(n.value));break;case"select":e.multiple=!!n.multiple,null!=(t=n.value)?se(e,!!n.multiple,t,!1):null!=n.defaultValue&&se(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ai)}}var si=[],ci=-1;function li(e){return{current:e}}function hi(e){0>ci||(e.current=si[ci],si[ci]=null,ci--)}function fi(e,t){ci++,si[ci]=e.current,e.current=t}var di=li(null),pi=li(null),vi=li(null);function yi(e,t){switch(fi(vi,t),fi(pi,e),fi(di,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}hi(di),fi(di,t)}function mi(){hi(di),hi(pi),hi(vi)}function gi(e){var t=di.current,n=pe(t,e.type);t!==n&&(fi(pi,e),fi(di,n))}function ki(e){pi.current===e&&(hi(di),hi(pi))}var wi=a.Dispatcher,_i=null,bi=null,xi={preload:function(e,t){var n=Ci();if("string"===typeof e&&e&&"object"===typeof t&&null!==t&&n){var r=t.as;Ii.get(e)||Li(n,e,{href:e,rel:"preload",as:r,crossOrigin:"font"===r?"":t.crossOrigin,integrity:t.integrity})}},preinit:function(e,t){if("string"===typeof e&&e&&"object"===typeof t&&null!==t){var n=Ti(),r=t.as;if(n)switch(r){case"style":r=ya(n).styles;var i=t.precedence||"default",a=r.get(e);a||(a=Di(r,n,e,i,{rel:"stylesheet",href:e,"data-precedence":i,crossOrigin:t.crossOrigin})),Ri(a);break;case"script":r=ya(n).scripts,(i=r.get(e))||(i=Oi(r,n,e,{src:e,async:!0,crossOrigin:t.crossOrigin,integrity:t.integrity})),Ri(i)}else(n=Ci())&&(Ii.get(e)||Li(n,e,{href:e,rel:"preload",as:r,crossOrigin:"font"===r?"":t.crossOrigin,integrity:t.integrity}))}}},Ii=new Map;function Ti(){var e=vi.current;return e?e.getRootNode():null}function Si(e){e.instance=void 0}function Ei(e){(e=ya(e=e.getRootNode())).scripts.forEach(Si),e.head.forEach(Si)}function Ci(){var e=Ti();if(e)return e.ownerDocument||e;try{return _i||window.document}catch(t){return null}}function Ni(e){return e.ownerDocument||e}function Ri(e){switch(e.type){case"base":case"title":case"link":case"meta":e:{e.count++;var t=e.instance;if(!t){var n=e.props,r=e.root,i=e.type;switch(i){case"title":var a=r.querySelectorAll("title");for(t=0;t<a.length;t++)if(a[t].textContent===n.children){(t=e.instance=a[t])[la]=!0,e=t;break e}qi(r,t=e.instance=Pi(i,n,r),(e=a[0])&&"http://www.w3.org/2000/svg"!==e.namespaceURI?e:null);break;case"meta":a=null;var u=e.matcher;t=e.property;var s=e.parentResource;if(s&&"string"===typeof t){if(u=s.instance)for(u=a=u.nextSibling;s=u;)if(u=s.nextSibling,"META"===s.nodeName){var c=s.getAttribute("property");if("string"===typeof c){if(c===t&&s.getAttribute("content")===n.content){e.instance=s,s[la]=!0,e=s;break e}if(t.startsWith(c+":"))break}}}else if(t=r.querySelector(u)){e.instance=t,t[la]=!0;break}qi(r,t=e.instance=Pi(i,n,r),a);break;case"link":if(a='link[rel="'+(a=zi(n.rel))+'"][href="'+(t=zi(n.href))+'"]',"string"===typeof n.sizes&&(a+='[sizes="'+(t=zi(n.sizes))+'"]'),"string"===typeof n.media&&(a+='[media="'+(t=zi(n.media))+'"]'),a=r.querySelector(a)){(t=e.instance=a)[la]=!0;break}qi(r,t=e.instance=Pi(i,n,r),null);break;case"base":(a=r.querySelector(e.matcher))?(t=e.instance=a)[la]=!0:qi(r,t=e.instance=Pi(i,n,r),r.querySelector("base"));break;default:throw Error(o(457,i))}}e=t}return e;case"style":if(!(r=e.instance))if(n=e.root,i=e.precedence,r=zi(e.props.href),a=n.querySelector('link[rel="stylesheet"][data-precedence][href="'+r+'"]'))if((r=e.instance=a)[la]=!0,e.preloaded=!0,n=a._p)switch(n.s){case"l":e.loaded=!0,e.error=!1;break;case"e":e.error=!0;break;default:Mi(a,e)}else e.loaded=!0;else{for(Mi(r=e.instance=Pi("link",e.props,Ni(n)),e),a=r,s=u=(t=n.querySelectorAll('link[rel="stylesheet"][data-precedence]')).length?t[t.length-1]:null,c=0;c<t.length;c++){var l=t[c];if(l.dataset.precedence===i)s=l;else if(s!==u)break}if(s)s.parentNode.insertBefore(a,s.nextSibling);else{if(!(n=9===n.nodeType?n.head:n))throw Error(o(447));n.insertBefore(a,n.firstChild)}}return e.count++,r;case"script":return(n=e.instance)||(r=e.root,n=zi(e.props.src),(n=r.querySelector('script[async][src="'+n+'"]'))?(n=e.instance=n)[la]=!0:(n=e.instance=Pi("script",e.props,Ni(r)),qi(Ni(r),n,null))),n;case"preload":return e.instance;default:throw Error(o(443,e.type))}}function Ai(e){switch(e.type){case"link":case"title":case"meta":if(0===--e.count){var t=e.instance,n=t.parentNode;n&&n.removeChild(t),e.instance=null}break;case"style":e.count--}}function Pi(e,t,n){return ui(n=oi(e,t,n,"http://www.w3.org/1999/xhtml"),e,t),n[la]=!0,n}function Di(e,t,n,r,i){var a=zi(n);if(a=t.querySelector('link[rel="stylesheet"][href="'+a+'"]'),t={type:"style",count:0,href:n,precedence:r,props:i,hint:null,preloaded:!1,loaded:!1,error:!1,root:t,instance:null},e.set(n,t),a)if(e=a._p)switch(e.s){case"l":t.loaded=!0;break;case"e":t.error=!0;break;default:Mi(a,t)}else t.loaded=!0;else(n=Ii.get(n))&&(t.hint=n,e=t.props,n=n.props,null==e.crossOrigin&&(e.crossOrigin=n.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=n.referrerPolicy),null==e.title&&(e.title=n.title));return t}function Oi(e,t,n,r){var i=zi(n);return i=t.querySelector('script[async][src="'+i+'"]'),t={type:"script",src:n,props:r,root:t,instance:i||null},e.set(n,t),i?i[la]=!0:(e=Ii.get(n))&&(e=e.props,null==r.crossOrigin&&(r.crossOrigin=e.crossOrigin),null==r.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),null==r.integrity&&(r.referrerPolicy=e.integrity)),t}function Li(e,t,n){var r=zi(t);return(r=e.querySelector('link[rel="preload"][href="'+r+'"]'))?r[la]=!0:qi(e,r=Pi("link",n,e),null),{type:"preload",href:t,ownerDocument:e,props:n,instance:r}}function Mi(e,t){var n={};n.load=Ui.bind(null,e,t,n,Fi),n.error=Vi.bind(null,e,t,n,Fi),e.addEventListener("load",n.load,Fi),e.addEventListener("error",n.error,Fi)}var Fi={passive:!0};function Ui(e,t,n,r){for(var i in t.loaded=!0,t.error=!1,n)e.removeEventListener(i,n[i],r)}function Vi(e,t,n,r){for(var i in t.loaded=!1,t.error=!0,n)e.removeEventListener(i,n[i],r)}function qi(e,t,n){if(!(e=n&&n.parentNode||e.head))throw Error(o(447));e.insertBefore(t,n)}var ji=/[\n"\\]/g;function zi(e){return e.replace(ji,(function(e){return"\\"+e.charCodeAt(0).toString(16)}))}var Bi=null,Wi=null;function Hi(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Ki="function"===typeof setTimeout?setTimeout:void 0,Gi="function"===typeof clearTimeout?clearTimeout:void 0,Qi="function"===typeof Promise?Promise:void 0,Yi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Qi?function(e){return Qi.resolve(null).then(e).catch($i)}:Ki;function $i(e){setTimeout((function(){throw e}))}function Xi(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Qt(t)}function Ji(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Ji(n),ha(n);continue;case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Zi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t){switch((t=e).tagName){case"TITLE":case"META":case"BASE":case"HTML":case"HEAD":case"BODY":continue;case"LINK":if("stylesheet"===t.rel&&!t.hasAttribute("data-precedence"))break;continue;case"STYLE":if(t.hasAttribute("data-precedence"))continue;break;case"SCRIPT":if(t.hasAttribute("async"))continue}break}if(3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ea(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function ta(e,t,n){switch(t=9===n.nodeType?n:n.ownerDocument,e){case"html":if(!(e=t.documentElement))throw Error(o(452));return e;case"head":if(!(e=t.head))throw Error(o(453));return e;case"body":if(!(e=t.body))throw Error(o(454));return e;default:throw Error(o(451))}}var na=Math.random().toString(36).slice(2),ra="__reactFiber$"+na,ia="__reactProps$"+na,aa="__reactContainer$"+na,oa="__reactEvents$"+na,ua="__reactListeners$"+na,sa="__reactHandles$"+na,ca="__reactResources$"+na,la="__reactMarker$"+na;function ha(e){delete e[ra],delete e[ia],delete e[oa],delete e[ua],delete e[sa]}function fa(e){var t=e[ra];if(t)return t;for(var n=e.parentNode;n;){if(t=n[aa]||n[ra]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ea(e);null!==e;){if(n=e[ra])return n;e=ea(e)}return t}n=(e=n).parentNode}return null}function da(e){if(e=e[ra]||e[aa]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function pa(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(o(33))}function va(e){return e[ia]||null}function ya(e){var t=e[ca];return t||(t=e[ca]={styles:new Map,scripts:new Map,head:new Map,lastStructuredMeta:new Map}),t}var ma={},ga=li(ma),ka=li(!1),wa=ma;function _a(e,t){var n=e.type.contextTypes;if(!n)return ma;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function ba(e){return null!==(e=e.childContextTypes)&&void 0!==e}function xa(){hi(ka),hi(ga)}function Ia(e,t,n){if(ga.current!==ma)throw Error(o(168));fi(ga,t),fi(ka,n)}function Ta(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,Y(e)||"Unknown",i));return B({},n,r)}function Sa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ma,wa=ga.current,fi(ga,e),fi(ka,ka.current),!0}function Ea(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ta(e,t,wa),r.__reactInternalMemoizedMergedChildContext=e,hi(ka),hi(ga),fi(ga,e)):hi(ka),fi(ka,n)}var Ca=null,Na=!1,Ra=!1;function Aa(e){null===Ca?Ca=[e]:Ca.push(e)}function Pa(){if(!Ra&&null!==Ca){Ra=!0;var e=0,t=Tt;try{var n=Ca;for(Tt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ca=null,Na=!1}catch(i){throw null!==Ca&&(Ca=Ca.slice(e+1)),Ze(at,Pa),i}finally{Tt=t,Ra=!1}}return null}var Da=[],Oa=0,La=null,Ma=0,Fa=[],Ua=0,Va=null,qa=1,ja="";function za(e,t){Da[Oa++]=Ma,Da[Oa++]=La,La=e,Ma=t}function Ba(e,t,n){Fa[Ua++]=qa,Fa[Ua++]=ja,Fa[Ua++]=Va,Va=e;var r=qa;e=ja;var i=32-ft(r)-1;r&=~(1<<i),n+=1;var a=32-ft(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,qa=1<<32-ft(t)+i|n<<i|r,ja=a+e}else qa=1<<a|n<<i|r,ja=e}function Wa(e){null!==e.return&&(za(e,1),Ba(e,1,0))}function Ha(e){for(;e===La;)La=Da[--Oa],Da[Oa]=null,Ma=Da[--Oa],Da[Oa]=null;for(;e===Va;)Va=Fa[--Ua],Fa[Ua]=null,ja=Fa[--Ua],Fa[Ua]=null,qa=Fa[--Ua],Fa[Ua]=null}var Ka=null,Ga=null,Qa=!1,Ya=null;function $a(e,t){var n=Ih(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=8):t.push(n)}function Xa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Ka=e,Ga=Zi(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Ka=e,Ga=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Va?{id:qa,overflow:ja}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ih(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Ka=e,Ga=null,!0);default:return!1}}function Ja(e){return 0!==(1&e.mode)&&0===(64&e.flags)}function Za(e){if(Qa){var t=e.type,n=e.pendingProps;if("link"===t)n="stylesheet"===n.rel&&"string"!==typeof n.precedence;else if("script"===t){t=n.onLoad;var r=n.onError;n=!(n.async&&(t||r))}else n=!0;if(n)if(n=Ga){if(t=n,!Xa(e,n)){if(Ja(e))throw Error(o(418));n=Zi(t.nextSibling),r=Ka,n&&Xa(e,n)?$a(r,t):(e.flags=-2049&e.flags|2,Qa=!1,Ka=e)}}else{if(Ja(e))throw Error(o(418));e.flags=-2049&e.flags|2,Qa=!1,Ka=e}else e.flags=-2049&e.flags|2,Qa=!1,Ka=e}}function eo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;t[ra]=e,t[ia]=r;var i=0!==(1&e.mode);switch(n){case"dialog":Hr("cancel",t),Hr("close",t);break;case"iframe":case"object":case"embed":Hr("load",t);break;case"video":case"audio":for(var a=0;a<jr.length;a++)Hr(jr[a],t);break;case"source":Hr("error",t);break;case"img":case"image":case"link":Hr("error",t),Hr("load",t);break;case"details":Hr("toggle",t);break;case"input":ne(t,r),Hr("invalid",t);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},Hr("invalid",t);break;case"textarea":le(t,r),Hr("invalid",t)}for(var o in Ie(n,r),a=null,r)if(r.hasOwnProperty(o)){var u=r[o];"children"===o?"string"===typeof u?t.textContent!==u&&(!0!==r.suppressHydrationWarning&&ii(t.textContent,u,i),a=["children",u]):"number"===typeof u&&t.textContent!==""+u&&(!0!==r.suppressHydrationWarning&&ii(t.textContent,u,i),a=["children",""+u]):s.hasOwnProperty(o)&&null!=u&&"onScroll"===o&&Hr("scroll",t)}switch(n){case"input":J(t),ae(t,r,!0);break;case"textarea":J(t),fe(t);break;case"select":case"option":break;default:"function"===typeof r.onClick&&(t.onclick=ai)}return t=a,e.updateQueue=t,null!==t}function to(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag&&27!==e.tag;)e=e.return;Ka=e}function no(e){if(e!==Ka)return!1;if(!Qa)return to(e),Qa=!0,!1;var t=!1;if(3===e.tag||27===e.tag||5===e.tag&&Hi(e.type,e.memoizedProps)||(t=!0),t&&(t=Ga)){if(Ja(e))throw ro(),Error(o(418));for(;t;)$a(e,t),t=Zi(t.nextSibling)}if(to(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ga=Zi(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ga=null}}else Ga=Ka?Zi(e.stateNode.nextSibling):null;return!0}function ro(){for(var e=Ga;e;)e=Zi(e.nextSibling)}function io(){Ga=Ka=null,Qa=!1}function ao(e){null===Ya?Ya=[e]:Ya.push(e)}var oo=_.ReactCurrentBatchConfig;function uo(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var so=li(null),co=null,lo=null,ho=null;function fo(){ho=lo=co=null}function po(e,t,n){fi(so,t._currentValue),t._currentValue=n}function vo(e){var t=so.current;hi(so),e._currentValue=t===V?e._defaultValue:t}function yo(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function mo(e,t,n){var r=e.child;for(null!==r&&(r.return=e);null!==r;){var i=r.dependencies;if(null!==i)for(var a=r.child,u=i.firstContext;null!==u;){if(u.context===t){if(1===r.tag){(u=Ao(-1,n&-n)).tag=2;var s=r.updateQueue;if(null!==s){var c=(s=s.shared).pending;null===c?u.next=u:(u.next=c.next,c.next=u),s.pending=u}}r.lanes|=n,null!==(u=r.alternate)&&(u.lanes|=n),yo(r.return,n,e),i.lanes|=n;break}u=u.next}else if(10===r.tag)a=r.type===e.type?null:r.child;else if(18===r.tag){if(null===(a=r.return))throw Error(o(341));a.lanes|=n,null!==(i=a.alternate)&&(i.lanes|=n),yo(a,n,e),a=r.sibling}else a=r.child;if(null!==a)a.return=r;else for(a=r;null!==a;){if(a===e){a=null;break}if(null!==(r=a.sibling)){r.return=a.return,a=r;break}a=a.return}r=a}}function go(e,t){co=e,ho=lo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ls=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(ho!==e)if(e={context:e,memoizedValue:t,next:null},null===lo){if(null===co)throw Error(o(308));lo=e,co.dependencies={lanes:0,firstContext:e}}else lo=lo.next=e;return t}var wo=[],_o=0,bo=0;function xo(){for(var e=_o,t=bo=_o=0;t<e;){var n=wo[t];wo[t++]=null;var r=wo[t];wo[t++]=null;var i=wo[t];wo[t++]=null;var a=wo[t];if(wo[t++]=null,null!==r&&null!==i){var o=r.pending;null===o?i.next=i:(i.next=o.next,o.next=i),r.pending=i}0!==a&&So(n,i,a)}}function Io(e,t,n,r){wo[_o++]=e,wo[_o++]=t,wo[_o++]=n,wo[_o++]=r,bo|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function To(e,t){return Io(e,null,null,t),Eo(e)}function So(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var i=!1,a=e.return;null!==a;)a.childLanes|=n,null!==(r=a.alternate)&&(r.childLanes|=n),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(i=!0)),e=a,a=a.return;i&&null!==t&&3===e.tag&&(a=e.stateNode,i=31-ft(n),null===(e=(a=a.hiddenUpdates)[i])?a[i]=[t]:e.push(t),t.lane=1073741824|n)}function Eo(e){if(50<Vl)throw Vl=0,ql=null,Error(o(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Co=!1;function No(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ao(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Po(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&fl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,t=Eo(e),So(e,null,n),t}return Io(e,r,t,n),Eo(e)}function Do(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,It(e,n)}}function Oo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lo(e,t,n,r){var i=e.updateQueue;Co=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var h=i.baseState;for(o=0,l=c=s=null,u=a;;){var f=u.eventTime,d=-1073741825&u.lane,p=d!==u.lane;if(p?(vl&d)===d:(r&d)===d){null!==l&&(l=l.next={eventTime:f,lane:0,tag:u.tag,payload:u.payload,callback:null,next:null});e:{var v=e,y=u;switch(d=t,f=n,y.tag){case 1:if("function"===typeof(v=y.payload)){h=v.call(f,h,d);break e}h=v;break e;case 3:v.flags=-32769&v.flags|64;case 0:if(null===(d="function"===typeof(v=y.payload)?v.call(f,h,d):v)||void 0===d)break e;h=B({},h,d);break e;case 2:Co=!0}}null!==(d=u.callback)&&(e.flags|=32,p&&(e.flags|=4096),null===(p=i.callbacks)?i.callbacks=[d]:p.push(d))}else p={eventTime:f,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=p,s=h):l=l.next=p,o|=d;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(p=u).next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}null===l&&(s=h),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null===a&&(i.shared.lanes=0),xl|=o,e.lanes=o,e.memoizedState=h}}function Mo(e,t){if("function"!==typeof e)throw Error(o(191,e));e.call(t)}function Fo(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Mo(n[e],t)}var Uo=r.Component?(new r.Component).refs:{};function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qo={isMounted:function(e){return!!(e=e._reactInternals)&&Qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Bl(),i=Wl(e),a=Ao(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Po(e,a,i))&&(Hl(t,e,i,r),Do(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Bl(),i=Wl(e),a=Ao(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Po(e,a,i))&&(Hl(t,e,i,r),Do(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Bl(),r=Wl(e),i=Ao(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Po(e,i,r))&&(Hl(t,e,r,n),Do(t,e,r))}};function jo(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!pr(n,r)||!pr(i,a))}function zo(e,t,n){var r=!1,i=ma,a=t.contextType;return"object"===typeof a&&null!==a?a=ko(a):(i=ba(t)?wa:ga.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?_a(e,i):ma),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Bo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qo.enqueueReplaceState(t,t.state,null)}function Wo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Uo,No(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=ko(a):(a=ba(t)?wa:ga.current,i.context=_a(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Vo(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qo.enqueueReplaceState(i,i.state,null),Lo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=2097156)}function Ho(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Uo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ko(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Go(e){return(0,e._init)(e._payload)}function Qo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=8):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Sh(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=8388610,n):r:(t.flags|=8388610,n):(t.flags|=524288,n)}function u(t){return e&&null===t.alternate&&(t.flags|=8388610),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Ah(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===O&&Go(a)===t.type)?((r=i(t,n.props)).ref=Ho(e,t,n),r.return=e,r):((r=Ch(n.type,n.key,n.props,null,e.mode,r)).ref=Ho(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Ph(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Nh(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ah(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Ch(t.type,t.key,t.props,null,e.mode,n)).ref=Ho(e,null,t),n.return=e,n;case x:return(t=Ph(t,e.mode,n)).return=e,t;case O:return f(e,(0,t._init)(t._payload),n)}if(ue(t)||j(t))return(t=Nh(t,e.mode,n,null)).return=e,t;Ko(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case O:return d(e,t,(i=n._init)(n._payload),r)}if(ue(n)||j(n))return null!==i?null:h(e,t,n,r,null);Ko(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case O:return p(e,t,n,(0,r._init)(r._payload),i)}if(ue(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);Ko(t,r)}return null}function v(i,o,u,s){for(var c=null,l=null,h=o,v=o=0,y=null;null!==h&&v<u.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var m=d(i,h,u[v],s);if(null===m){null===h&&(h=y);break}e&&h&&null===m.alternate&&t(i,h),o=a(m,o,v),null===l?c=m:l.sibling=m,l=m,h=y}if(v===u.length)return n(i,h),Qa&&za(i,v),c;if(null===h){for(;v<u.length;v++)null!==(h=f(i,u[v],s))&&(o=a(h,o,v),null===l?c=h:l.sibling=h,l=h);return Qa&&za(i,v),c}for(h=r(i,h);v<u.length;v++)null!==(y=p(h,i,v,u[v],s))&&(e&&null!==y.alternate&&h.delete(null===y.key?v:y.key),o=a(y,o,v),null===l?c=y:l.sibling=y,l=y);return e&&h.forEach((function(e){return t(i,e)})),Qa&&za(i,v),c}function y(i,u,s,c){var l=j(s);if("function"!==typeof l)throw Error(o(150));if(null==(s=l.call(s)))throw Error(o(151));for(var h=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=a(k,u,y),null===h?l=k:h.sibling=k,h=k,v=m}if(g.done)return n(i,v),Qa&&za(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=f(i,g.value,c))&&(u=a(g,u,y),null===h?l=g:h.sibling=g,h=g);return Qa&&za(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=a(g,u,y),null===h?l=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(i,e)})),Qa&&za(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===I){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&Go(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ho(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===I?((a=Nh(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Ch(o.type,o.key,o.props,null,r.mode,s)).ref=Ho(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Ph(o,r.mode,s)).return=r,r=a}return u(r);case O:return e(r,a,(l=o._init)(o._payload),s)}if(ue(o))return v(r,a,o,s);if(j(o))return y(r,a,o,s);Ko(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Ah(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Yo=Qo(!0),$o=Qo(!1),Xo=li(null),Jo=li(0);function Zo(e,t){fi(Jo,e=wl),fi(Xo,t),wl=e|t.baseLanes}function eu(){fi(Jo,wl),fi(Xo,Xo.current)}function tu(){wl=Jo.current,hi(Xo),hi(Jo)}var nu=li(null);function ru(e){return null!==e&&null===e.memoizedState&&null===Xo.current}function iu(e){22===e.tag?fi(nu,e):au()}function au(){fi(nu,nu.current)}var ou=li(0);function uu(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var su=[];function cu(){for(var e=0;e<su.length;e++)su[e]._workInProgressVersionPrimary=null;su.length=0}var lu="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},hu=i.unstable_scheduleCallback,fu=i.unstable_NormalPriority,du={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0,_defaultValue:null,_globalName:null};function pu(){return{controller:new lu,data:new Map,refCount:0}}function vu(e){e.refCount--,0===e.refCount&&hu(fu,(function(){e.controller.abort()}))}var yu=Error(o(460)),mu=null;function gu(e){return void 0===(e=e[e.length-1])||("fulfilled"===(e=e.status)||"rejected"===e)}function ku(){}var wu=null,_u=_.ReactCurrentDispatcher,bu=_.ReactCurrentBatchConfig,xu=0,Iu=null,Tu=null,Su=null,Eu=!1,Cu=!1,Nu=!1,Ru=0,Au=0,Pu=0;function Du(){throw Error(o(321))}function Ou(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!dr(e[n],t[n]))return!1;return!0}function Lu(e,t,n,r,i,a){if(xu=a,Iu=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_u.current=null===e||null===e.memoizedState?_s:bs,mu=e=gl,Nu=!1,a=n(r,i),Nu=!1,Cu){a=0;do{if(Cu=!1,Au=Ru=0,25<=a)throw Error(o(301));a+=1,Su=Tu=null,t.updateQueue=null,_u.current=xs,mu=e;var u=n(r,i)}while(Cu);a=u}if(_u.current=ws,t=null!==Tu&&null!==Tu.next,xu=0,Su=Tu=Iu=null,Eu=!1,Au=0,t)throw Error(o(300));return a}function Mu(){var e=0!==Ru;return Ru=0,e}function Fu(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Su?Iu.memoizedState=Su=e:Su=Su.next=e,Su}function Uu(){if(null===Tu){var e=Iu.alternate;e=null!==e?e.memoizedState:null}else e=Tu.next;var t=null===Su?Iu.memoizedState:Su.next;if(null!==t)Su=t,Tu=e;else{if(null===e)throw Error(o(310));e={memoizedState:(Tu=e).memoizedState,baseState:Tu.baseState,baseQueue:Tu.baseQueue,queue:Tu.queue,next:null},null===Su?Iu.memoizedState=Su=e:Su=Su.next=e}return Su}function Vu(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then){var t=Au;return Au+=1,function(e,t){switch(null===mu?mu=[e]:void 0===(t=mu[t])?mu.push(e):t!==e&&(e.then(ku,ku),e=t),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:if("string"!==typeof e.status)switch(t=e,t.status="pending",t.then((function(t){if("pending"===e.status){var n=e;n.status="fulfilled",n.value=t}}),(function(t){if("pending"===e.status){var n=e;n.status="rejected",n.reason=t}})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}throw wu=e,yu}}(e,t)}if(e.$$typeof===C||e.$$typeof===N)return ko(e)}throw Error(o(438,String(e)))}function qu(e,t){return"function"===typeof t?t(e):t}function ju(e){var t=Uu(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=Tu,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var u=i.next;i.next=a.next,a.next=u}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var s=u=null,c=null,l=a;do{var h=-1073741825&l.lane;if(h!==l.lane?(vl&h)===h:(xu&h)===h)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),h=l.action,Nu&&e(r,h),r=l.hasEagerState?l.eagerState:e(r,h);else{var f={lane:h,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=f,u=r):c=c.next=f,Iu.lanes|=h,xl|=h}l=l.next}while(null!==l&&l!==a);null===c?u=r:c.next=s,dr(r,t.memoizedState)||(Ls=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}return null===i&&(n.lanes=0),[t.memoizedState,n.dispatch]}function zu(e){var t=Uu(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{a=e(a,u.action),u=u.next}while(u!==i);dr(a,t.memoizedState)||(Ls=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Bu(){}function Wu(e,t){var n=Iu,r=Uu(),i=t(),a=!dr((Tu||r).memoizedState,i);if(a&&(r.memoizedState=i,Ls=!0),r=r.queue,ns(Gu.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==Su&&1&Su.memoizedState.tag){if(n.flags|=1024,Xu(9,Ku.bind(null,n,r,i,t),void 0,null),null===dl)throw Error(o(349));0!==(30&xu)||Hu(n,t,i)}return i}function Hu(e,t,n){e.flags|=8192,e={getSnapshot:t,value:n},null===(t=Iu.updateQueue)?(t={lastEffect:null,events:null,stores:null},Iu.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ku(e,t,n,r){t.value=n,t.getSnapshot=r,Qu(t)&&Yu(e)}function Gu(e,t,n){return n((function(){Qu(t)&&Yu(e)}))}function Qu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!dr(e,n)}catch(r){return!0}}function Yu(e){var t=To(e,1);null!==t&&Hl(t,e,1,-1)}function $u(e){var t=Fu();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qu,lastRenderedState:e},t.queue=e,e=e.dispatch=ys.bind(null,Iu,e),[t.memoizedState,e]}function Xu(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=Iu.updateQueue)?(t={lastEffect:null,events:null,stores:null},Iu.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ju(){return Uu().memoizedState}function Zu(e,t,n,r){var i=Fu();Iu.flags|=e,i.memoizedState=Xu(1|t,n,void 0,void 0===r?null:r)}function es(e,t,n,r){var i=Uu();r=void 0===r?null:r;var a=void 0;if(null!==Tu){var o=Tu.memoizedState;if(a=o.destroy,null!==r&&Ou(r,o.deps))return void(i.memoizedState=Xu(t,n,a,r))}Iu.flags|=e,i.memoizedState=Xu(1|t,n,a,r)}function ts(e,t){return Zu(4195328,8,e,t)}function ns(e,t){return es(1024,8,e,t)}function rs(e,t){return es(4,2,e,t)}function is(e,t){return es(4,4,e,t)}function as(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function os(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,es(4,4,as.bind(null,t,e),n)}function us(){}function ss(e,t){var n=Uu();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ou(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function cs(e,t){var n=Uu();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ou(t,r[1])?r[0]:(Nu&&e(),e=e(),n.memoizedState=[e,t],e)}function ls(e,t,n){return 0===(21&xu)?(e.baseState&&(e.baseState=!1,Ls=!0),e.memoizedState=n):(dr(n,t)||(n=_t(),Iu.lanes|=n,xl|=n,e.baseState=!0),t)}function hs(e,t){var n=Tt;Tt=0!==n&&4>n?n:4,e(!0);var r=bu.transition;bu.transition={};try{e(!1),t()}finally{Tt=n,bu.transition=r}}function fs(){return Uu().memoizedState}function ds(){return Uu().memoizedState}function ps(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Wl(t),r=Bl(),i=Po(t,e=Ao(r,n),n);return null!==i&&(Hl(i,t,n,r),Do(i,t,n)),t={cache:pu()},void(e.payload=t)}t=t.return}}function vs(e,t,n){var r=Wl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ms(e))gs(t,n);else if(Io(e,t,n,r),null!==(n=Eo(e))){Hl(n,e,r,Bl()),ks(n,t,r)}}function ys(e,t,n){var r=Wl(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ms(e))gs(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,dr(u,o))return Io(e,t,i,0),void(null===dl&&xo())}catch(s){}Io(e,t,i,r),null!==(n=Eo(e))&&(Hl(n,e,r,i=Bl()),ks(n,t,r))}}function ms(e){var t=e.alternate;return e===Iu||null!==t&&t===Iu}function gs(e,t){Cu=Eu=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ks(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,It(e,n)}}var ws={readContext:ko,useCallback:Du,useContext:Du,useEffect:Du,useImperativeHandle:Du,useInsertionEffect:Du,useLayoutEffect:Du,useMemo:Du,useReducer:Du,useRef:Du,useState:Du,useDebugValue:Du,useDeferredValue:Du,useTransition:Du,useMutableSource:Du,useSyncExternalStore:Du,useId:Du,unstable_isNewReconciler:!1};ws.useCacheRefresh=Du,ws.use=Du;var _s={readContext:ko,useCallback:function(e,t){return Fu().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:ts,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Zu(2097156,4,as.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Zu(2097156,4,e,t)},useInsertionEffect:function(e,t){return Zu(4,2,e,t)},useMemo:function(e,t){var n=Fu();return t=void 0===t?null:t,Nu&&e(),e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Fu();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=vs.bind(null,Iu,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Fu().memoizedState=e},useState:$u,useDebugValue:us,useDeferredValue:function(e){return Fu().memoizedState=e},useTransition:function(){var e=$u(!1),t=e[0];return e=hs.bind(null,e[1]),Fu().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Iu,i=Fu();if(Qa){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===dl)throw Error(o(349));0!==(30&xu)||Hu(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ts(Gu.bind(null,r,a,e),[e]),r.flags|=1024,Xu(9,Ku.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Fu(),t=dl.identifierPrefix;if(Qa){var n=ja;t=":"+t+"R"+(n=(qa&~(1<<32-ft(qa)-1)).toString(32)+n),0<(n=Ru++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Pu++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1,useCacheRefresh:function(){return Fu().memoizedState=ps.bind(null,Iu)}};_s.use=Vu;var bs={readContext:ko,useCallback:ss,useContext:ko,useEffect:ns,useImperativeHandle:os,useInsertionEffect:rs,useLayoutEffect:is,useMemo:cs,useReducer:ju,useRef:Ju,useState:function(){return ju(qu)},useDebugValue:us,useDeferredValue:function(e){return ls(Uu(),Tu.memoizedState,e)},useTransition:function(){return[ju(qu)[0],Uu().memoizedState]},useMutableSource:Bu,useSyncExternalStore:Wu,useId:fs,unstable_isNewReconciler:!1};bs.useCacheRefresh=ds,bs.use=Vu;var xs={readContext:ko,useCallback:ss,useContext:ko,useEffect:ns,useImperativeHandle:os,useInsertionEffect:rs,useLayoutEffect:is,useMemo:cs,useReducer:zu,useRef:Ju,useState:function(){return zu(qu)},useDebugValue:us,useDeferredValue:function(e){var t=Uu();return null===Tu?t.memoizedState=e:ls(t,Tu.memoizedState,e)},useTransition:function(){return[zu(qu)[0],Uu().memoizedState]},useMutableSource:Bu,useSyncExternalStore:Wu,useId:fs,unstable_isNewReconciler:!1};function Is(e,t){try{var n="",r=t;do{n+=G(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function Ts(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function Ss(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}function Es(e,t,n){(n=Ao(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Al||(Al=!0,Pl=r),Ss(0,t)},n}function Cs(e,t,n){(n=Ao(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Ss(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){Ss(0,t),"function"!==typeof r&&(null===Dl?Dl=new Set([this]):Dl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ns(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=32768:(e.flags|=64,n.flags|=65536,n.flags&=-26405,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ao(-1,1)).tag=2,Po(n,t,1))),n.lanes|=1),e):(e.flags|=32768,e.lanes=i,e)}xs.useCacheRefresh=ds,xs.use=Vu;var Rs=li(null);function As(){var e=Rs.current;return null!==e?e:dl.pooledCache}function Ps(e,t){fi(Rs,null===t?Rs.current:t.pool)}function Ds(){var e=As();return null===e?null:{parent:du._currentValue,pool:e}}var Os=_.ReactCurrentOwner,Ls=!1;function Ms(e,t,n,r){t.child=null===e?$o(t,null,n,r):Yo(t,e.child,n,r)}function Fs(e,t,n,r,i){n=n.render;var a=t.ref;return go(t,i),r=Lu(e,t,n,r,a,i),n=Mu(),null===e||Ls?(Qa&&n&&Wa(t),t.flags|=1,Ms(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-1029,e.lanes&=~i,oc(e,t,i))}function Us(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Th(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ch(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Vs(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:pr)(o,r)&&e.ref===t.ref)return oc(e,t,i)}return t.flags|=1,(e=Sh(a,r)).ref=t.ref,e.return=t,t.child=e}function Vs(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(pr(a,r)&&e.ref===t.ref){if(Ls=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,oc(e,t,i);0!==(65536&e.flags)&&(Ls=!0)}}return Bs(e,t,n,r,i)}function qs(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if(zs(e,t),"hidden"===r.mode||2&t.stateNode._visibility){if(0!==(64&t.flags)){if(n=null!==a?a.baseLanes|n:n,null!==e){for(r=t.child=e.child,i=0;null!==r;)i=i|r.lanes|r.childLanes,r=r.sibling;t.childLanes=i&~n}else t.childLanes=0,t.child=null;return js(e,t,n)}if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ps(0,null),eu(),iu(t);else{if(0===(1073741824&n))return t.lanes=t.childLanes=1073741824,js(e,t,null!==a?a.baseLanes|n:n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ps(0,null!==a?a.cachePool:null),null!==a?Zo(t,a):eu(),iu(t)}}else null!==a?(Ps(0,a.cachePool),Zo(t,a),au(),t.memoizedState=null):(null!==e&&Ps(0,null),eu(),au());return Ms(e,t,i,n),t.child}function js(e,t,n){var r=As();return r=null===r?null:{parent:du._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},null!==e&&Ps(0,null),eu(),iu(t),null}function zs(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=256,t.flags|=1048576)}function Bs(e,t,n,r,i){var a=ba(n)?wa:ga.current;return a=_a(t,a),go(t,i),n=Lu(e,t,n,r,a,i),r=Mu(),null===e||Ls?(Qa&&r&&Wa(t),t.flags|=1,Ms(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-1029,e.lanes&=~i,oc(e,t,i))}function Ws(e,t,n,r,i){if(ba(n)){var a=!0;Sa(t)}else a=!1;if(go(t,i),null===t.stateNode)ac(e,t),zo(t,n,r),Wo(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ko(c):c=_a(t,c=ba(n)?wa:ga.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Bo(t,o,r,c),Co=!1;var f=t.memoizedState;o.state=f,Lo(t,r,o,i),s=t.memoizedState,u!==r||f!==s||ka.current||Co?("function"===typeof l&&(Vo(t,n,l,r),s=t.memoizedState),(u=Co||jo(t,n,u,r,f,s,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=2097156)):("function"===typeof o.componentDidMount&&(t.flags|=2097156),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=2097156),r=!1)}else{o=t.stateNode,Ro(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:uo(t.type,u),o.props=c,h=t.pendingProps,f=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=ko(s):s=_a(t,s=ba(n)?wa:ga.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==h||f!==s)&&Bo(t,o,r,s),Co=!1,f=t.memoizedState,o.state=f,Lo(t,r,o,i);var p=t.memoizedState;u!==h||f!==p||ka.current||Co?("function"===typeof d&&(Vo(t,n,d,r),p=t.memoizedState),(c=Co||jo(t,n,c,r,f,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=512)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=512),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&f===e.memoizedState||(t.flags|=512),r=!1)}return Hs(e,t,n,r,a,i)}function Hs(e,t,n,r,i,a){zs(e,t);var o=0!==(64&t.flags);if(!r&&!o)return i&&Ea(t,n,!1),oc(e,t,a);r=t.stateNode,Os.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Yo(t,e.child,null,a),t.child=Yo(t,null,u,a)):Ms(e,t,u,a),t.memoizedState=r.state,i&&Ea(t,n,!0),t.child}function Ks(e){var t=e.stateNode;t.pendingContext?Ia(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ia(0,t.context,!1),yi(e,t.containerInfo)}function Gs(e,t,n,r,i){return io(),ao(i),t.flags|=128,Ms(e,t,n,r),t.child}var Qs,Ys,$s,Xs={dehydrated:null,treeContext:null,retryLane:0};function Js(e){return{baseLanes:e,cachePool:Ds()}}function Zs(e,t,n){var r,i=t.pendingProps,a=!1,u=0!==(64&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&ou.current)),r&&(a=!0,t.flags&=-65),null===e){if(Qa){if(a?fi(nu,t):au(),Za(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated))return 0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null;hi(nu)}return u=i.children,e=i.fallback,a?(au(),i=t.mode,a=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=u):a=Rh(u,i,0,null),e=Nh(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Js(n),t.memoizedState=Xs,e):(fi(nu,t),ec(t,u))}if(null!==(r=e.memoizedState)){var s=r.dehydrated;if(null!==s)return function(e,t,n,r,i,a,u){if(n)return 128&t.flags?(fi(nu,t),t.flags&=-129,tc(e,t,u,r=Ts(Error(o(422))))):null!==t.memoizedState?(au(),t.child=e.child,t.flags|=64,null):(au(),a=r.fallback,i=t.mode,r=Rh({mode:"visible",children:r.children},i,0,null),(a=Nh(a,i,u,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Yo(t,e.child,null,u),t.child.memoizedState=Js(u),t.memoizedState=Xs,a);if(fi(nu,t),0===(1&t.mode))return tc(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,(a=Error(o(419))).digest=r,tc(e,t,u,r=Ts(a,r,void 0))}if(s=0!==(u&e.childLanes),Ls||s){if(null!==(r=dl)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==a.retryLane&&(a.retryLane=i,To(e,i),Hl(r,e,i,-1))}return ih(),tc(e,t,u,null)}return"$?"===i.data?(t.flags|=64,t.child=e.child,t=wh.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Ga=Zi(i.nextSibling),Ka=t,Qa=!0,Ya=null,null!==e&&(Fa[Ua++]=qa,Fa[Ua++]=ja,Fa[Ua++]=Va,qa=e.id,ja=e.overflow,Va=t),(t=ec(t,r.children)).flags|=2048,t)}(e,t,u,i,s,r,n)}if(a){au(),a=i.fallback,u=t.mode,s=(r=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==r?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Sh(r,c)).subtreeFlags=7340032&r.subtreeFlags,null!==s?a=Sh(s,a):(a=Nh(a,u,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,null===(u=e.child.memoizedState)?u=Js(n):(null!==(r=u.cachePool)?(s=du._currentValue,r=r.parent!==s?{parent:s,pool:s}:r):r=Ds(),u={baseLanes:u.baseLanes|n,cachePool:r}),a.memoizedState=u,a.childLanes=e.childLanes&~n,t.memoizedState=Xs,i}return fi(nu,t),e=(a=e.child).sibling,i=Sh(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=8):n.push(e)),t.child=i,t.memoizedState=null,i}function ec(e,t){return(t=Rh({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function tc(e,t,n,r){return null!==r&&ao(r),Yo(t,e.child,null,n),(e=ec(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nc(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),yo(e.return,t,n)}function rc(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function ic(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Ms(e,t,r.children,n),0!==(2&(r=ou.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nc(e,n,t);else if(19===e.tag)nc(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(fi(ou,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===uu(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),rc(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===uu(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}rc(t,!0,n,null,a);break;case"together":rc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ac(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function oc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),xl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Sh(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Sh(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function uc(e){e.flags|=1048832}function sc(e,t){if(!Qa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function cc(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=7340032&i.subtreeFlags,r|=7340032&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function lc(e,t,n){var r=t.pendingProps;switch(Ha(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cc(t),null;case 1:case 17:return ba(t.type)&&xa(),cc(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=1024),vo(du),mi(),hi(ka),hi(ga),cu(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(no(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(128&t.flags)||(t.flags|=512,null!==Ya&&(Yl(Ya),Ya=null))),cc(t),null;case 26:return ki(t),(e?e.ref:null)!==t.ref&&uc(t),null!==e&&e.memoizedState===t.memoizedState||(t.flags|=4),cc(t),null;case 27:ki(t),n=vi.current;var i=t.type;if(null!==e&&null!=t.stateNode)Ys(e,t,i,r),e.ref!==t.ref&&uc(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return cc(t),null}e=di.current,no(t)?eo(t):(t.stateNode=ta(i,r,n),t.flags|=4),null!==t.ref&&uc(t)}return cc(t),null;case 5:if(ki(t),n=t.type,null!==e&&null!=t.stateNode)Ys(e,t,n,r),e.ref!==t.ref&&uc(t);else{if(!r){if(null===t.stateNode)throw Error(o(166));return cc(t),null}if(e=di.current,no(t))eo(t)&&(t.flags|=4);else{(e=oi(n,r,vi.current,e))[ra]=t,e[ia]=r,Qs(e,t),t.stateNode=e;e:switch(ui(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&(t.flags|=4)}null!==t.ref&&uc(t)}return cc(t),null;case 6:if(e&&null!=t.stateNode)$s(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(e=vi.current,no(t)){if(e=t.stateNode,n=t.memoizedProps,e[ra]=t,(r=e.nodeValue!==n)&&null!==(i=Ka))switch(i.tag){case 3:ii(e.nodeValue,n,0!==(1&i.mode));break;case 27:case 5:!0!==i.memoizedProps.suppressHydrationWarning&&ii(e.nodeValue,n,0!==(1&i.mode))}r&&(t.flags|=4)}else(e=(9===e.nodeType?e:e.ownerDocument).createTextNode(r))[ra]=t,t.stateNode=e}return cc(t),null;case 13:if(hi(nu),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(Qa&&null!==Ga&&0!==(1&t.mode)&&0===(64&t.flags))ro(),io(),t.flags|=49280,i=!1;else if(i=no(t),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(o(317));i[ra]=t}else io(),0===(64&t.flags)&&(t.memoizedState=null),t.flags|=4;cc(t),i=!1}else null!==Ya&&(Yl(Ya),Ya=null),i=!0;if(!i)return 32768&t.flags?t:null}if(0!==(64&t.flags))return t.lanes=n,t;if(n=null!==r,r=null!==e&&null!==e.memoizedState,n){var a=null;null!==(i=t.child).alternate&&null!==i.alternate.memoizedState&&null!==i.alternate.memoizedState.cachePool&&(a=i.alternate.memoizedState.cachePool.pool);var u=null;null!==i.memoizedState&&null!==i.memoizedState.cachePool&&(u=i.memoizedState.cachePool.pool),u!==a&&(i.flags|=1024)}return n!==r&&n&&(t.child.flags|=4096,0!==(1&t.mode)&&(ru(e)?ih():0===_l&&(_l=3))),null!==t.updateQueue&&(t.flags|=4),cc(t),null;case 4:return mi(),null===e&&Qr(t.stateNode.containerInfo),cc(t),null;case 10:return vo(t.type._context),cc(t),null;case 19:if(hi(ou),null===(i=t.memoizedState))return cc(t),null;if(r=0!==(64&t.flags),null===(a=i.rendering))if(r)sc(i,!1);else{if(0!==_l||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=uu(e))){for(t.flags|=64,sc(i,!1),null!==(e=a.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Eh(n,e),n=n.sibling;return fi(ou,1&ou.current|2),t.child}e=e.sibling}null!==i.tail&&rt()>Nl&&(t.flags|=64,r=!0,sc(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=uu(a))){if(t.flags|=64,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),sc(i,!0),null===i.tail&&"hidden"===i.tailMode&&!a.alternate&&!Qa)return cc(t),null}else 2*rt()-i.renderingStartTime>Nl&&1073741824!==n&&(t.flags|=64,r=!0,sc(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(null!==(e=i.last)?e.sibling=a:t.child=a,i.last=a)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=rt(),t.sibling=null,e=ou.current,fi(ou,r?1&e|2:1&e),t):(cc(t),null);case 22:case 23:return hi(nu),tu(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=4096):r&&(t.flags|=4096),r&&0!==(1&t.mode)?0!==(1073741824&n)&&0===(64&t.flags)&&(cc(t),6&t.subtreeFlags&&(t.flags|=4096)):cc(t),null!==t.updateQueue&&(t.flags|=4),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=1024),null!==e&&hi(Rs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=1024),vo(du),cc(t),null;case 25:return null}throw Error(o(156,t.tag))}function hc(e,t){switch(Ha(t),t.tag){case 1:return ba(t.type)&&xa(),32768&(e=t.flags)?(t.flags=-32769&e|64,t):null;case 3:return vo(du),mi(),hi(ka),hi(ga),cu(),0!==(32768&(e=t.flags))&&0===(64&e)?(t.flags=-32769&e|64,t):null;case 26:case 27:case 5:return ki(t),null;case 13:if(hi(nu),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));io()}return 32768&(e=t.flags)?(t.flags=-32769&e|64,t):null;case 19:return hi(ou),null;case 4:return mi(),null;case 10:return vo(t.type._context),null;case 22:case 23:return hi(nu),tu(),null!==e&&hi(Rs),32768&(e=t.flags)?(t.flags=-32769&e|64,t):null;case 24:return vo(du),null;default:return null}}function fc(e,t){switch(Ha(t),t.tag){case 1:null!==(e=t.type.childContextTypes)&&void 0!==e&&xa();break;case 3:vo(du),mi(),hi(ka),hi(ga),cu();break;case 26:case 27:case 5:ki(t);break;case 4:mi();break;case 13:hi(nu);break;case 19:hi(ou);break;case 10:vo(t.type._context);break;case 22:case 23:hi(nu),tu(),null!==e&&hi(Rs);break;case 24:vo(du)}}Qs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&27!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ys=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode;var a,o=null;switch(n){case"input":i=te(e,i),r=te(e,r),o=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),o=[];break;case"textarea":i=ce(e,i),r=ce(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ai)}for(l in Ie(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(a in u)!u.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&u[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Hr("scroll",e),o||u===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},$s=function(e,t,n,r){n!==r&&(t.flags|=4)};var dc=!1,pc=!1,vc="function"===typeof WeakSet?WeakSet:Set,yc=null;function mc(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var i=r;break;default:i=r}"function"===typeof n?n(i):n.current=i}}catch(a){yh(e,t,a)}}function gc(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){yh(e,t,r)}else n.current=null}function kc(e,t,n){try{n()}catch(r){yh(e,t,r)}}var wc=!1;function _c(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&kc(t,n,a)}i=i.next}while(i!==r)}}function bc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xc(e,t){try{bc(t,e)}catch(n){yh(e,e.return,n)}}function Ic(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Fo(t,n)}catch(r){yh(e,e.return,r)}}}function Tc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src&&(r.src=n.src)}}catch(i){yh(e,e.return,i)}}function Sc(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:jc(e,n),4&r&&xc(n,5);break;case 1:if(jc(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(u){yh(n,n.return,u)}else{var i=n.elementType===n.type?t.memoizedProps:uo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}catch(u){yh(n,n.return,u)}}32&r&&Ic(n),256&r&&mc(n,n.return);break;case 3:if(jc(e,n),32&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{Fo(r,e)}catch(u){yh(n,n.return,u)}}break;case 26:jc(e,n),256&r&&mc(n,n.return);break;case 27:case 5:jc(e,n),null===t&&4&r&&Tc(n),256&r&&mc(n,n.return);break;case 12:default:jc(e,n);break;case 13:jc(e,n),4&r&&Mc(e,n);break;case 22:if(0!==(1&n.mode)){if(!(i=null!==n.memoizedState||dc)){t=null!==t&&null!==t.memoizedState||pc;var a=dc,o=pc;dc=i,(pc=t)&&!o?Wc(e,n,0!==(4388&n.subtreeFlags)):jc(e,n),dc=a,pc=o}}else jc(e,n);256&r&&("manual"===n.memoizedProps.mode?mc(n,n.return):gc(n,n.return))}}function Ec(e){var t=e.alternate;null!==t&&(e.alternate=null,Ec(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ha(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Cc(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Nc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Cc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Rc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ai));else if(4!==r&&27!==r&&null!==(e=e.child))for(Rc(e,t,n),e=e.sibling;null!==e;)Rc(e,t,n),e=e.sibling}function Ac(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Ac(e,t,n),e=e.sibling;null!==e;)Ac(e,t,n),e=e.sibling}var Pc=null,Dc=!1;function Oc(e,t,n){for(n=n.child;null!==n;)Lc(e,t,n),n=n.sibling}function Lc(e,t,n){if(ht&&"function"===typeof ht.onCommitFiberUnmount)try{ht.onCommitFiberUnmount(lt,n)}catch(u){}switch(n.tag){case 26:pc||gc(n,t),Oc(e,t,n),n.memoizedState&&Ai(n.memoizedState);break;case 27:pc||gc(n,t);var r=Pc,i=Dc;for(Pc=n.stateNode,Oc(e,t,n),e=(n=n.stateNode).attributes;e.length;)n.removeAttributeNode(e[0]);ha(n),Pc=r,Dc=i;break;case 5:pc||gc(n,t);case 6:r=Pc,i=Dc,Pc=null,Oc(e,t,n),Dc=i,null!==(Pc=r)&&(Dc?(e=Pc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):Pc.removeChild(n.stateNode));break;case 18:null!==Pc&&(Dc?(e=Pc,n=n.stateNode,8===e.nodeType?Xi(e.parentNode,n):1===e.nodeType&&Xi(e,n),Qt(e)):Xi(Pc,n.stateNode));break;case 4:r=Pc,i=Dc,Pc=n.stateNode.containerInfo,Dc=!0,Oc(e,t,n),Pc=r,Dc=i;break;case 0:case 11:case 14:case 15:if(!pc&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&kc(n,t,o),i=i.next}while(i!==r)}Oc(e,t,n);break;case 1:if(!pc&&(gc(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){yh(n,t,u)}Oc(e,t,n);break;case 21:Oc(e,t,n);break;case 22:gc(n,t),1&n.mode?(pc=(r=pc)||null!==n.memoizedState,Oc(e,t,n),pc=r):Oc(e,t,n);break;default:Oc(e,t,n)}}function Mc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Qt(e)}catch(n){yh(t,t.return,n)}}function Fc(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new vc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new vc),t;default:throw Error(o(435,e.tag))}}(e);t.forEach((function(t){var r=_h.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function Uc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 27:case 5:Pc=s.stateNode,Dc=!1;break e;case 3:case 4:Pc=s.stateNode.containerInfo,Dc=!0;break e}s=s.return}if(null===Pc)throw Error(o(160));Lc(a,u,i),Pc=null,Dc=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){yh(i,t,l)}}if(6430&t.subtreeFlags)for(t=t.child;null!==t;)Vc(t,e),t=t.sibling}function Vc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Uc(t,e),qc(e),4&r){try{_c(3,e,e.return),bc(3,e)}catch(v){yh(e,e.return,v)}try{_c(5,e,e.return)}catch(v){yh(e,e.return,v)}}break;case 1:Uc(t,e),qc(e),256&r&&null!==n&&gc(n,n.return),32&r&&dc&&(null!==(e=e.updateQueue)&&(null!==(n=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?n:r.concat(n))));break;case 26:Uc(t,e),qc(e),256&r&&null!==n&&gc(n,n.return),4&r&&(r=e.memoizedState,null!==n&&((n=n.memoizedState)!==r&&Ai(n)),e.stateNode=r?Ri(r):null);break;case 27:if(4&r&&null===e.alternate){for(var i=e.stateNode,a=e.memoizedProps,u=i.firstChild;u;){var s=u.nextSibling,c=u.nodeName;u[la]||"HEAD"===c||"BODY"===c||"STYLE"===c||"LINK"===c&&"stylesheet"===u.rel.toLowerCase()||i.removeChild(u),u=s}for(u=e.type,s=i.attributes;s.length;)i.removeAttributeNode(s[0]);ui(i,u,a),i[ra]=e,i[ia]=a}case 5:if(Uc(t,e),qc(e),256&r&&null!==n&&gc(n,n.return),16&e.flags){t=e.stateNode;try{ge(t,"")}catch(v){yh(e,e.return,v)}}if(4&r&&(null!=(r=e.stateNode)&&(t=e.memoizedProps,a=null!==n?n.memoizedProps:t,n=e.type,i=e.updateQueue,e.updateQueue=null,null!==i)))try{"input"===n&&"radio"===t.type&&null!=t.name&&re(r,t),Te(n,a);var l=Te(n,t);for(a=0;a<i.length;a+=2){var h=i[a],f=i[a+1];"style"===h?be(r,f):"dangerouslySetInnerHTML"===h?me(r,f):"children"===h?ge(r,f):w(r,h,f,l)}switch(n){case"input":ie(r,t);break;case"textarea":he(r,t);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!t.multiple;var p=t.value;null!=p?se(r,!!t.multiple,p,!1):d!==!!t.multiple&&(null!=t.defaultValue?se(r,!!t.multiple,t.defaultValue,!0):se(r,!!t.multiple,t.multiple?[]:"",!1))}r[ia]=t}catch(v){yh(e,e.return,v)}break;case 6:if(Uc(t,e),qc(e),4&r){if(null===e.stateNode)throw Error(o(162));n=e.stateNode,r=e.memoizedProps;try{n.nodeValue=r}catch(v){yh(e,e.return,v)}}break;case 3:if(Uc(t,e),qc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Qt(t.containerInfo)}catch(v){yh(e,e.return,v)}break;case 4:Uc(t,e),qc(e);break;case 13:Uc(t,e),qc(e),4096&(n=e.child).flags&&null!==n.memoizedState&&(null===n.alternate||null===n.alternate.memoizedState)&&(Cl=rt()),4&r&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Fc(e,n)));break;case 22:if(256&r&&null!==n&&gc(n,n.return),l=null!==e.memoizedState,h=null!==n&&null!==n.memoizedState,1&e.mode?(dc=(f=dc)||l,pc=(d=pc)||h,Uc(t,e),pc=d,dc=f):Uc(t,e),qc(e),e.stateNode._current=e,4096&r&&((f=e.stateNode)._visibility=l?-2&f._visibility:1|f._visibility,l&&(f=dc||pc,null===n||h||f||0!==(1&e.mode)&&Bc(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,h=e;;){if(5===h.tag||26===h.tag||27===h.tag){if(null===n){n=h;try{i=h.stateNode,l?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=h.stateNode,c=void 0!==(s=h.memoizedProps.style)&&null!==s&&s.hasOwnProperty("display")?s.display:null,u.style.display=_e("display",c))}catch(v){yh(e,e.return,v)}}}else if(6===h.tag){if(null===n)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(v){yh(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;n===h&&(n=null),h=h.return}n===h&&(n=null),h.sibling.return=h.return,h=h.sibling}4&r&&(null!==(n=e.updateQueue)&&(null!==(r=n.wakeables)&&(n.wakeables=null,Fc(e,r))));break;case 19:Uc(t,e),qc(e),4&r&&(null!==(n=e.updateQueue)&&(e.updateQueue=null,Fc(e,n)));break;case 21:break;default:Uc(t,e),qc(e)}}function qc(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Cc(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 27:var i=r.stateNode;Ac(e,Nc(e),i);break;case 5:var a=r.stateNode;16&r.flags&&(ge(a,""),r.flags&=-17),Ac(e,Nc(e),a);break;case 3:case 4:var u=r.stateNode.containerInfo;Rc(e,Nc(e),u);break;default:throw Error(o(161))}}}catch(s){yh(e,e.return,s)}e.flags&=-3}2048&t&&(e.flags&=-2049)}function jc(e,t){if(4388&t.subtreeFlags)for(t=t.child;null!==t;)Sc(e,t.alternate,t),t=t.sibling}function zc(e){switch(e.tag){case 0:case 11:case 14:case 15:_c(4,e,e.return),Bc(e);break;case 1:gc(e,e.return);var t=e.stateNode;if("function"===typeof t.componentWillUnmount){var n=e.return;try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(r){yh(e,n,r)}}Bc(e);break;case 26:case 27:case 5:gc(e,e.return),Bc(e);break;case 22:gc(e,e.return),null===e.memoizedState&&Bc(e);break;default:Bc(e)}}function Bc(e){for(e=e.child;null!==e;)zc(e),e=e.sibling}function Wc(e,t,n){for(n=n&&0!==(4388&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,i=e,a=t,o=a.flags;switch(a.tag){case 0:case 11:case 15:Wc(i,a,n),xc(a,4);break;case 1:if(Wc(i,a,n),"function"===typeof(i=a.stateNode).componentDidMount)try{i.componentDidMount()}catch(s){yh(a,a.return,s)}if(null!==(r=a.updateQueue)){var u=r.shared.hiddenCallbacks;if(null!==u)for(r.shared.hiddenCallbacks=null,r=0;r<u.length;r++)Mo(u[r],i)}n&&32&o&&Ic(a),mc(a,a.return);break;case 26:case 27:case 5:Wc(i,a,n),n&&null===r&&4&o&&Tc(a),mc(a,a.return);break;case 12:default:Wc(i,a,n);break;case 13:Wc(i,a,n),n&&4&o&&Mc(i,a);break;case 22:null===a.memoizedState&&Wc(i,a,n),mc(a,a.return)}t=t.sibling}}function Hc(e,t){try{bc(t,e)}catch(n){yh(e,e.return,n)}}function Kc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&vu(n))}function Gc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&vu(e))}function Qc(e,t,n,r){if(5128&t.subtreeFlags)for(t=t.child;null!==t;)Yc(e,t,n,r),t=t.sibling}function Yc(e,t,n,r){var i=t.flags;switch(t.tag){case 0:case 11:case 15:Qc(e,t,n,r),1024&i&&Hc(t,9);break;case 3:Qc(e,t,n,r),1024&i&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&vu(e)));break;case 23:break;case 22:var a=t.stateNode;null!==t.memoizedState?4&a._visibility?Qc(e,t,n,r):1&t.mode?Xc(e,t):(a._visibility|=4,Qc(e,t,n,r)):4&a._visibility?Qc(e,t,n,r):(a._visibility|=4,$c(e,t,n,r,0!==(5128&t.subtreeFlags))),1024&i&&Kc(t.alternate,t);break;case 24:Qc(e,t,n,r),1024&i&&Gc(t.alternate,t);break;default:Qc(e,t,n,r)}}function $c(e,t,n,r,i){for(i=i&&0!==(5128&t.subtreeFlags),t=t.child;null!==t;){var a=e,o=t,u=n,s=r,c=o.flags;switch(o.tag){case 0:case 11:case 15:$c(a,o,u,s,i),Hc(o,8);break;case 23:break;case 22:var l=o.stateNode;null!==o.memoizedState?4&l._visibility?$c(a,o,u,s,i):1&o.mode?Xc(a,o):(l._visibility|=4,$c(a,o,u,s,i)):(l._visibility|=4,$c(a,o,u,s,i)),i&&1024&c&&Kc(o.alternate,o);break;case 24:$c(a,o,u,s,i),i&&1024&c&&Gc(o.alternate,o);break;default:$c(a,o,u,s,i)}t=t.sibling}}function Xc(e,t){if(5128&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,i=r.flags;switch(r.tag){case 22:Xc(n,r),1024&i&&Kc(r.alternate,r);break;case 24:Xc(n,r),1024&i&&Gc(r.alternate,r);break;default:Xc(n,r)}t=t.sibling}}function Jc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Zc(e){var t=e.deletions;if(0!==(8&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];yc=r,rl(r,e)}Jc(e)}if(5128&e.subtreeFlags)for(e=e.child;null!==e;)el(e),e=e.sibling}function el(e){switch(e.tag){case 0:case 11:case 15:Zc(e),1024&e.flags&&_c(9,e,e.return);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,tl(e)):Zc(e);break;default:Zc(e)}}function tl(e){var t=e.deletions;if(0!==(8&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];yc=r,rl(r,e)}Jc(e)}for(e=e.child;null!==e;)nl(e),e=e.sibling}function nl(e){switch(e.tag){case 0:case 11:case 15:_c(8,e,e.return),tl(e);break;case 22:var t=e.stateNode;4&t._visibility&&(t._visibility&=-5,tl(e));break;default:tl(e)}}function rl(e,t){for(;null!==yc;){var n=yc;switch(n.tag){case 0:case 11:case 15:_c(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:vu(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,yc=r;else e:for(n=e;null!==yc;){var i=(r=yc).sibling,a=r.return;if(Ec(r),r===n){yc=null;break e}if(null!==i){i.return=a,yc=i;break e}yc=a}}}var il,al={getCacheSignal:function(){return ko(du).controller.signal},getCacheForType:function(e){var t=ko(du),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},ol=Math.ceil,ul="function"===typeof WeakMap?WeakMap:Map,sl=_.ReactCurrentDispatcher,cl=_.ReactCurrentCache,ll=_.ReactCurrentOwner,hl=_.ReactCurrentBatchConfig,fl=0,dl=null,pl=null,vl=0,yl=0,ml=null,gl=null,kl=!1,wl=0,_l=0,bl=null,xl=0,Il=0,Tl=0,Sl=null,El=null,Cl=0,Nl=1/0,Rl=null,Al=!1,Pl=null,Dl=null,Ol=!1,Ll=null,Ml=0,Fl=0,Ul=null,Vl=0,ql=null,jl=-1,zl=0;function Bl(){return 0!==(6&fl)?rt():-1!==jl?jl:jl=rt()}function Wl(e){return 0===(1&e.mode)?1:0!==(2&fl)&&0!==vl?vl&-vl:null!==oo.transition?(0===zl&&(zl=_t()),zl):0!==(e=Tt)?e:e=void 0===(e=window.event)?16:nn(e.type)}function Hl(e,t,n,r){2===yl&&e===dl&&(eh(e,0),$l(e,vl)),xt(e,n,r),0!==(2&fl)&&e===dl||(e===dl&&(0===(2&fl)&&(Il|=n),4===_l&&$l(e,vl)),Kl(e,r),1===n&&0===fl&&0===(1&t.mode)&&(Nl=rt()+500,Na&&Pa()))}function Kl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=-130023425&e.pendingLanes;0<a;){var o=31-ft(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=kt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=gt(e,e===dl?vl:0);if(0===r)null!==n&&et(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&et(n),1===t)0===e.tag?function(e){Na=!0,Aa(e)}(Xl.bind(null,e)):Aa(Xl.bind(null,e)),Yi((function(){0===(6&fl)&&Pa()})),n=null;else{switch(St(r)){case 1:n=at;break;case 4:n=ot;break;case 16:default:n=ut;break;case 536870912:n=ct}n=bh(n,Gl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Gl(e,t){if(jl=-1,zl=0,0!==(6&fl))throw Error(o(327));var n=e.callbackNode;if(ph()&&e.callbackNode!==n)return null;var r=gt(e,e===dl?vl:0);if(0===r)return null;if(t=0!==(30&r)||0!==(r&e.expiredLanes)||t?ah(e,r):function(e,t){var n=fl;fl|=2;var r=nh(e.containerInfo),i=rh();dl===e&&vl===t||(Rl=null,Nl=rt()+500,eh(e,t));e:for(;;)try{if(0!==yl&&null!==pl){t=pl;var a=ml;switch(yl){case 1:yl=0,ml=null,lh(t,a);break;case 2:if(null===gl||!gu(gl)){t=function(){Kl(e,rt())},ml.then(t,t);break e}yl=0,ml=null,ch(t);break;case 3:yl=4;break e;default:yl=0,ml=null,null!==gl&&gu(gl)?ch(t):lh(t,a)}}uh();break}catch(u){th(e,u)}return fo(),wi.current=bi,bi=null,sl.current=r,cl.current=i,fl=n,null!==pl?0:(dl=null,vl=0,xo(),_l)}(e,r),0!==t){if(2===t){var i=r,a=wt(e,i);0!==a&&(r=a,t=Ql(e,i,a))}if(1===t)throw n=bl,eh(e,0),$l(e,r),Kl(e,rt()),n;if(6===t)$l(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(8192&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!dr(a(),i))return!1}catch(u){return!1}}}if(n=t.child,8192&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)){if(2===(t=ah(e,r))){var u=wt(e,a=r);0!==u&&(r=u,t=Ql(e,a,u))}if(1===t)throw n=bl,eh(e,0),$l(e,r),Kl(e,rt()),n}switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:fh(e,El,Rl);break;case 3:if($l(e,r),(130023424&r)===r&&10<(t=Cl+500-rt())){if(0!==gt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Bl(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ki(fh.bind(null,e,El,Rl),t);break}fh(e,El,Rl);break;case 4:if($l(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;)a=1<<(u=31-ft(r)),(u=t[u])>i&&(i=u),r&=~a;if(r=i,10<(r=(120>(r=rt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ol(r/1960))-r)){e.timeoutHandle=Ki(fh.bind(null,e,El,Rl),r);break}fh(e,El,Rl);break;default:throw Error(o(329))}}}return Kl(e,rt()),e.callbackNode===n?2===yl&&dl===e?(e.callbackPriority=0,e.callbackNode=null):Gl.bind(null,e):null}function Ql(e,t,n){var r=Sl,i=e.current.memoizedState.isDehydrated;if(i&&(eh(e,n).flags|=128),2!==(n=ah(e,n))){if(kl&&!i)return e.errorRecoveryDisabledLanes|=t,Il|=t,4;e=El,El=r,null!==e&&Yl(e)}return n}function Yl(e){null===El?El=e:El.push.apply(El,e)}function $l(e,t){for(t&=~Tl,t&=~Il,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ft(t),r=1<<n;e[n]=-1,t&=~r}}function Xl(e){if(0!==(6&fl))throw Error(o(327));ph();var t=gt(e,0);if(0===(1&t))return Kl(e,rt()),null;var n=ah(e,t);if(0!==e.tag&&2===n){var r=t,i=wt(e,r);0!==i&&(t=i,n=Ql(e,r,i))}if(1===n)throw n=bl,eh(e,0),$l(e,t),Kl(e,rt()),n;return 6===n?($l(e,t),Kl(e,rt()),null):(e.finishedWork=e.current.alternate,e.finishedLanes=t,fh(e,El,Rl),Kl(e,rt()),null)}function Jl(e,t){var n=fl;fl|=1;try{return e(t)}finally{0===(fl=n)&&(Nl=rt()+500,Na&&Pa())}}function Zl(e){null!==Ll&&0===Ll.tag&&0===(6&fl)&&ph();var t=fl;fl|=1;var n=hl.transition,r=Tt;try{if(hl.transition=null,Tt=1,e)return e()}finally{Tt=r,hl.transition=n,0===(6&(fl=t))&&Pa()}}function eh(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,Gi(n)),null!==pl)for(n=0===yl?pl.return:pl;null!==n;)fc(n.alternate,n),n=n.return;return dl=e,pl=e=Sh(e.current,null),vl=wl=t,yl=0,gl=ml=null,kl=!1,_l=0,bl=null,Tl=Il=xl=0,El=Sl=null,xo(),e}function th(e,t){if(fo(),_u.current=ws,Eu){for(e=Iu.memoizedState;null!==e;){var n=e.queue;null!==n&&(n.pending=null),e=e.next}Eu=!1}if(xu=0,Su=Tu=Iu=null,Cu=!1,Au=Ru=0,ll.current=null,t===yu){if(null===wu)throw Error(o(459));t=wu,wu=null,e=mu,mu=null,gl=e,yl=function(){if((130023424&vl)===vl)return!0;if((4194240&vl)===vl){var e=nu.current;return!(null!==e&&13===e.tag&&!ru(e.alternate))}return!1}()?2:3}else gl=null,yl=null!==t&&"object"===typeof t&&"function"===typeof t.then?4:1;ml=t,null===pl&&(_l=1,bl=t)}function nh(e){return e=e.getRootNode(),_i=Ni(e),bi=wi.current,wi.current=xi,e=sl.current,sl.current=ws,null===e?ws:e}function rh(){var e=cl.current;return cl.current=al,e}function ih(){_l=4,null===dl||0===(268435455&xl)&&0===(268435455&Il)||$l(dl,vl)}function ah(e,t){var n=fl;fl|=2;var r=nh(e.containerInfo),i=rh();for(dl===e&&vl===t||(Rl=null,eh(e,t));;)try{if(0!==yl&&null!==pl){var a=ml;yl=0,ml=null,lh(t=pl,a)}oh();break}catch(u){th(e,u)}if(fo(),fl=n,wi.current=bi,bi=null,sl.current=r,cl.current=i,null!==pl)throw Error(o(261));return dl=null,vl=0,xo(),_l}function oh(){for(;null!==pl;)sh(pl)}function uh(){for(;null!==pl&&!tt();)sh(pl)}function sh(e){var t=il(e.alternate,e,wl);e.memoizedProps=e.pendingProps,null===t?hh(e):pl=t,ll.current=null}function ch(e){var t=e.alternate;fc(t,e),e=pl=Eh(e,wl),t=il(t,e,wl),gl=null,e.memoizedProps=e.pendingProps,null===t?hh(e):pl=t,ll.current=null}function lh(e,t){gl=null;var n=e.return;if(null===n||null===dl)_l=1,bl=t,pl=null;else{try{e:{var r=dl,i=t;if(t=vl,e.flags|=16384,null!==i&&"object"===typeof i&&"function"===typeof i.then){var a=i,u=e.tag;if(0===(1&e.mode)&&(0===u||11===u||15===u)){var s=e.alternate;s?(e.updateQueue=s.updateQueue,e.memoizedState=s.memoizedState,e.lanes=s.lanes):(e.updateQueue=null,e.memoizedState=null)}var c=nu.current;if(null!==c){switch(c.tag){case 13:c.flags&=-129,Ns(c,n,e,0,t);var l=c.updateQueue;null===l?c.updateQueue=new Set([a]):l.add(a);break;case 22:if(1&c.mode){c.flags|=32768;var h=c.updateQueue;if(null===h){var f={transitions:null,markerInstances:null,wakeables:new Set([a])};c.updateQueue=f}else{var d=h.wakeables;null===d?h.wakeables=new Set([a]):d.add(a)}break}default:throw Error(o(435,c.tag))}1&c.mode&&mh(r,a,t);break e}if(1===r.tag){mh(r,a,t),ih();break e}i=Error(o(426))}else if(Qa&&1&e.mode&&null!==(a=nu.current)){0===(32768&a.flags)&&(a.flags|=128),Ns(a,n,e,0,t),ao(Is(i,e));break e}r=i=Is(i,e),4!==_l&&(_l=2),null===Sl?Sl=[r]:Sl.push(r),r=n;do{switch(r.tag){case 3:var p=i;r.flags|=32768,t&=-t,r.lanes|=t;var v=Es(0,p,t);Oo(r,v);break e;case 1:u=i;var y=r.type,m=r.stateNode;if(0===(64&r.flags)&&("function"===typeof y.getDerivedStateFromError||null!==m&&"function"===typeof m.componentDidCatch&&(null===Dl||!Dl.has(m)))){r.flags|=32768,v=t&-t,r.lanes|=v,Oo(r,p=Cs(r,u,v));break e}}r=r.return}while(null!==r)}}catch(g){throw pl=n,g}hh(e)}}function hh(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(16384&t.flags)){if(null!==(n=lc(n,t,wl)))return void(pl=n)}else{if(null!==(n=hc(n,t)))return n.flags&=16383,void(pl=n);if(null===e)return _l=6,void(pl=null);e.flags|=16384,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(pl=t);pl=t=e}while(null!==t);0===_l&&(_l=5)}function fh(e,t,n){var r=Tt,i=hl.transition;try{hl.transition=null,Tt=1,function(e,t,n,r){do{ph()}while(null!==Ll);if(0!==(6&fl))throw Error(o(327));var i=e.finishedWork,a=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var u=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,e.errorRecoveryDisabledLanes&=t,t=e.entanglements;var r=e.eventTimes,i=e.expirationTimes;for(e=e.hiddenUpdates;0<n;){var a=31-ft(n),o=1<<a;t[a]=0,r[a]=-1,i[a]=-1;var u=e[a];if(null!==u)for(e[a]=null,a=0;a<u.length;a++){var s=u[a];null!==s&&(s.lane&=-1073741825)}n&=~o}}(e,u|=bo),e===dl&&(pl=dl=null,vl=0),0===(5128&i.subtreeFlags)&&0===(5128&i.flags)||Ol||(Ol=!0,Fl=u,Ul=n,bh(ut,(function(){return ph(),null}))),n=0!==(7998&i.flags),0!==(7998&i.subtreeFlags)||n){n=hl.transition,hl.transition=null;var s=Tt;Tt=1;var c=fl;fl|=4,ll.current=null,function(e,t){if(Bi=$t,kr(e=gr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var u=0,s=-1,c=-1,l=0,h=0,f=e,d=null;t:for(;;){for(var p;f!==n||0!==i&&3!==f.nodeType||(s=u+i),f!==a||0!==r&&3!==f.nodeType||(c=u+r),3===f.nodeType&&(u+=f.nodeValue.length),null!==(p=f.firstChild);)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++l===i&&(s=u),d===a&&++h===r&&(c=u),null!==(p=f.nextSibling))break;d=(f=d).parentNode}f=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wi={focusedElem:e,selectionRange:n},$t=!1,yc=t;null!==yc;)if(e=(t=yc).child,0!==(516&t.subtreeFlags)&&null!==e)e.return=t,yc=e;else for(;null!==yc;){t=yc;try{var v=t.alternate,y=t.flags;switch(t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(512&y)&&null!==v){var m=v.memoizedProps,g=v.memoizedState,k=t.stateNode,w=k.getSnapshotBeforeUpdate(t.elementType===t.type?m:uo(t.type,m),g);k.__reactInternalSnapshotBeforeUpdate=w}break;case 3:if(0!==(512&y)){var _=t.stateNode.containerInfo,b=_.nodeType;if(9===b)Ei(_),Ji(_);else if(1===b)switch(_.nodeName){case"HEAD":Ei(_);case"HTML":case"BODY":Ji(_);break;default:_.textContent=""}}break;default:if(0!==(512&y))throw Error(o(163))}}catch(x){yh(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,yc=e;break}yc=t.return}v=wc,wc=!1}(e,i),Vc(i,e),wr(Wi),$t=!!Bi,Wi=Bi=null,e.current=i,Sc(e,i.alternate,i),nt(),fl=c,Tt=s,hl.transition=n}else e.current=i;if(Ol?(Ol=!1,Ll=e,Ml=a):dh(e,u),0===(u=e.pendingLanes)&&(Dl=null),function(e){if(ht&&"function"===typeof ht.onCommitFiberRoot)try{ht.onCommitFiberRoot(lt,e,void 0,64===(64&e.current.flags))}catch(t){}}(i.stateNode),Kl(e,rt()),null!==t)for(r=e.onRecoverableError,i=0;i<t.length;i++)u={digest:(a=t[i]).digest,componentStack:a.stack},r(a.value,u);if(Al)throw Al=!1,e=Pl,Pl=null,e;0!==(1&Ml)&&0!==e.tag&&ph(),0!==(1&(u=e.pendingLanes))?e===ql?Vl++:(Vl=0,ql=e):Vl=0,Pa()}(e,t,n,r)}finally{hl.transition=i,Tt=r}return null}function dh(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,vu(t)))}function ph(){if(null!==Ll){var e=Ll,t=Fl;Fl=0;var n=St(Ml),r=16>n?16:n;n=hl.transition;var i=Tt;try{if(hl.transition=null,Tt=r,null===Ll)var a=!1;else{r=Ul,Ul=null;var u=Ll,s=Ml;if(Ll=null,Ml=0,0!==(6&fl))throw Error(o(331));var c=fl;if(fl|=4,el(u.current),Yc(u,u.current,s,r),fl=c,Pa(),ht&&"function"===typeof ht.onPostCommitFiberRoot)try{ht.onPostCommitFiberRoot(lt,u)}catch(l){}a=!0}return a}finally{Tt=i,hl.transition=n,dh(e,t)}}return!1}function vh(e,t,n){e=Po(e,t=Es(0,t=Is(n,t),1),1),t=Bl(),null!==e&&(xt(e,1,t),Kl(e,t))}function yh(e,t,n){if(3===e.tag)vh(e,e,n);else for(;null!==t;){if(3===t.tag){vh(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Dl||!Dl.has(r))){t=Po(t,e=Cs(t,e=Is(n,e),1),1),e=Bl(),null!==t&&(xt(t,1,e),Kl(t,e));break}}t=t.return}}function mh(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ul;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(kl=!0,i.add(n),e=gh.bind(null,e,t,n),t.then(e,e))}function gh(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Bl(),e.pingedLanes|=e.suspendedLanes&n,dl===e&&(vl&n)===n&&(4===_l||3===_l&&(130023424&vl)===vl&&500>rt()-Cl?eh(e,0):Tl|=n),Kl(e,t)}function kh(e,t){0===t&&(0===(1&e.mode)?t=1:(t=yt,0===(130023424&(yt<<=1))&&(yt=4194304)));var n=Bl();null!==(e=To(e,t))&&(xt(e,t,n),Kl(e,n))}function wh(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),kh(e,n)}function _h(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(o(314))}null!==r&&r.delete(t),kh(e,n)}function bh(e,t){return Ze(e,t)}function xh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ih(e,t,n,r){return new xh(e,t,n,r)}function Th(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Sh(e,t){var n=e.alternate;return null===n?((n=Ih(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=7340032&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Eh(e,t){e.flags&=7340034;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Ch(e,t,n,r,i,a){var u=2;if(r=e,"function"===typeof e)Th(e)&&(u=1);else if("string"===typeof e)u=function(e,t,n){switch(e){case"base":case"meta":return!0;case"title":return"http://www.w3.org/2000/svg"!==n;case"link":if(e=t.onError,t.onLoad||e)break;return"stylesheet"===t.rel?(e=t.precedence,n=t.disabled,"string"===typeof t.href&&"string"===typeof e&&null==n):(e=t.rel,"string"===typeof t.href&&"string"===typeof e);case"script":e=t.src,n=t.onLoad;var r=t.onError;return t.async&&"string"===typeof e&&!n&&!r}return!1}(e,n,di.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case I:return Nh(n.children,i,a,t);case T:u=8,0!==(1&(i|=8))&&(i|=16);break;case S:return(e=Ih(12,n,t,2|i)).elementType=S,e.lanes=a,e;case A:return(e=Ih(13,n,t,i)).elementType=A,e.lanes=a,e;case P:return(e=Ih(19,n,t,i)).elementType=P,e.lanes=a,e;case M:return Rh(n,i,a,t);case F:case L:case U:return(e=Ih(24,n,t,i)).elementType=U,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case C:u=9;break e;case R:u=11;break e;case D:u=14;break e;case O:u=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ih(u,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Nh(e,t,n,r){return(e=Ih(7,e,r,t)).lanes=n,e}function Rh(e,t,n,r){(e=Ih(22,e,r,t)).elementType=M,e.lanes=n;var i={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){return function(e){var t=e._current;if(null===t)throw Error(o(456));0!==(6&fl)?Yi((function(){e._visibility|=2,zc(t),nl(t)})):(e._visibility|=2,zc(t),nl(t))}(i)}};return e.stateNode=i,e}function Ah(e,t,n){return(e=Ih(6,e,null,t)).lanes=n,e}function Ph(e,t,n){return(t=Ih(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dh(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bt(0),this.expirationTimes=bt(-1),this.entangledLanes=this.errorRecoveryDisabledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bt(0),this.hiddenUpdates=bt(null),this.identifierPrefix=r,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.mutableSourceEagerHydrationData=null,this.incompleteTransitions=new Map}function Oh(e,t,n,r,i,a,o,u,s){return e=new Dh(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=24)):t=0,a=Ih(3,null,null,t),e.current=a,a.stateNode=e,(t=pu()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:r,isDehydrated:n,cache:t},No(a),e}function Lh(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Mh(e){if(!e)return ma;e:{if(Qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ba(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(ba(n))return Ta(e,n,t)}return t}function Fh(e,t,n,r,i,a,o,u,s){return(e=Oh(n,r,!0,e,0,a,0,u,s)).context=Mh(null),n=e.current,(a=Ao(r=Bl(),i=Wl(n))).callback=void 0!==t&&null!==t?t:null,Po(n,a,i),e.current.lanes=i,xt(e,i,r),Kl(e,r),e}function Uh(e,t,n,r){var i=t.current,a=Bl(),o=Wl(i);return n=Mh(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ao(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Po(i,t,o))&&(Hl(e,i,o,a),Do(e,i,o)),o}function Vh(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function jh(e,t){qh(e,t),(e=e.alternate)&&qh(e,t)}il=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ka.current)Ls=!0;else{if(0===(e.lanes&n)&&0===(64&t.flags))return Ls=!1,function(e,t,n){switch(t.tag){case 3:Ks(t),po(0,du,e.memoizedState.cache),io();break;case 26:case 27:case 5:gi(t);break;case 1:ba(t.type)&&Sa(t);break;case 4:yi(t,t.stateNode.containerInfo);break;case 10:po(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(fi(nu,t),t.flags|=64,null):0!==(n&t.child.childLanes)?Zs(e,t,n):(fi(nu,t),null!==(e=oc(e,t,n))?e.sibling:null);fi(nu,t);break;case 19:if(r=0!==(n&t.childLanes),0!==(64&e.flags)){if(r)return ic(e,t,n);t.flags|=64}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),fi(ou,ou.current),r)break;return null;case 22:case 23:return t.lanes=0,qs(e,t,n);case 24:po(0,du,e.memoizedState.cache)}return oc(e,t,n)}(e,t,n);Ls=0!==(65536&e.flags)}else Ls=!1,Qa&&0!==(524288&t.flags)&&Ba(t,Ma,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ac(e,t),e=t.pendingProps;var i=_a(t,ga.current);go(t,n),i=Lu(null,t,r,e,i,n);var a=Mu();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ba(r)?(a=!0,Sa(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,No(t),i.updater=qo,t.stateNode=i,i._reactInternals=t,Wo(t,r,e,n),t=Hs(null,t,r,!0,a,n)):(t.tag=0,Qa&&a&&Wa(t),Ms(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ac(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Th(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===R)return 11;if(e===D)return 14}return 2}(r),e=uo(r,e),i){case 0:t=Bs(null,t,r,e,n);break e;case 1:t=Ws(null,t,r,e,n);break e;case 11:t=Fs(null,t,r,e,n);break e;case 14:t=Us(null,t,r,uo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Bs(e,t,r,i=t.elementType===r?i:uo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ws(e,t,r,i=t.elementType===r?i:uo(r,i),n);case 3:e:{if(Ks(t),null===e)throw Error(o(387));i=t.pendingProps,r=(a=t.memoizedState).element,Ro(e,t),Lo(t,i,null,n);var u=t.memoizedState;if(i=u.cache,po(0,du,i),i!==a.cache&&mo(t,du,n),i=u.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:u.cache},t.updateQueue.baseState=a,t.memoizedState=a,128&t.flags){t=Gs(e,t,i,n,r=Is(Error(o(423)),t));break e}if(i!==r){t=Gs(e,t,i,n,r=Is(Error(o(424)),t));break e}for(Ga=Zi(t.stateNode.containerInfo.firstChild),Ka=t,Qa=!0,Ya=null,n=$o(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|2048,n=n.sibling}else{if(io(),i===r){t=oc(e,t,n);break e}Ms(e,t,i,n)}t=t.child}return t;case 26:return gi(t),zs(e,t),t.memoizedState=function(e,t){var n=Ti();if(!n)throw Error(o(446));switch(e){case"base":var r=ya(n=Ni(n)).head,i=t.target,a=t.href;return a="base"+("string"===typeof a?'[href="'+zi(a)+'"]':":not([href])"),a+="string"===typeof i?'[target="'+zi(i)+'"]':":not([target])",(i=r.get(a))||(i={type:"base",matcher:a,props:B({},t),count:0,instance:null,root:n},r.set(a,i)),i;case"meta":var u=t.charSet,s=t.content,c=t.httpEquiv,l=t.name,h=t.itemProp,f=t.property,d=ya(n=Ni(n));return e=d.head,d=d.lastStructuredMeta,"string"===typeof u?r="meta[charset]":"string"===typeof s&&("string"===typeof c?r='meta[http-equiv="'+zi(c)+'"][content="'+zi(s)+'"]':"string"===typeof f?(i=f,r='meta[property="'+zi(f)+'"][content="'+zi(s)+'"]',a=f.split(":").slice(0,-1).join(":"),(a=d.get(a))&&(r=a.matcher+r)):"string"===typeof l?r='meta[name="'+zi(l)+'"][content="'+zi(s)+'"]':"string"===typeof h&&(r='meta[itemprop="'+zi(h)+'"][content="'+zi(s)+'"]')),r?((u=e.get(r))||(u={type:"meta",matcher:r,property:i,parentResource:a,props:B({},t),count:0,instance:null,root:n},e.set(r,u)),"string"===typeof u.property&&d.set(u.property,u),u):null;case"title":return a=t.children,Array.isArray(a)&&1===a.length&&(a=a[0]),"string"===typeof a||"number"===typeof a?(i="title:"+a,(e=(r=ya(n=Ni(n)).head).get(i))||((t=B({},t)).children=a,e={type:"title",props:t,count:0,instance:null,root:n},r.set(i,e)),e):null;case"link":switch(r=t.rel){case"stylesheet":return i=ya(n).styles,a=t.precedence,"string"===typeof(e=t.href)&&"string"===typeof a?((r=i.get(e))||((r=B({},t))["data-precedence"]=t.precedence,r.precedence=null,!1===(t=r=Di(i,n,e,a,r)).loaded&&null===t.hint&&(n=t.href,i={rel:"preload",as:"style",href:(i=t.props).href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},t.hint=Li(Ni(t.root),n,i))),r):null;case"preload":return"string"===typeof(r=t.href)?((i=Ii.get(r))||(t=B({},t),i=Li(Ni(n),r,t)),i):null;default:return i=t.href,a=t.sizes,e=t.media,"string"===typeof r&&"string"===typeof i?(r="rel:"+r+"::href:"+i+"::sizes:"+("string"===typeof a?a:"")+"::media:"+("string"===typeof e?e:""),(a=(i=ya(n=Ni(n)).head).get(r))||(a={type:"link",props:B({},t),count:0,instance:null,root:n},i.set(r,a)),a):null}case"script":return r=ya(n).scripts,i=t.src,t.async&&"string"===typeof i?((a=r.get(i))||(a=Oi(r,n,i,t=B({},t))),a):null;default:throw Error(o(444,e))}}(t.type,t.pendingProps),null;case 27:return gi(t),null===e&&Qa&&(r=t.stateNode=ta(t.type,t.pendingProps,vi.current),Ka=t,Ga=Zi(r.firstChild)),r=t.pendingProps.children,null!==e||Qa?Ms(e,t,r,n):t.child=Yo(t,null,r,n),zs(e,t),t.child;case 5:return gi(t),null===e&&Za(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,u=i.children,Hi(r,i)?u=null:null!==a&&Hi(r,a)&&(t.flags|=16),zs(e,t),Ms(e,t,u,n),t.child;case 6:return null===e&&Za(t),null;case 13:return Zs(e,t,n);case 4:return yi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Yo(t,null,r,n):Ms(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Fs(e,t,r,i=t.elementType===r?i:uo(r,i),n);case 7:return Ms(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ms(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,po(0,r,u=i.value),null!==a)if(dr(a.value,u)){if(a.children===i.children&&!ka.current){t=oc(e,t,n);break e}}else mo(t,r,n);Ms(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,go(t,n),r=r(i=ko(i)),t.flags|=1,Ms(e,t,r,n),t.child;case 14:return i=uo(r=t.type,t.pendingProps),Us(e,t,r,i=uo(r.type,i),n);case 15:return Vs(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:uo(r,i),ac(e,t),t.tag=1,ba(r)?(e=!0,Sa(t)):e=!1,go(t,n),zo(t,r,i),Wo(t,r,i,n),Hs(null,t,r,!0,e,n);case 19:return ic(e,t,n);case 22:return qs(e,t,n);case 24:return go(t,n),r=ko(du),null===e?(null===(i=As())&&(i=dl,a=pu(),i.pooledCache=a,a.refCount++,null!==a&&(i.pooledCacheLanes|=n),i=a),t.memoizedState={parent:r,cache:i},No(t),po(0,du,i)):(0!==(e.lanes&n)&&(Ro(e,t),Lo(t,null,null,n)),i=e.memoizedState,a=t.memoizedState,i.parent!==r?(i={parent:r,cache:r},t.memoizedState=i,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=i),po(0,du,r)):(r=a.cache,po(0,du,r),r!==i.cache&&mo(t,du,n))),Ms(e,t,t.pendingProps.children,n),t.child}throw Error(o(156,t.tag))};var zh=a.Dispatcher,Bh="function"===typeof reportError?reportError:function(e){console.error(e)};function Wh(e){this._internalRoot=e}function Hh(e){this._internalRoot=e}function Kh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Gh(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qh(){}function Yh(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Vh(o);u.call(e)}}Uh(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Vh(o);a.call(e)}}var o=Fh(t,r,e,0,null,!1,0,"",Qh);return e._reactRootContainer=o,e[aa]=o.current,Qr(8===e.nodeType?e.parentNode:e),Zl(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Vh(s);u.call(e)}}var s=Oh(e,0,!1,null,0,!1,0,"",Qh);return e._reactRootContainer=s,e[aa]=s.current,Qr(8===e.nodeType?e.parentNode:e),Zl((function(){Uh(t,s,n,r)})),s}(n,t,e,i,r);return Vh(o)}Hh.prototype.render=Wh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Uh(e,t,null,null)},Hh.prototype.unmount=Wh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zl((function(){Uh(null,e,null,null)})),t[aa]=null}},Hh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Rt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vt.length&&0!==t&&t<Vt[n].priority;n++);Vt.splice(n,0,e),0===n&&Bt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=mt(t.pendingLanes);0!==n&&(It(t,1|n),Kl(t,rt()),0===(6&fl)&&(Nl=rt()+500,Pa()))}break;case 13:Zl((function(){var t=To(e,1);if(null!==t){var n=Bl();Hl(t,e,1,n)}})),jh(e,1)}},Ct=function(e){if(13===e.tag){var t=To(e,134217728);if(null!==t)Hl(t,e,134217728,Bl());jh(e,134217728)}},Nt=function(e){if(13===e.tag){var t=Wl(e),n=To(e,t);if(null!==n)Hl(n,e,t,Bl());jh(e,t)}},Rt=function(){return Tt},At=function(e,t){var n=Tt;try{return Tt=e,t()}finally{Tt=n}},Ce=function(e,t,n){switch(t){case"input":if(ie(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=va(r);if(!i)throw Error(o(90));Z(r),ie(r,i)}}}break;case"textarea":he(e,n);break;case"select":null!=(t=n.value)&&se(e,!!n.multiple,t,!1)}},Oe=Jl,Le=Zl,a.Events=[da,pa,va,Pe,De,Jl];var $h={findFiberByHostInstance:fa,bundleType:0,version:"18.3.0-next-e1dd0a2f5-20221115",rendererPackageName:"react-dom"},Xh={bundleType:$h.bundleType,version:$h.version,rendererPackageName:$h.rendererPackageName,rendererConfig:$h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:$h.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.0-next-e1dd0a2f5-20221115"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{lt=Jh.inject(Xh),ht=Jh}catch(ye){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kh(t))throw Error(o(200));return Lh(e,t,null,n)},t.createRoot=function(e,t){if(!Kh(e))throw Error(o(299));var n=!1,r="",i=Bh;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Oh(e,1,!1,null,0,n,0,r,i),e[aa]=t.current,zh.current=xi,Qr(8===e.nodeType?e.parentNode:e),new Wh(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Xe(t))?null:e.stateNode},t.flushSync=function(e){return Zl(e)},t.hydrate=function(e,t,n){if(!Gh(t))throw Error(o(200));return Yh(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Kh(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",u=Bh;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=Fh(t,null,e,1,null!=n?n:null,i,0,a,u),e[aa]=t.current,zh.current=xi,Qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Hh(t)},t.preinit=function(){var e=a.Dispatcher.current;e&&e.preinit.apply(this,arguments)},t.preload=function(){var e=a.Dispatcher.current;e&&e.preload.apply(this,arguments)},t.render=function(e,t,n){if(!Gh(t))throw Error(o(200));return Yh(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Gh(e))throw Error(o(40));return!!e._reactRootContainer&&(Zl((function(){Yh(null,null,e,!1,(function(){e._reactRootContainer=null,e[aa]=null}))})),!0)},t.unstable_batchedUpdates=Jl,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Gh(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Yh(e,t,n,!1,r)},t.version="18.3.0-next-e1dd0a2f5-20221115"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.default_value"),v=Symbol.iterator;var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function k(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||y}function w(){}function _(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||y}k.prototype.isReactComponent={},k.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},k.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=k.prototype;var b=_.prototype=new w;b.constructor=_,m(b,k.prototype),b.isPureReactComponent=!0;var x=Array.isArray,I=Object.prototype.hasOwnProperty,T={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,i)&&!S.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:T.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var N=/\/+/g;function R(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+R(s,0):a,x(o)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(C(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(N,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",x(e))for(var c=0;c<e.length;c++){var l=a+R(u=e[c],c);s+=A(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=v&&e[v]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=A(u=u.value,t,i,l=a+R(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function P(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null};function L(){return new WeakMap}var M={current:null},F={transition:null},U={ReactCurrentDispatcher:M,ReactCurrentCache:O,ReactCurrentBatchConfig:F,ReactCurrentOwner:T,ContextRegistry:{}},V=U.ContextRegistry;t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=k,t.Fragment=i,t.Profiler=o,t.PureComponent=_,t.StrictMode=a,t.Suspense=h,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=U,t.cache=function(e){return function(){var t=O.current;if(!t)return e.apply(null,arguments);var n=t.getCacheForType(L);void 0===(t=n.get(e))&&(t={s:0,v:void 0,o:null,p:null},n.set(e,t)),n=0;for(var r=arguments.length;n<r;n++){var i=arguments[n];if("function"===typeof i||"object"===typeof i&&null!==i){var a=t.o;null===a&&(t.o=a=new WeakMap),void 0===(t=a.get(i))&&(t={s:0,v:void 0,o:null,p:null},a.set(i,t))}else null===(a=t.p)&&(t.p=a=new Map),void 0===(t=a.get(i))&&(t={s:0,v:void 0,o:null,p:null},a.set(i,t))}if(1===t.s)return t.v;if(2===t.s)throw t.v;try{var o=e.apply(null,arguments);return(n=t).s=1,n.v=o}catch(u){throw(o=t).s=2,o.v=u,u}}},t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=T.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)I.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.createServerContext=function(e,t){var n=!0;if(!V[e]){n=!1;var r={$$typeof:c,_currentValue:t,_currentValue2:t,_defaultValue:t,_threadCount:0,Provider:null,Consumer:null,_globalName:e};r.Provider={$$typeof:u,_context:r},V[e]=r}if((r=V[e])._defaultValue===p)r._defaultValue=t,r._currentValue===p&&(r._currentValue=t),r._currentValue2===p&&(r._currentValue2=t);else if(n)throw Error("ServerContext: "+e+" already defined");return r},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.unstable_useCacheRefresh=function(){return M.current.useCacheRefresh()},t.use=function(e){return M.current.use(e)},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.0-next-e1dd0a2f5-20221115"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],h=1,f=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function _(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,D(b);else{var t=r(l);null!==t&&O(_,t.startTime-e)}}function b(e,n){v=!1,y&&(y=!1,g(S),S=-1),p=!0;var a=d;try{e:{for(w(n),f=r(c);null!==f&&(!(f.expirationTime>n)||e&&!N());){var o=f.callback;if("function"===typeof o){f.callback=null,d=f.priorityLevel;var u=o(f.expirationTime<=n);if(n=t.unstable_now(),"function"===typeof u){f.callback=u,w(n);var s=!0;break e}f===r(c)&&i(c),w(n)}else i(c);f=r(c)}if(null!==f)s=!0;else{var h=r(l);null!==h&&O(_,h.startTime-n),s=!1}}return s}finally{f=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,T=null,S=-1,E=5,C=-1;function N(){return!(t.unstable_now()-C<E)}function R(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?x():(I=!1,T=null)}}else I=!1}if("function"===typeof k)x=function(){k(R)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,P=A.port2;A.port1.onmessage=R,x=function(){P.postMessage(null)}}else x=function(){m(R,0)};function D(e){T=e,I||(I=!0,x())}function O(e,n){S=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(b))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(S),S=-1):y=!0,O(_,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(b))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return J},SDK_VERSION:function(){return kt},_DEFAULT_ENTRY_NAME:function(){return ot},_addComponent:function(){return lt},_addOrOverwriteComponent:function(){return ht},_apps:function(){return st},_clearComponents:function(){return vt},_components:function(){return ct},_getProvider:function(){return dt},_registerComponent:function(){return ft},_removeServiceInstance:function(){return pt},deleteApp:function(){return xt},getApp:function(){return _t},getApps:function(){return bt},initializeApp:function(){return wt},onLog:function(){return St},registerVersion:function(){return Tt},setLogLevel:function(){return Et}});var t=n(791),r=n(250);function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function o(e,t){if(e){if("string"===typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}function u(e){return function(e){if(Array.isArray(e))return i(e)}(e)||a(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e){if(Array.isArray(e))return e}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return s(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||o(e,t)||c()}var h=n(892);function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function _(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function x(e,t){if(t&&("object"===b(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function I(e){var t=_();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function T(e,t,n){return T=_()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},T.apply(null,arguments)}function S(e){var t="function"===typeof Map?new Map:void 0;return S=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return T(e,arguments,w(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},S(e)}var E=!1,C=!1,N="${JSCORE_VERSION}",R=function(e,t){if(!e)throw A(t)},A=function(e){return new Error("Firebase Database ("+N+") INTERNAL ASSERT FAILED: "+e)},P=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,h=(3&a)<<4|u>>4,f=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(P(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var h=u<<6&192|s;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},O=function(e){var t=P(e);return D.encodeByteArray(t,!0)},L=function(e){return O(e).replace(/\./g,"")},M=function(e){try{return D.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function F(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=F(e[n],t[n]));return e}function U(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function V(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(U())}function q(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function j(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function z(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function B(){var e=U();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function W(){return!0===E||!0===C}function H(){return"object"===typeof indexedDB}var K=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},G=function(){try{return K()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&M(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Q=function(e){var t=function(e){var t,n;return null===(n=null===(t=G())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},Y=function(){var e;return null===(e=G())||void 0===e?void 0:e.config},$=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return v(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function X(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[L(JSON.stringify({alg:"none",type:"JWT"})),L(JSON.stringify(a)),""].join(".")}var J=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(m(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(a),Z.prototype.create),a}return v(n)}(S(Error)),Z=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return v(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?ee(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new J(n,a,t);return o}}]),e}();function ee(e,t){return e.replace(te,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var te=/\{\$([^}]+)}/g;function ne(e){return JSON.parse(e)}function re(e){return JSON.stringify(e)}var ie=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=ne(M(a[0])||""),n=ne(M(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function ae(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function oe(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function ue(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function se(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function ce(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(le(u)&&le(s)){if(!ce(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function le(e){return null!==e&&"object"===typeof e}function he(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function fe(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function de(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var pe=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return v(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ve(e,t){var n=new ye(e,t);return n.subscribe.bind(n)}var ye=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return v(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=y(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=me),void 0===r.error&&(r.error=me),void 0===r.complete&&(r.complete=me);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function me(){}function ge(e,t){return"".concat(e," failed: ").concat(t," argument ")}var ke=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function we(e){return e&&e._delegate?e._delegate:e}function _e(){_e=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),u=new S(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var h={};function f(){}function d(){}function p(){}var v={};s(v,a,(function(){return this}));var y=Object.getPrototypeOf,m=y&&y(y(E([])));m&&m!==t&&n.call(m,a)&&(v=m);var g=p.prototype=f.prototype=Object.create(v);function k(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==b(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===h)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method))return h;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=l(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,h;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,h):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,h)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function E(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:d,configurable:!0}),d.displayName=s(p,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,s(e,u,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},k(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},k(g),s(g,u,"Generator"),s(g,a,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:E(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}function be(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(sS){return void n(sS)}u.done?t(s):Promise.resolve(s).then(r,i)}function xe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){be(a,r,i,o,u,"next",e)}function u(e){be(a,r,i,o,u,"throw",e)}o(void 0)}))}}var Ie=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return v(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Te="[DEFAULT]",Se=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return v(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new $;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Te})}catch(s){}var t,n=y(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(u(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),u(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=y(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1],h=this.normalizeInstanceIdentifier(s);r===h&&c.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(dy){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Te?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(dy){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te;return this.component?this.component.multipleInstances?e:Te:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var Ee,Ce,Ne=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return v(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Se(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Re=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ce||(Ce={}));var Ae={debug:Ce.DEBUG,verbose:Ce.VERBOSE,info:Ce.INFO,warn:Ce.WARN,error:Ce.ERROR,silent:Ce.SILENT},Pe=Ce.INFO,De=(f(Ee={},Ce.DEBUG,"log"),f(Ee,Ce.VERBOSE,"log"),f(Ee,Ce.INFO,"info"),f(Ee,Ce.WARN,"warn"),f(Ee,Ce.ERROR,"error"),Ee),Oe=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=De[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},Le=function(){function e(t){d(this,e),this.name=t,this._logLevel=Pe,this._logHandler=Oe,this._userLogHandler=null,Re.push(this)}return v(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Ce))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Ae[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.DEBUG].concat(t)),this._logHandler.apply(this,[this,Ce.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Ce.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.INFO].concat(t)),this._logHandler.apply(this,[this,Ce.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.WARN].concat(t)),this._logHandler.apply(this,[this,Ce.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Ce.ERROR].concat(t)),this._logHandler.apply(this,[this,Ce.ERROR].concat(t))}}]),e}();function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ue,Ve;var qe=new WeakMap,je=new WeakMap,ze=new WeakMap,Be=new WeakMap,We=new WeakMap;var He={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return je.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ze.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Qe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Ke(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ve||(Ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ye(this),n),Qe(qe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qe(e.apply(Ye(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ye(this),t].concat(r));return ze.set(a,t.sort?t.sort():[t]),Qe(a)}}function Ge(e){return"function"===typeof e?Ke(e):(e instanceof IDBTransaction&&function(e){if(!je.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));je.set(e,t)}}(e),t=e,(Ue||(Ue=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,He):e);var t}function Qe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Qe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&qe.set(t,e)})).catch((function(){})),We.set(t,e),t}(e);if(Be.has(e))return Be.get(e);var t=Ge(e);return t!==e&&(Be.set(e,t),We.set(t,e)),t}var Ye=function(e){return We.get(e)};var $e,Xe,Je=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],et=new Map;function tt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(et.get(t))return et.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ze.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Je.includes(n))){var a=function(){var e=xe(_e().mark((function e(t){var a,o,u,s,c,l,h=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=h[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return et.set(t,a),a}}}He=function(e){return Fe(Fe({},e),{},{get:function(t,n,r){return tt(t,n)||e.get(t,n,r)},has:function(t,n){return!!tt(t,n)||e.has(t,n)}})}(He);var nt=function(){function e(t){d(this,e),this.container=t}return v(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var rt="@firebase/app",it="0.8.4",at=new Le("@firebase/app"),ot="[DEFAULT]",ut=(f($e={},rt,"fire-core"),f($e,"@firebase/app-compat","fire-core-compat"),f($e,"@firebase/analytics","fire-analytics"),f($e,"@firebase/analytics-compat","fire-analytics-compat"),f($e,"@firebase/app-check","fire-app-check"),f($e,"@firebase/app-check-compat","fire-app-check-compat"),f($e,"@firebase/auth","fire-auth"),f($e,"@firebase/auth-compat","fire-auth-compat"),f($e,"@firebase/database","fire-rtdb"),f($e,"@firebase/database-compat","fire-rtdb-compat"),f($e,"@firebase/functions","fire-fn"),f($e,"@firebase/functions-compat","fire-fn-compat"),f($e,"@firebase/installations","fire-iid"),f($e,"@firebase/installations-compat","fire-iid-compat"),f($e,"@firebase/messaging","fire-fcm"),f($e,"@firebase/messaging-compat","fire-fcm-compat"),f($e,"@firebase/performance","fire-perf"),f($e,"@firebase/performance-compat","fire-perf-compat"),f($e,"@firebase/remote-config","fire-rc"),f($e,"@firebase/remote-config-compat","fire-rc-compat"),f($e,"@firebase/storage","fire-gcs"),f($e,"@firebase/storage-compat","fire-gcs-compat"),f($e,"@firebase/firestore","fire-fst"),f($e,"@firebase/firestore-compat","fire-fst-compat"),f($e,"fire-js","fire-js"),f($e,"firebase","fire-js-all"),$e),st=new Map,ct=new Map;function lt(e,t){try{e.container.addComponent(t)}catch(n){at.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function ht(e,t){e.container.addOrOverwriteComponent(t)}function ft(e){var t=e.name;if(ct.has(t))return at.debug("There were multiple attempts to register component ".concat(t,".")),!1;ct.set(t,e);var n,r=y(st.values());try{for(r.s();!(n=r.n()).done;){lt(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function dt(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ot;dt(e,t).clearInstance(n)}function vt(){ct.clear()}var yt=(f(Xe={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),f(Xe,"bad-app-name","Illegal App name: '{$appName}"),f(Xe,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),f(Xe,"app-deleted","Firebase App named '{$appName}' already deleted"),f(Xe,"no-options","Need to provide options, when not being deployed to hosting via source."),f(Xe,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),f(Xe,"invalid-log-argument","First argument to `onLog` must be null or a function."),f(Xe,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),f(Xe,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),f(Xe,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),f(Xe,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Xe),mt=new Z("app","Firebase",yt),gt=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ie("app",(function(){return i}),"PUBLIC"))}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw mt.create("app-deleted",{appName:this._name})}}]),e}(),kt="9.14.0";function wt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:ot,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw mt.create("bad-app-name",{appName:String(a)});if(n||(n=Y()),!n)throw mt.create("no-options");var o=st.get(a);if(o){if(ce(n,o.options)&&ce(i,o.config))return o;throw mt.create("duplicate-app",{appName:a})}var u,s=new Ne(a),c=y(ct.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(f){c.e(f)}finally{c.f()}var h=new gt(n,i,s);return st.set(a,h),h}function _t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=st.get(e);if(!t&&e===ot)return wt();if(!t)throw mt.create("no-app",{appName:e});return t}function bt(){return Array.from(st.values())}function xt(e){return It.apply(this,arguments)}function It(){return It=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!st.has(n)){e.next=6;break}return st.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),It.apply(this,arguments)}function Tt(e,t,n){var r,i=null!==(r=ut[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void at.warn(u.join(" "))}ft(new Ie("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function St(e,t){if(null!==e&&"function"!==typeof e)throw mt.create("invalid-log-argument");!function(e,t){var n,r=y(Re);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Ae[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Ce[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function Et(e){var t;t=e,Re.forEach((function(e){e.setLogLevel(t)}))}var Ct="firebase-heartbeat-store",Nt=null;function Rt(){return Nt||(Nt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Qe(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Qe(u.result),e.oldVersion,e.newVersion,Qe(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ct)}}).catch((function(e){throw mt.create("idb-open",{originalErrorMessage:e.message})}))),Nt}function At(e){return Pt.apply(this,arguments)}function Pt(){return Pt=xe(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rt();case 3:return r=e.sent,e.abrupt("return",r.transaction(Ct).objectStore(Ct).get(Lt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof J?at.warn(e.t0.message):(i=mt.create("idb-get",{originalErrorMessage:null===(n=e.t0)||void 0===n?void 0:n.message}),at.warn(i.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),Pt.apply(this,arguments)}function Dt(e,t){return Ot.apply(this,arguments)}function Ot(){return Ot=xe(_e().mark((function e(t,n){var r,i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Rt();case 3:return i=e.sent,a=i.transaction(Ct,"readwrite"),o=a.objectStore(Ct),e.next=8,o.put(n,Lt(t));case 8:return e.abrupt("return",a.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof J?at.warn(e.t0.message):(u=mt.create("idb-set",{originalErrorMessage:null===(r=e.t0)||void 0===r?void 0:r.message}),at.warn(u.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Ot.apply(this,arguments)}function Lt(e){return"".concat(e.name,"!").concat(e.options.appId)}var Mt=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new jt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return v(e,[{key:"triggerHeartbeat",value:function(){var e=xe(_e().mark((function e(){var t,n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Ft(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=xe(_e().mark((function e(){var t,n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Ft(),n=Ut(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=L(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ft(){return(new Date).toISOString().substring(0,10)}function Ut(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=y(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),zt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),zt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var Vt,qt,jt=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return v(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(sS){t(sS)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,At(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Dt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",Dt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(u(r.heartbeats),u(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function zt(e){return L(JSON.stringify({version:2,heartbeats:e})).length}Vt="",ft(new Ie("platform-logger",(function(e){return new nt(e)}),"PRIVATE")),ft(new Ie("heartbeat",(function(e){return new Mt(e)}),"PRIVATE")),Tt(rt,it,Vt),Tt(rt,it,"esm2017"),Tt("fire-js","");var Bt=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,lt(t,new Ie("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return v(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),xt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ot;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){lt(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){ht(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Wt=(f(qt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),f(qt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),qt),Ht=new Z("app-compat","Firebase",Wt);var Kt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=wt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(ae(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Tt,setLogLevel:Et,onLog:St,apps:null,SDK_VERSION:kt,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(ft(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ht.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&F(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!ae(n,e=e||ot))throw Ht.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Bt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){F(n,e)},createSubscribe:ve,ErrorFactory:Z,deepExtend:F}),n}(),Gt=new Le("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Gt.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Qt=self.firebase.SDK_VERSION;Qt&&Qt.indexOf("LITE")>=0&&Gt.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Yt=Kt;!function(e){Tt("@firebase/app-compat","0.1.39",e)}();function $t(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function Xt(){return Xt="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=$t(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Xt.apply(this,arguments)}Yt.registerVersion("firebase","9.14.0","app-compat");var Jt,Zt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},en={},tn=tn||{},nn=Zt||self;function rn(){}function an(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function on(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var un="closure_uid_"+(1e9*Math.random()>>>0),sn=0;function cn(e,t,n){return e.call.apply(e.bind,arguments)}function ln(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function hn(e,t,n){return(hn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cn:ln).apply(null,arguments)}function fn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function dn(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function pn(){this.s=this.s,this.o=this.o}pn.prototype.s=!1,pn.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,un)&&e[un]||(e[un]=++sn))},pn.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function yn(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function mn(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(an(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function gn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}gn.prototype.h=function(){this.defaultPrevented=!0};var kn=function(){if(!nn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{nn.addEventListener("test",rn,t),nn.removeEventListener("test",rn,t)}catch(n){}return e}();function wn(e){return/^[\s\xa0]*$/.test(e)}var _n=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function bn(e,t){return e<t?-1:e>t?1:0}function xn(){var e=nn.navigator;return e&&(e=e.userAgent)?e:""}function In(e){return-1!=xn().indexOf(e)}function Tn(e){return Tn[" "](e),e}Tn[" "]=rn;var Sn,En=In("Opera"),Cn=In("Trident")||In("MSIE"),Nn=In("Edge"),Rn=Nn||Cn,An=In("Gecko")&&!(-1!=xn().toLowerCase().indexOf("webkit")&&!In("Edge"))&&!(In("Trident")||In("MSIE"))&&!In("Edge"),Pn=-1!=xn().toLowerCase().indexOf("webkit")&&!In("Edge");function Dn(){var e=nn.document;return e?e.documentMode:void 0}e:{var On="",Ln=function(){var e=xn();return An?/rv:([^\);]+)(\)|;)/.exec(e):Nn?/Edge\/([\d\.]+)/.exec(e):Cn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Pn?/WebKit\/(\S+)/.exec(e):En?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ln&&(On=Ln?Ln[1]:""),Cn){var Mn=Dn();if(null!=Mn&&Mn>parseFloat(On)){Sn=String(Mn);break e}}Sn=On}var Fn,Un={};function Vn(){return function(e){var t=Un;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=_n(String(Sn)).split("."),n=_n("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=bn(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||bn(0==a[2].length,0==o[2].length)||bn(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(nn.document&&Cn){var qn=Dn();Fn=qn||(parseInt(Sn,10)||void 0)}else Fn=void 0;var jn=Fn;function zn(e,t){if(gn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(An){e:{try{Tn(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Bn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&zn.X.h.call(this)}}dn(zn,gn);var Bn={2:"touch",3:"pen",4:"mouse"};zn.prototype.h=function(){zn.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wn="closure_listenable_"+(1e6*Math.random()|0),Hn=0;function Kn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Hn,this.ba=this.ea=!1}function Gn(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Qn(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Yn(e){var t={};for(var n in e)t[n]=e[n];return t}var $n="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xn(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<$n.length;a++)n=$n[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Jn(e){this.src=e,this.g={},this.h=0}function Zn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vn(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Gn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function er(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Jn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=er(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Kn(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var tr="closure_lm_"+(1e6*Math.random()|0),nr={};function rr(e,t,n,r,i){if(r&&r.once)return ar(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)rr(e,t[a],n,r,i);return null}return n=fr(n),e&&e[Wn]?e.N(t,n,on(r)?!!r.capture:!!r,i):ir(e,t,n,!1,r,i)}function ir(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=on(i)?!!i.capture:!!i,u=lr(e);if(u||(e[tr]=u=new Jn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=cr;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)kn||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ar(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)ar(e,t[a],n,r,i);return null}return n=fr(n),e&&e[Wn]?e.O(t,n,on(r)?!!r.capture:!!r,i):ir(e,t,n,!0,r,i)}function or(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)or(e,t[a],n,r,i);else r=on(r)?!!r.capture:!!r,n=fr(n),e&&e[Wn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=er(a=e.g[t],n,r,i))&&(Gn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=lr(e))&&(t=e.g[t.toString()],e=-1,t&&(e=er(t,n,r,i)),(n=-1<e?t[e]:null)&&ur(n))}function ur(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Wn])Zn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=lr(t))?(Zn(n,e),0==n.h&&(n.src=null,t[tr]=null)):Gn(e)}}}function sr(e){return e in nr?nr[e]:nr[e]="on"+e}function cr(e,t){if(e.ba)e=!0;else{t=new zn(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&ur(e),e=n.call(r,t)}return e}function lr(e){return(e=e[tr])instanceof Jn?e:null}var hr="__closure_events_fn_"+(1e9*Math.random()>>>0);function fr(e){return"function"===typeof e?e:(e[hr]||(e[hr]=function(t){return e.handleEvent(t)}),e[hr])}function dr(){pn.call(this),this.i=new Jn(this),this.P=this,this.I=null}function pr(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new gn(t,e);else if(t instanceof gn)t.target=t.target||e;else{var i=t;Xn(t=new gn(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=vr(o,r,!0,t)&&i}if(i=vr(o=t.g=e,r,!0,t)&&i,i=vr(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=vr(o=t.g=n[a],r,!1,t)&&i}function vr(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Zn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}dn(dr,pn),dr.prototype[Wn]=!0,dr.prototype.removeEventListener=function(e,t,n,r){or(this,e,t,n,r)},dr.prototype.M=function(){if(dr.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Gn(n[r]);delete t.g[e],t.h--}}this.I=null},dr.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},dr.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var yr=nn.JSON.stringify;function mr(){var e=Tr,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gr,kr=function(){function e(){d(this,e),this.h=this.g=null}return v(e,[{key:"add",value:function(e,t){var n=wr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),wr=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return v(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new _r}),(function(e){return e.reset()})),_r=function(){function e(){d(this,e),this.next=this.g=this.h=null}return v(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function br(e){nn.setTimeout((function(){throw e}),0)}function xr(e,t){gr||function(){var e=nn.Promise.resolve(void 0);gr=function(){e.then(Sr)}}(),Ir||(gr(),Ir=!0),Tr.add(e,t)}var Ir=!1,Tr=new kr;function Sr(){for(var e;e=mr();){try{e.h.call(e.g)}catch(n){br(n)}var t=wr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ir=!1}function Er(e,t){dr.call(this),this.h=e||1,this.g=t||nn,this.j=hn(this.lb,this),this.l=Date.now()}function Cr(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Nr(e,t,n){if("function"===typeof e)n&&(e=hn(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=hn(e.handleEvent,e)}return 2147483647<Number(t)?-1:nn.setTimeout(e,t||0)}function Rr(e){e.g=Nr((function(){e.g=null,e.i&&(e.i=!1,Rr(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}dn(Er,dr),(Jt=Er.prototype).ca=!1,Jt.R=null,Jt.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),pr(this,"tick"),this.ca&&(Cr(this),this.start()))}},Jt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Jt.M=function(){Er.X.M.call(this),Cr(this),delete this.g};var Ar=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return v(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Rr(this)}},{key:"M",value:function(){Xt(w(n.prototype),"M",this).call(this),this.g&&(nn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(pn);function Pr(e){pn.call(this),this.h=e,this.g={}}dn(Pr,pn);var Dr=[];function Or(e,t,n,r){Array.isArray(n)||(n&&(Dr[0]=n.toString()),n=Dr);for(var i=0;i<n.length;i++){var a=rr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Lr(e){Qn(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ur(e)}),e),e.g={}}function Mr(){this.g=!0}function Fr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return yr(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Pr.prototype.M=function(){Pr.X.M.call(this),Lr(this)},Pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mr.prototype.Aa=function(){this.g=!1},Mr.prototype.info=function(){};var Ur={},Vr=null;function qr(){return Vr=Vr||new dr}function jr(e){gn.call(this,Ur.Pa,e)}function zr(e){var t=qr();pr(t,new jr(t))}function Br(e,t){gn.call(this,Ur.STAT_EVENT,e),this.stat=t}function Wr(e){var t=qr();pr(t,new Br(t,e))}function Hr(e,t){gn.call(this,Ur.Qa,e),this.size=t}function Kr(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return nn.setTimeout((function(){e()}),t)}Ur.Pa="serverreachability",dn(jr,gn),Ur.STAT_EVENT="statevent",dn(Br,gn),Ur.Qa="timingevent",dn(Hr,gn);var Gr={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Qr={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Yr(){}function $r(e){return e.h||(e.h=e.i())}function Xr(){}Yr.prototype.h=null;var Jr,Zr={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ei(){gn.call(this,"d")}function ti(){gn.call(this,"c")}function ni(){}function ri(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new Pr(this),this.O=ai,e=Rn?125:void 0,this.T=new Er(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ii}function ii(){this.i=null,this.g="",this.h=!1}dn(ei,gn),dn(ti,gn),dn(ni,Yr),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},Jr=new ni;var ai=45e3,oi={},ui={};function si(e,t,n){e.K=1,e.v=Ei(bi(t)),e.s=n,e.P=!0,ci(e,null)}function ci(e,t){e.F=Date.now(),di(e),e.A=bi(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),qi(n.i,"t",r),e.C=0,n=e.l.H,e.h=new ii,e.g=ja(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Ar(hn(e.La,e,e.g),e.N)),Or(e.S,e.g,"readystatechange",e.ib),t=e.H?Yn(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),zr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function li(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function hi(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=fi(e,n))==ui){4==t&&(e.o=4,Wr(14),i=!1),Fr(e.j,e.m,null,"[Incomplete Response]");break}if(r==oi){e.o=4,Wr(15),Fr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Fr(e.j,e.m,r,null),gi(e,r)}li(e)&&r!=ui&&r!=oi&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Wr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Da(t),t.K=!0,Wr(11))):(Fr(e.j,e.m,n,"[Invalid Chunked Response]"),mi(e),yi(e))}function fi(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?ui:(n=Number(t.substring(n,r)),isNaN(n)?oi:(r+=1)+n>t.length?ui:(t=t.substr(r,n),e.C=r+n,t))}function di(e){e.V=Date.now()+e.O,pi(e,e.O)}function pi(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Kr(hn(e.gb,e),t)}function vi(e){e.B&&(nn.clearTimeout(e.B),e.B=null)}function yi(e){0==e.l.G||e.I||Ma(e.l,e)}function mi(e){vi(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Cr(e.T),Lr(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function gi(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Qi(n.h,e)))if(!e.J&&Qi(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;La(n),Ta(n)}Pa(n),Wr(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=Kr(hn(n.cb,n),6e3));if(1>=Gi(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else Ua(n,11)}else if((e.J||n.g==e)&&La(n),!wn(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.h;h.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(h.j=h.l,h.g=new Set,h.h&&(Yi(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.za=f,Si(r.F,r.D,f))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=qa(r,r.H?r.ka:null,r.V),d.J){$i(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(vi(p),di(p)),r.g=d}else Aa(r);0<n.i.length&&Ea(n)}else"stop"!=a[0]&&"close"!=a[0]||Ua(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?Ua(n,7):Ia(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}zr()}catch(a){}}function ki(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(an(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(an(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(an(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Jt=ri.prototype).setTimeout=function(e){this.O=e},Jt.ib=function(e){e=e.target;var t=this.L;t&&3==ga(e)?t.l():this.La(e)},Jt.La=function(e){try{if(e==this.g)e:{var t=ga(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Rn||this.g&&(this.h.h||this.g.fa()||ka(this.g)))){this.I||4!=t||7==n||zr(),vi(this);var r=this.g.aa();this.Y=r;t:if(li(this)){var i=ka(this.g);e="";var a=i.length,o=4==ga(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){mi(this),yi(this);var u="";break t}this.h.i=new nn.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!wn(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,Wr(12),mi(this),yi(this);break e}Fr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gi(this,r)}this.P?(hi(this,t,u),Rn&&this.i&&3==t&&(Or(this.S,this.T,"tick",this.hb),this.T.start())):(Fr(this.j,this.m,u,null),gi(this,u)),4==t&&mi(this),this.i&&!this.I&&(4==t?Ma(this.l,this):(this.i=!1,di(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,Wr(12)):(this.o=0,Wr(13)),mi(this),yi(this)}}}catch(t){}},Jt.hb=function(){if(this.g){var e=ga(this.g),t=this.g.fa();this.C<t.length&&(vi(this),hi(this,e,t),this.i&&4!=e&&di(this))}},Jt.cancel=function(){this.I=!0,mi(this)},Jt.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(zr(),Wr(17)),mi(this),this.o=2,yi(this)):pi(this,this.V-e)};var wi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _i(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof _i){this.h=void 0!==t?t:e.h,xi(this,e.j),this.s=e.s,this.g=e.g,Ii(this,e.m),this.l=e.l,t=e.i;var n=new Mi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Ti(this,n),this.o=e.o}else e&&(n=String(e).match(wi))?(this.h=!!t,xi(this,n[1]||"",!0),this.s=Ci(n[2]||""),this.g=Ci(n[3]||"",!0),Ii(this,n[4]),this.l=Ci(n[5]||"",!0),Ti(this,n[6]||"",!0),this.o=Ci(n[7]||"")):(this.h=!!t,this.i=new Mi(null,this.h))}function bi(e){return new _i(e)}function xi(e,t,n){e.j=n?Ci(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ii(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ti(e,t,n){t instanceof Mi?(e.i=t,function(e,t){t&&!e.j&&(Fi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Ui(this,t),qi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ni(t,Oi)),e.i=new Mi(t,e.h))}function Si(e,t,n){e.i.set(t,n)}function Ei(e){return Si(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ci(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ni(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ri),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ri(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}_i.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ni(t,Ai,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ni(t,Ai,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ni(n,"/"==n.charAt(0)?Di:Pi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ni(n,Li)),e.join("")};var Ai=/[#\/\?@]/g,Pi=/[#\?:]/g,Di=/[#\?]/g,Oi=/[#\?@]/g,Li=/#/g;function Mi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Fi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Ui(e,t){Fi(e),t=ji(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Vi(e,t){return Fi(e),t=ji(e,t),e.g.has(t)}function qi(e,t,n){Ui(e,t),0<n.length&&(e.i=null,e.g.set(ji(e,t),yn(n)),e.h+=n.length)}function ji(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Jt=Mi.prototype).add=function(e,t){Fi(this),this.i=null,e=ji(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Jt.forEach=function(e,t){Fi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Jt.oa=function(){Fi(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Jt.W=function(e){Fi(this);var t=[];if("string"===typeof e)Vi(this,e)&&(t=t.concat(this.g.get(ji(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Jt.set=function(e,t){return Fi(this),this.i=null,Vi(this,e=ji(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Jt.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Jt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var zi=v((function e(t,n){d(this,e),this.h=t,this.g=n}));function Bi(e){this.l=e||Hi,nn.PerformanceNavigationTiming?e=0<(e=nn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(nn.g&&nn.g.Ga&&nn.g.Ga()&&nn.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Wi,Hi=10;function Ki(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Gi(e){return e.h?1:e.g?e.g.size:0}function Qi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Yi(e,t){e.g?e.g.add(t):e.h=t}function $i(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xi(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=y(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return yn(e.i)}function Ji(){}function Zi(){this.g=new Ji}function ea(e,t,n){var r=n||"";try{ki(e,(function(e,n){var i=e;on(e)&&(i=yr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function ta(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function na(e){this.l=e.ac||null,this.j=e.jb||!1}function ra(e,t){dr.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=ia,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Bi.prototype.cancel=function(){if(this.i=Xi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=y(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Ji.prototype.stringify=function(e){return nn.JSON.stringify(e,void 0)},Ji.prototype.parse=function(e){return nn.JSON.parse(e,void 0)},dn(na,Yr),na.prototype.g=function(){return new ra(this.l,this.j)},na.prototype.i=(Wi={},function(){return Wi}),dn(ra,dr);var ia=0;function aa(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function oa(e){e.readyState=4,e.l=null,e.j=null,e.A=null,ua(e)}function ua(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Jt=ra.prototype).open=function(e,t){if(this.readyState!=ia)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,ua(this)},Jt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||nn).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Jt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,oa(this)),this.readyState=ia},Jt.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,ua(this)),this.g&&(this.readyState=3,ua(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof nn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;aa(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Jt.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?oa(this):ua(this),3==this.readyState&&aa(this)}},Jt.Va=function(e){this.g&&(this.response=this.responseText=e,oa(this))},Jt.Ua=function(e){this.g&&(this.response=e,oa(this))},Jt.ga=function(){this.g&&oa(this)},Jt.setRequestHeader=function(e,t){this.v.append(e,t)},Jt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Jt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ra.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var sa=nn.JSON.parse;function ca(e){dr.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=la,this.K=this.L=!1}dn(ca,dr);var la="",ha=/^https?$/i,fa=["POST","PUT"];function da(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,pa(e),ya(e)}function pa(e){e.D||(e.D=!0,pr(e,"complete"),pr(e,"error"))}function va(e){if(e.h&&"undefined"!=typeof tn&&(!e.C[1]||4!=ga(e)||2!=e.aa()))if(e.v&&4==ga(e))Nr(e.Ha,0,e);else if(pr(e,"readystatechange"),4==ga(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(wi)[1]||null;if(!a&&nn.self&&nn.self.location){var o=nn.self.location.protocol;a=o.substr(0,o.length-1)}i=!ha.test(a?a.toLowerCase():"")}t=i}if(t)pr(e,"complete"),pr(e,"success");else{e.m=6;try{var u=2<ga(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",pa(e)}}finally{ya(e)}}}function ya(e,t){if(e.g){ma(e);var n=e.g,r=e.C[0]?rn:null;e.g=null,e.C=null,t||pr(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function ma(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(nn.clearTimeout(e.A),e.A=null)}function ga(e){return e.g?e.g.readyState:0}function ka(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case la:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(ro){return null}}function wa(e){var t="";return Qn(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function _a(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=wa(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Si(e,t,n))}function ba(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function xa(e){this.Ca=0,this.i=[],this.j=new Mr,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=ba("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=ba("baseRetryDelayMs",5e3,e),this.bb=ba("retryDelaySeedMs",1e4,e),this.$a=ba("forwardChannelMaxRetries",2,e),this.ta=ba("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new Bi(e&&e.concurrentRequestLimit),this.Fa=new Zi,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Ia(e){if(Sa(e),3==e.G){var t=e.U++,n=bi(e.F);Si(n,"SID",e.I),Si(n,"RID",t),Si(n,"TYPE","terminate"),Na(e,n),(t=new ri(e,e.j,t,void 0)).K=2,t.v=Ei(bi(n)),n=!1,nn.navigator&&nn.navigator.sendBeacon&&(n=nn.navigator.sendBeacon(t.v.toString(),"")),!n&&nn.Image&&((new Image).src=t.v,n=!0),n||(t.g=ja(t.l,null),t.g.da(t.v)),t.F=Date.now(),di(t)}Va(e)}function Ta(e){e.g&&(Da(e),e.g.cancel(),e.g=null)}function Sa(e){Ta(e),e.u&&(nn.clearTimeout(e.u),e.u=null),La(e),e.h.cancel(),e.m&&("number"===typeof e.m&&nn.clearTimeout(e.m),e.m=null)}function Ea(e){Ki(e.h)||e.m||(e.m=!0,xr(e.Ja,e),e.C=0)}function Ca(e,t){var n;n=t?t.m:e.U++;var r=bi(e.F);Si(r,"SID",e.I),Si(r,"RID",n),Si(r,"AID",e.T),Na(e,r),e.o&&e.s&&_a(r,e.o,e.s),n=new ri(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Ra(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),Yi(e.h,n),si(n,r,t)}function Na(e,t){e.ia&&Qn(e.ia,(function(e,n){Si(t,n,e)})),e.l&&ki({},(function(e,n){Si(t,n,e)}))}function Ra(e,t,n){n=Math.min(e.i.length,n);var r=e.l?hn(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{ea(l,o,"req"+c+"_")}catch(h){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function Aa(e){e.g||e.u||(e.Z=1,xr(e.Ia,e),e.A=0)}function Pa(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=Kr(hn(e.Ia,e),Fa(e,e.A)),e.A++,!0)}function Da(e){null!=e.B&&(nn.clearTimeout(e.B),e.B=null)}function Oa(e){e.g=new ri(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=bi(e.sa);Si(t,"RID","rpc"),Si(t,"SID",e.I),Si(t,"CI",e.L?"0":"1"),Si(t,"AID",e.T),Si(t,"TYPE","xmlhttp"),Na(e,t),e.o&&e.s&&_a(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Ei(bi(t)),n.s=null,n.P=!0,ci(n,e)}function La(e){null!=e.v&&(nn.clearTimeout(e.v),e.v=null)}function Ma(e,t){var n=null;if(e.g==t){La(e),Da(e),e.g=null;var r=2}else{if(!Qi(e.h,t))return;n=t.D,$i(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;pr(r=qr(),new Hr(r,n)),Ea(e)}else Aa(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(Gi(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=Kr(hn(e.Ja,e,t),Fa(e,e.C)),e.C++,!0))}(e,t)||2==r&&Pa(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:Ua(e,5);break;case 4:Ua(e,10);break;case 3:Ua(e,6);break;default:Ua(e,2)}}function Fa(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function Ua(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=hn(e.kb,e);n||(n=new _i("//www.google.com/images/cleardot.gif"),nn.location&&"http"==nn.location.protocol||xi(n,"https"),Ei(n)),function(e,t){var n=new Mr;if(nn.Image){var r=new Image;r.onload=fn(ta,n,r,"TestLoadImage: loaded",!0,t),r.onerror=fn(ta,n,r,"TestLoadImage: error",!1,t),r.onabort=fn(ta,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=fn(ta,n,r,"TestLoadImage: timeout",!1,t),nn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Wr(2);e.G=0,e.l&&e.l.va(t),Va(e),Sa(e)}function Va(e){if(e.G=0,e.la=[],e.l){var t=Xi(e.h);0==t.length&&0==e.i.length||(mn(e.la,t),mn(e.la,e.i),e.h.i.length=0,yn(e.i),e.i.length=0),e.l.ua()}}function qa(e,t,n){var r=n instanceof _i?bi(n):new _i(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Ii(r,r.m);else{var i=nn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new _i(null,void 0);r&&xi(a,r),t&&(a.g=t),i&&Ii(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Si(r,n,t),Si(r,"VER",e.ma),Na(e,r),r}function ja(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new ca(new na({jb:!0})):new ca(e.ra)).Ka(e.H),t}function za(){}function Ba(){if(Cn&&!(10<=Number(jn)))throw Error("Environmental error: no available transport.")}function Wa(e,t){dr.call(this),this.g=new xa(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!wn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!wn(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ga(this)}function Ha(e){ei.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Ka(){ti.call(this),this.status=1}function Ga(e){this.g=e}(Jt=ca.prototype).Ka=function(e){this.L=e},Jt.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Jr.g(),this.C=this.u?$r(this.u):$r(Jr),this.g.onreadystatechange=hn(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void da(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=y(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=nn.FormData&&e instanceof nn.FormData,!(0<=vn(fa,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=y(n);try{for(c.s();!(s=c.n()).done;){var h=l(s.value,2),f=h[0],d=h[1];this.g.setRequestHeader(f,d)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ma(this),0<this.B&&((this.K=function(e){return Cn&&Vn()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=hn(this.qa,this)):this.A=Nr(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){da(this,u)}},Jt.qa=function(){"undefined"!=typeof tn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pr(this,"timeout"),this.abort(8))},Jt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pr(this,"complete"),pr(this,"abort"),ya(this))},Jt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ya(this,!0)),ca.X.M.call(this)},Jt.Ha=function(){this.s||(this.F||this.v||this.l?va(this):this.fb())},Jt.fb=function(){va(this)},Jt.aa=function(){try{return 2<ga(this)?this.g.status:-1}catch(Wi){return-1}},Jt.fa=function(){try{return this.g?this.g.responseText:""}catch(Wi){return""}},Jt.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),sa(t)}},Jt.Ea=function(){return this.m},Jt.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Jt=xa.prototype).ma=8,Jt.G=1,Jt.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new ri(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Xn(n=Yn(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Ra(this,t,r),Si(i=bi(this.F),"RID",e),Si(i,"CVER",22),this.D&&Si(i,"X-HTTP-Session-Id",this.D),Na(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(wa(n)))+"&"+r:this.o&&_a(i,this.o,n)),Yi(this.h,t),this.Ya&&Si(i,"TYPE","init"),this.O?(Si(i,"$req",r),Si(i,"SID","null"),t.Z=!0,si(t,i,null)):si(t,i,r),this.G=2}}else 3==this.G&&(e?Ca(this,e):0==this.i.length||Ki(this.h)||Ca(this))},Jt.Ia=function(){if(this.u=null,Oa(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=Kr(hn(this.eb,this),e)}},Jt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Wr(10),Ta(this),Oa(this))},Jt.cb=function(){null!=this.v&&(this.v=null,Ta(this),Pa(this),Wr(19))},Jt.kb=function(e){e?(this.j.info("Successfully pinged google.com"),Wr(2)):(this.j.info("Failed to ping google.com"),Wr(1))},(Jt=za.prototype).xa=function(){},Jt.wa=function(){},Jt.va=function(){},Jt.ua=function(){},Jt.Ra=function(){},Ba.prototype.g=function(e,t){return new Wa(e,t)},dn(Wa,dr),Wa.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;Wr(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=qa(e,null,e.V),Ea(e)},Wa.prototype.close=function(){Ia(this.g)},Wa.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=yr(e),e=n);t.i.push(new zi(t.ab++,e)),3==t.G&&Ea(t)},Wa.prototype.M=function(){this.g.l=null,delete this.j,Ia(this.g),delete this.g,Wa.X.M.call(this)},dn(Ha,ei),dn(Ka,ti),dn(Ga,za),Ga.prototype.xa=function(){pr(this.g,"a")},Ga.prototype.wa=function(e){pr(this.g,new Ha(e))},Ga.prototype.va=function(e){pr(this.g,new Ka)},Ga.prototype.ua=function(){pr(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,Wa.prototype.send=Wa.prototype.u,Wa.prototype.open=Wa.prototype.m,Wa.prototype.close=Wa.prototype.close,Gr.NO_ERROR=0,Gr.TIMEOUT=8,Gr.HTTP_ERROR=6,Qr.COMPLETE="complete",Xr.EventType=Zr,Zr.OPEN="a",Zr.CLOSE="b",Zr.ERROR="c",Zr.MESSAGE="d",dr.prototype.listen=dr.prototype.N,ca.prototype.listenOnce=ca.prototype.O,ca.prototype.getLastError=ca.prototype.Oa,ca.prototype.getLastErrorCode=ca.prototype.Ea,ca.prototype.getStatus=ca.prototype.aa,ca.prototype.getResponseJson=ca.prototype.Sa,ca.prototype.getResponseText=ca.prototype.fa,ca.prototype.send=ca.prototype.da,ca.prototype.setWithCredentials=ca.prototype.Ka;var Qa=en.createWebChannelTransport=function(){return new Ba},Ya=en.getStatEventTarget=function(){return qr()},$a=en.ErrorCode=Gr,Xa=en.EventType=Qr,Ja=en.Event=Ur,Za=en.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},eo=en.FetchXmlHttpFactory=na,to=en.WebChannel=Xr,no=en.XhrIo=ca,ro="@firebase/firestore",io=function(){function e(t){d(this,e),this.uid=t}return v(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();io.UNAUTHENTICATED=new io(null),io.GOOGLE_CREDENTIALS=new io("google-credentials-uid"),io.FIRST_PARTY=new io("first-party-uid"),io.MOCK_USER=new io("mock-user");var ao="9.14.0",oo=new Le("@firebase/firestore");function uo(){return oo.logLevel}function so(e){if(oo.logLevel<=Ce.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ho);oo.debug.apply(oo,["Firestore (".concat(ao,"): ").concat(e)].concat(u(i)))}}function co(e){if(oo.logLevel<=Ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ho);oo.error.apply(oo,["Firestore (".concat(ao,"): ").concat(e)].concat(u(i)))}}function lo(e){if(oo.logLevel<=Ce.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(ho);oo.warn.apply(oo,["Firestore (".concat(ao,"): ").concat(e)].concat(u(i)))}}function ho(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(ao,") INTERNAL ASSERTION FAILED: ")+e;throw co(t),new Error(t)}function po(e,t){e||fo()}function vo(e,t){return e}var yo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mo=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return v(n)}(J),go=v((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),ko=v((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),wo=function(){function e(){d(this,e)}return v(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(io.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),_o=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return v(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),bo=function(){function e(t){d(this,e),this.t=t,this.currentUser=io.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new go;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new go,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){so("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(so("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new go)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(so("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(po("string"==typeof n.accessToken),new ko(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return po(null===e||"string"==typeof e),new io(e)}}]),e}(),xo=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=io.FIRST_PARTY,this.p=new Map}return v(e,[{key:"I",value:function(){return this.g?this.g():(po(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),Io=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return v(e,[{key:"getToken",value:function(){return Promise.resolve(new xo(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(io.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),To=v((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),So=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return v(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&so("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,so("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){so("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):so("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(po("string"==typeof t.token),e.A=t.token,new To(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Eo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Co=function(){function e(){d(this,e)}return v(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Eo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function No(e,t){return e<t?-1:e>t?1:0}function Ro(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Ao(e){return e+"\0"}var Po=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new mo(yo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mo(yo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new mo(yo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mo(yo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return v(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?No(this.nanoseconds,e.nanoseconds):No(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Do=function(){function e(t){d(this,e),this.timestamp=t}return v(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Po(0,0))}},{key:"max",value:function(){return new e(new Po(253402300799,999999999))}}]),e}(),Oo=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&fo(),void 0===r?r=t.length-n:r>t.length-n&&fo(),this.segments=t,this.offset=n,this.len=r}return v(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Lo=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var s=o[a];if(s.indexOf("//")>=0)throw new mo(yo.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,u(s.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Oo),Mo=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fo=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Mo.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new mo(yo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new mo(yo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new mo(yo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new mo(yo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Oo),Uo=function(){function e(t){d(this,e),this.path=t}return v(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Lo.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Lo.fromString(t))}},{key:"fromName",value:function(t){return new e(Lo.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Lo.emptyPath())}},{key:"comparator",value:function(e,t){return Lo.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Lo(t.slice()))}}]),e}(),Vo=v((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function qo(e){return e.fields.find((function(e){return 2===e.kind}))}function jo(e){return e.fields.filter((function(e){return 2!==e.kind}))}Vo.UNKNOWN_ID=-1;var zo=v((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var Bo=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return v(e,null,[{key:"empty",value:function(){return new e(0,Ko.min())}}]),e}();function Wo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Do.fromTimestamp(1e9===r?new Po(n+1,0):new Po(n,r));return new Ko(i,Uo.empty(),t)}function Ho(e){return new Ko(e.readTime,e.key,-1)}var Ko=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return v(e,null,[{key:"min",value:function(){return new e(Do.min(),Uo.empty(),-1)}},{key:"max",value:function(){return new e(Do.max(),Uo.empty(),-1)}}]),e}();function Go(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Uo.comparator(e.documentKey,t.documentKey))?n:No(e.largestBatchId,t.largestBatchId)}var Qo="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Yo=function(){function e(){d(this,e),this.onCommittedListeners=[]}return v(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function $o(e){return Xo.apply(this,arguments)}function Xo(){return Xo=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===yo.FAILED_PRECONDITION&&t.message===Qo){e.next=2;break}throw t;case 2:so("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),Xo.apply(this,arguments)}var Jo=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return v(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&fo(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=y(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(u){var s=u;n(t[s]).next((function(t){a[s]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u(s)}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Zo=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new go,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new nu(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=uu(e.target.error);r.P.reject(new nu(t,n))}}return v(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(so("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new iu(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new nu(n,t)}}}]),e}(),eu=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(U())&&co("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return v(e,[{key:"F",value:function(){var e=xe(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return so("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new nu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new mo(yo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new mo(yo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new nu(t,n))},i.onupgradeneeded=function(e){so("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){so("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=xe(_e().mark((function e(t,n,r,i){var a,o,u,s,c,l=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(_e().mark((function e(){var n,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.F(t);case 2:return l.db=e.sent,n=Zo.open(l.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),Jo.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.v;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s=e.t1,c="FirebaseError"!==s.name&&o<3,so("SimpleDb","Transaction failed with error:",s.message,"Retrying:",c),this.close(),c){e.next=15;break}return e.abrupt("return",Promise.reject(s));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return so("SimpleDb","Removing database:",e),au(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!H())return!1;if(e.N())return!0;var t=U(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),tu=function(){function e(t){d(this,e),this.U=t,this.q=!1,this.K=null}return v(e,[{key:"isDone",get:function(){return this.q}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.U=e}},{key:"done",value:function(){this.q=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return au(this.U.delete())}}]),e}(),nu=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,yo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return v(n)}(mo);function ru(e){return"IndexedDbTransactionError"===e.name}var iu=function(){function e(t){d(this,e),this.store=t}return v(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(so("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(so("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),au(n)}},{key:"add",value:function(e){return so("SimpleDb","ADD",this.store.name,e,e),au(this.store.add(e))}},{key:"get",value:function(e){var t=this;return au(this.store.get(e)).next((function(n){return void 0===n&&(n=null),so("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return so("SimpleDb","DELETE",this.store.name,e),au(this.store.delete(e))}},{key:"count",value:function(){return so("SimpleDb","COUNT",this.store.name),au(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Jo((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Jo((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){so("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new Jo((function(n,r){t.onerror=function(e){var t=uu(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new Jo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new tu(i),o=t(i.primaryKey,i.value,a);if(o instanceof Jo){var u=o.catch((function(e){return a.done(),Jo.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return Jo.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function au(e){return new Jo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=uu(e.target.error);n(t)}}))}var ou=!1;function uu(e){var t=eu.D(U());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new mo("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return ou||(ou=!0,setTimeout((function(){throw r}),0)),r}}return e}var su=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return v(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;so("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=so,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!ru(e.t4)){e.next=17;break}so("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,$o(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),cu=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return v(e,[{key:"st",value:function(){var e=xe(_e().mark((function e(){var t,n=this,r=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Jo.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return so("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return so("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=Ho(t);Go(r,n)>0&&(n=r)})),new Ko(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),lu=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return v(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();function hu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function fu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function du(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}lu.at=-1;var pu=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||yu.EMPTY}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,yu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,yu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new vu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new vu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new vu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new vu(this.root,e,this.comparator,!0)}}]),e}(),vu=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return v(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),yu=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw fo();if(this.right.isRed())throw fo();var e=this.left.check();if(e!==this.right.check())throw fo();return e+(this.isRed()?0:1)}}]),e}();yu.EMPTY=null,yu.RED=!0,yu.BLACK=!1,yu.EMPTY=new(function(){function e(){d(this,e),this.size=0}return v(e,[{key:"key",get:function(){throw fo()}},{key:"value",get:function(){throw fo()}},{key:"color",get:function(){throw fo()}},{key:"left",get:function(){throw fo()}},{key:"right",get:function(){throw fo()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new yu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var mu=function(){function e(t){d(this,e),this.comparator=t,this.data=new pu(this.comparator)}return v(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new gu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new gu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),gu=function(){function e(t){d(this,e),this.iter=t}return v(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ku(e){return e.hasNext()?e.getNext():void 0}var wu=function(){function e(t){d(this,e),this.fields=t,t.sort(Fo.comparator)}return v(e,[{key:"unionWith",value:function(t){var n,r=new mu(Fo.comparator),i=y(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=y(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=y(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ro(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}();var _u=function(e){function t(e){d(this,t),this.binaryString=e}return v(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return No(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();_u.EMPTY_BYTE_STRING=new _u("");var bu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xu(e){if(po(!!e),"string"==typeof e){var t=0,n=bu.exec(e);if(po(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Iu(e.seconds),nanos:Iu(e.nanos)}}function Iu(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Tu(e){return"string"==typeof e?_u.fromBase64String(e):_u.fromUint8Array(e)}function Su(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Eu(e){var t=e.mapValue.fields.__previous_value__;return Su(t)?Eu(t):t}function Cu(e){var t=xu(e.mapValue.fields.__local_write_time__.timestampValue);return new Po(t.seconds,t.nanos)}var Nu=v((function e(t,n,r,i,a,o,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Ru=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return v(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function Au(e){return null==e}function Pu(e){return 0===e&&1/e==-1/0}function Du(e){return"number"==typeof e&&Number.isInteger(e)&&!Pu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Ou={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lu={nullValue:"NULL_VALUE"};function Mu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Su(e)?4:$u(e)?9007199254740991:10:fo()}function Fu(e,t){if(e===t)return!0;var n=Mu(e);if(n!==Mu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Cu(e).isEqual(Cu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=xu(e.timestampValue),r=xu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Tu(e.bytesValue).isEqual(Tu(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Iu(e.geoPointValue.latitude)===Iu(t.geoPointValue.latitude)&&Iu(e.geoPointValue.longitude)===Iu(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Iu(e.integerValue)===Iu(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Iu(e.doubleValue),r=Iu(t.doubleValue);return n===r?Pu(n)===Pu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ro(e.arrayValue.values||[],t.arrayValue.values||[],Fu);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(hu(n)!==hu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Fu(n[i],r[i])))return!1;return!0}(e,t);default:return fo()}}function Uu(e,t){return void 0!==(e.values||[]).find((function(e){return Fu(e,t)}))}function Vu(e,t){if(e===t)return 0;var n=Mu(e),r=Mu(t);if(n!==r)return No(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return No(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Iu(e.integerValue||e.doubleValue),r=Iu(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return qu(e.timestampValue,t.timestampValue);case 4:return qu(Cu(e),Cu(t));case 5:return No(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Tu(e),r=Tu(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=No(n[i],r[i]);if(0!==a)return a}return No(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=No(Iu(e.latitude),Iu(t.latitude));return 0!==n?n:No(Iu(e.longitude),Iu(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Vu(n[i],r[i]);if(a)return a}return No(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Ou.mapValue&&t===Ou.mapValue)return 0;if(e===Ou.mapValue)return 1;if(t===Ou.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=No(r[o],a[o]);if(0!==u)return u;var s=Vu(n[r[o]],i[a[o]]);if(0!==s)return s}return No(r.length,a.length)}(e.mapValue,t.mapValue);default:throw fo()}}function qu(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return No(e,t);var n=xu(e),r=xu(t),i=No(n.seconds,r.seconds);return 0!==i?i:No(n.nanos,r.nanos)}function ju(e){return zu(e)}function zu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=xu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Tu(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Uo.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=y(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=zu(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=y(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(zu(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):fo();var t,n}function Bu(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Wu(e){return!!e&&"integerValue"in e}function Hu(e){return!!e&&"arrayValue"in e}function Ku(e){return!!e&&"nullValue"in e}function Gu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Qu(e){return!!e&&"mapValue"in e}function Yu(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return fu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Yu(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Yu(e.arrayValue.values[r]);return n}return Object.assign({},e)}function $u(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Xu(e){return"nullValue"in e?Lu:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Bu(Ru.empty(),Uo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:fo()}function Ju(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Bu(Ru.empty(),Uo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Ou:fo()}function Zu(e,t){var n=Vu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function es(e,t){var n=Vu(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var ts=function(){function e(t){d(this,e),this.value=t}return v(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Qu(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yu(t)}},{key:"setAll",value:function(e){var t=this,n=Fo.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Yu(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Fu(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Qu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){fu(t,(function(t,n){return e[t]=n}));var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Yu(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ns(e){var t=[];return fu(e.fields,(function(e,n){var r=new Fo([e]);if(Qu(n)){var i=ns(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=y(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new wu(t)}var rs=function(){function e(t,n,r,i,a,o){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return v(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=ts.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=ts.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Do.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Do.min(),Do.min(),ts.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Do.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Do.min(),ts.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Do.min(),ts.empty(),2)}}]),e}(),is=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ht=null}));function as(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new is(e,t,n,r,i,a,o)}function os(e){var t=vo(e);if(null===t.ht){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+ju(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Au(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ju(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ju(e)})).join(",")),t.ht=n}return t.ht}function us(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!xs(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Fu(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ts(e.startAt,t.startAt)&&Ts(e.endAt,t.endAt)}function ss(e){return Uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function cs(e,t){return e.filters.filter((function(e){return e instanceof fs&&e.field.isEqual(t)}))}function ls(e,t,n){var r,i=Lu,a=!0,o=y(cs(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Lu,c=!0;switch(u.op){case"<":case"<=":s=Xu(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Lu}Zu({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];Zu({value:i,inclusive:a},{value:h,inclusive:n.inclusive})<0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}function hs(e,t,n){var r,i=Ou,a=!0,o=y(cs(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Ou,c=!0;switch(u.op){case">=":case">":s=Ju(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Ou}es({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(f){o.e(f)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var h=n.position[l];es({value:i,inclusive:a},{value:h,inclusive:n.inclusive})>0&&(i=h,a=n.inclusive);break}return{value:i,inclusive:a}}var fs=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Vu(t,this.value)):null!==t&&Mu(this.value)===Mu(t)&&this.ft(Vu(t,this.value))}},{key:"ft",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fo()}}},{key:"dt",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new ds(e,t,r):"array-contains"===t?new ms(e,r):"in"===t?new gs(e,r):"not-in"===t?new ks(e,r):"array-contains-any"===t?new ws(e,r):new n(e,t,r)}},{key:"lt",value:function(e,t,n){return"in"===t?new ps(e,n):new vs(e,n)}}]),n}(function(){return v((function e(){d(this,e)}))}()),ds=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=Uo.fromName(i.referenceValue),a}return v(n,[{key:"matches",value:function(e){var t=Uo.comparator(e.key,this.key);return this.ft(t)}}]),n}(fs),ps=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=ys("in",r),i}return v(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(fs),vs=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=ys("not-in",r),i}return v(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(fs);function ys(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Uo.fromName(e.referenceValue)}))}var ms=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Hu(t)&&Uu(t.arrayValue,this.value)}}]),n}(fs),gs=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return v(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Uu(this.value.arrayValue,t)}}]),n}(fs),ks=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return v(n,[{key:"matches",value:function(e){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Uu(this.value.arrayValue,t)}}]),n}(fs),ws=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return v(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Hu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Uu(t.value.arrayValue,e)}))}}]),n}(fs),_s=v((function e(t,n){d(this,e),this.position=t,this.inclusive=n})),bs=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function xs(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Is(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Uo.comparator(Uo.fromName(o.referenceValue),n.key):Vu(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Ts(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Fu(e.position[n],t.position[n]))return!1;return!0}var Ss=v((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this._t=null,this.wt=null,this.startAt,this.endAt}));function Es(e,t,n,r,i,a,o,u){return new Ss(e,t,n,r,i,a,o,u)}function Cs(e){return new Ss(e)}function Ns(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Rs(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function As(e){var t,n=y(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.dt())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ps(e){return null!==e.collectionGroup}function Ds(e){var t=vo(e);if(null===t._t){t._t=[];var n=As(t),r=Rs(t);if(null!==n&&null===r)n.isKeyField()||t._t.push(new bs(n)),t._t.push(new bs(Fo.keyField(),"asc"));else{var i,a=!1,o=y(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t._t.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t._t.push(new bs(Fo.keyField(),s))}}}return t._t}function Os(e){var t=vo(e);if(!t.wt)if("F"===t.limitType)t.wt=as(t.path,t.collectionGroup,Ds(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=y(Ds(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new bs(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new _s(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new _s(t.startAt.position,t.startAt.inclusive):null;t.wt=as(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Ls(e,t,n){return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ms(e,t){return us(Os(e),Os(t))&&e.limitType===t.limitType}function Fs(e){return"".concat(os(Os(e)),"|lt:").concat(e.limitType)}function Us(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(ju(t.value));var t})).join(", "),"]")),Au(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ju(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ju(e)})).join(",")),"Target(".concat(t,")")}(Os(e)),"; limitType=").concat(e.limitType,")")}function Vs(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Uo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=y(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=y(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Is(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ds(e),t))&&!(e.endAt&&!function(e,t,n){var r=Is(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ds(e),t))}(e,t)}function qs(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function js(e){return function(t,n){var r,i=!1,a=y(Ds(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=zs(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function zs(e,t,n){var r=e.field.isKeyField()?Uo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Vu(r,i):fo()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fo()}}function Bs(e,t){if(e.gt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pu(t)?"-0":t}}function Ws(e){return{integerValue:""+e}}function Hs(e,t){return Du(t)?Ws(t):Bs(e,t)}var Ks=v((function e(){d(this,e),this._=void 0}));function Gs(e,t,n){return e instanceof $s?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Xs?Js(e,t):e instanceof Zs?ec(e,t):function(e,t){var n=Ys(e,t),r=nc(n)+nc(e.yt);return Wu(n)&&Wu(e.yt)?Ws(r):Bs(e.It,r)}(e,t)}function Qs(e,t,n){return e instanceof Xs?Js(e,t):e instanceof Zs?ec(e,t):n}function Ys(e,t){return e instanceof tc?Wu(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var $s=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n)}(Ks),Xs=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(Ks);function Js(e,t){var n,r=rc(t),i=y(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Fu(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Zs=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return v(n)}(Ks);function ec(e,t){var n,r=rc(t),i=y(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Fu(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var tc=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).It=e,i.yt=r,i}return v(n)}(Ks);function nc(e){return Iu(e.integerValue||e.doubleValue)}function rc(e){return Hu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var ic=v((function e(t,n){d(this,e),this.field=t,this.transform=n}));var ac=v((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),oc=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return v(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function uc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var sc=v((function e(){d(this,e)}));function cc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new _c(e.key,oc.none()):new pc(e.key,e.data,oc.none());var n,r=e.data,i=ts.empty(),a=new mu(Fo.comparator),o=y(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new vc(e.key,i,new wu(a.toArray()),oc.none())}function lc(e,t,n){e instanceof pc?function(e,t,n){var r=e.value.clone(),i=mc(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof vc?function(e,t,n){if(uc(e.precondition,t)){var r=mc(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(yc(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function hc(e,t,n,r){return e instanceof pc?function(e,t,n,r){if(!uc(e.precondition,t))return n;var i=e.value.clone(),a=gc(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof vc?function(e,t,n,r){if(!uc(e.precondition,t))return n;var i=gc(e.fieldTransforms,r,t),a=t.data;return a.setAll(yc(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return uc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function fc(e,t){var n,r=null,i=y(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Ys(a.transform,o||null);null!=u&&(null===r&&(r=ts.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function dc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ro(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Xs&&t instanceof Xs||e instanceof Zs&&t instanceof Zs?Ro(e.elements,t.elements,Fu):e instanceof tc&&t instanceof tc?Fu(e.yt,t.yt):e instanceof $s&&t instanceof $s}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var pc=function(e){k(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sc),vc=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return v(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(sc);function yc(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function mc(e,t,n){var r=new Map;po(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Qs(o,u,n[i]))}return r}function gc(e,t,n){var r,i=new Map,a=y(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Gs(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var kc,wc,_c=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sc),bc=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return v(n,[{key:"getFieldMask",value:function(){return null}}]),n}(sc),xc=v((function e(t){d(this,e),this.count=t}));function Ic(e){switch(e){default:return fo();case yo.CANCELLED:case yo.UNKNOWN:case yo.DEADLINE_EXCEEDED:case yo.RESOURCE_EXHAUSTED:case yo.INTERNAL:case yo.UNAVAILABLE:case yo.UNAUTHENTICATED:return!1;case yo.INVALID_ARGUMENT:case yo.NOT_FOUND:case yo.ALREADY_EXISTS:case yo.PERMISSION_DENIED:case yo.FAILED_PRECONDITION:case yo.ABORTED:case yo.OUT_OF_RANGE:case yo.UNIMPLEMENTED:case yo.DATA_LOSS:return!0}}function Tc(e){if(void 0===e)return co("GRPC error has no .code"),yo.UNKNOWN;switch(e){case kc.OK:return yo.OK;case kc.CANCELLED:return yo.CANCELLED;case kc.UNKNOWN:return yo.UNKNOWN;case kc.DEADLINE_EXCEEDED:return yo.DEADLINE_EXCEEDED;case kc.RESOURCE_EXHAUSTED:return yo.RESOURCE_EXHAUSTED;case kc.INTERNAL:return yo.INTERNAL;case kc.UNAVAILABLE:return yo.UNAVAILABLE;case kc.UNAUTHENTICATED:return yo.UNAUTHENTICATED;case kc.INVALID_ARGUMENT:return yo.INVALID_ARGUMENT;case kc.NOT_FOUND:return yo.NOT_FOUND;case kc.ALREADY_EXISTS:return yo.ALREADY_EXISTS;case kc.PERMISSION_DENIED:return yo.PERMISSION_DENIED;case kc.FAILED_PRECONDITION:return yo.FAILED_PRECONDITION;case kc.ABORTED:return yo.ABORTED;case kc.OUT_OF_RANGE:return yo.OUT_OF_RANGE;case kc.UNIMPLEMENTED:return yo.UNIMPLEMENTED;case kc.DATA_LOSS:return yo.DATA_LOSS;default:return fo()}}(wc=kc||(kc={}))[wc.OK=0]="OK",wc[wc.CANCELLED=1]="CANCELLED",wc[wc.UNKNOWN=2]="UNKNOWN",wc[wc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",wc[wc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",wc[wc.NOT_FOUND=5]="NOT_FOUND",wc[wc.ALREADY_EXISTS=6]="ALREADY_EXISTS",wc[wc.PERMISSION_DENIED=7]="PERMISSION_DENIED",wc[wc.UNAUTHENTICATED=16]="UNAUTHENTICATED",wc[wc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",wc[wc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",wc[wc.ABORTED=10]="ABORTED",wc[wc.OUT_OF_RANGE=11]="OUT_OF_RANGE",wc[wc.UNIMPLEMENTED=12]="UNIMPLEMENTED",wc[wc.INTERNAL=13]="INTERNAL",wc[wc.UNAVAILABLE=14]="UNAVAILABLE",wc[wc.DATA_LOSS=15]="DATA_LOSS";var Sc=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return v(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){fu(this.inner,(function(t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return du(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Ec=new pu(Uo.comparator);function Cc(){return Ec}var Nc=new pu(Uo.comparator);function Rc(){for(var e=Nc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Ac(e){var t=Nc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Pc(){return Oc()}function Dc(){return Oc()}function Oc(){return new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Lc=new pu(Uo.comparator),Mc=new mu(Uo.comparator);function Fc(){for(var e=Mc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Uc=new mu(No);function Vc(){return Uc}var qc=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return v(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,jc.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Do.min(),i,Vc(),Cc(),Fc())}}]),e}(),jc=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return v(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Fc(),Fc(),Fc())}}]),e}(),zc=v((function e(t,n,r,i){d(this,e),this.Tt=t,this.removedTargetIds=n,this.key=r,this.Et=i})),Bc=v((function e(t,n){d(this,e),this.targetId=t,this.At=n})),Wc=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_u.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Hc=function(){function e(){d(this,e),this.Rt=0,this.bt=Qc(),this.Pt=_u.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}return v(e,[{key:"current",get:function(){return this.vt}},{key:"resumeToken",get:function(){return this.Pt}},{key:"St",get:function(){return 0!==this.Rt}},{key:"Dt",get:function(){return this.Vt}},{key:"Ct",value:function(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}},{key:"xt",value:function(){var e=Fc(),t=Fc(),n=Fc();return this.bt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fo()}})),new jc(this.Pt,this.vt,e,t,n)}},{key:"Nt",value:function(){this.Vt=!1,this.bt=Qc()}},{key:"kt",value:function(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}},{key:"Ot",value:function(e){this.Vt=!0,this.bt=this.bt.remove(e)}},{key:"Mt",value:function(){this.Rt+=1}},{key:"Ft",value:function(){this.Rt-=1}},{key:"$t",value:function(){this.Vt=!0,this.vt=!0}}]),e}(),Kc=function(){function e(t){d(this,e),this.Bt=t,this.Lt=new Map,this.Ut=Cc(),this.qt=Gc(),this.Kt=new mu(No)}return v(e,[{key:"Gt",value:function(e){var t,n=y(e.Tt);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Et&&e.Et.isFoundDocument()?this.Qt(r,e.Et):this.jt(r,e.key,e.Et)}}catch(u){n.e(u)}finally{n.f()}var i,a=y(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.jt(o,e.key,e.Et)}}catch(u){a.e(u)}finally{a.f()}}},{key:"Wt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.zt(n);switch(e.state){case 0:t.Ht(n)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||t.removeTarget(n);break;case 3:t.Ht(n)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:t.Ht(n)&&(t.Jt(n),r.Ct(e.resumeToken));break;default:fo()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((function(e,r){n.Ht(r)&&t(r)}))}},{key:"Yt",value:function(e){var t=e.targetId,n=e.At.count,r=this.Xt(t);if(r){var i=r.target;if(ss(i))if(0===n){var a=new Uo(i.path);this.jt(t,a,rs.newNoDocument(a,Do.min()))}else po(1===n);else this.Zt(t)!==n&&(this.Jt(t),this.Kt=this.Kt.add(t))}}},{key:"te",value:function(e){var t=this,n=new Map;this.Lt.forEach((function(r,i){var a=t.Xt(i);if(a){if(r.current&&ss(a.target)){var o=new Uo(a.target.path);null!==t.Ut.get(o)||t.ee(i,o)||t.jt(i,o,rs.newNoDocument(o,e))}r.Dt&&(n.set(i,r.xt()),r.Nt())}}));var r=Fc();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Xt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Ut.forEach((function(t,n){return n.setReadTime(e)}));var i=new qc(e,n,this.Kt,this.Ut,r);return this.Ut=Cc(),this.qt=Gc(),this.Kt=new mu(No),i}},{key:"Qt",value:function(e,t){if(this.Ht(e)){var n=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,n),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}}},{key:"jt",value:function(e,t,n){if(this.Ht(e)){var r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),n&&(this.Ut=this.Ut.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Lt.delete(e)}},{key:"Zt",value:function(e){var t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Mt",value:function(e){this.zt(e).Mt()}},{key:"zt",value:function(e){var t=this.Lt.get(e);return t||(t=new Hc,this.Lt.set(e,t)),t}},{key:"ne",value:function(e){var t=this.qt.get(e);return t||(t=new mu(No),this.qt=this.qt.insert(e,t)),t}},{key:"Ht",value:function(e){var t=null!==this.Xt(e);return t||so("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Xt",value:function(e){var t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}},{key:"Jt",value:function(e){var t=this;this.Lt.set(e,new Hc),this.Bt.getRemoteKeysForTarget(e).forEach((function(n){t.jt(e,n,null)}))}},{key:"ee",value:function(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Gc(){return new pu(Uo.comparator)}function Qc(){return new pu(Uo.comparator)}var Yc={asc:"ASCENDING",desc:"DESCENDING"},$c={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xc=v((function e(t,n){d(this,e),this.databaseId=t,this.gt=n}));function Jc(e,t){return e.gt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Zc(e,t){return e.gt?t.toBase64():t.toUint8Array()}function el(e,t){return Jc(e,t.toTimestamp())}function tl(e){return po(!!e),Do.fromTimestamp(function(e){var t=xu(e);return new Po(t.seconds,t.nanos)}(e))}function nl(e,t){return function(e){return new Lo(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function rl(e){var t=Lo.fromString(e);return po(Sl(t)),t}function il(e,t){return nl(e.databaseId,t.path)}function al(e,t){var n=rl(t);if(n.get(1)!==e.databaseId.projectId)throw new mo(yo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mo(yo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Uo(cl(n))}function ol(e,t){return nl(e.databaseId,t)}function ul(e){var t=rl(e);return 4===t.length?Lo.emptyPath():cl(t)}function sl(e){return new Lo(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function cl(e){return po(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ll(e,t,n){return{name:il(e,t),fields:n.value.mapValue.fields}}function hl(e,t,n){var r=al(e,t.name),i=tl(t.updateTime),a=new ts({mapValue:{fields:t.fields}}),o=rs.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function fl(e,t){return"found"in t?function(e,t){po(!!t.found),t.found.name,t.found.updateTime;var n=al(e,t.found.name),r=tl(t.found.updateTime),i=new ts({mapValue:{fields:t.found.fields}});return rs.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){po(!!t.missing),po(!!t.readTime);var n=al(e,t.missing),r=tl(t.readTime);return rs.newNoDocument(n,r)}(e,t):fo()}function dl(e,t){var n;if(t instanceof pc)n={update:ll(e,t.key,t.value)};else if(t instanceof _c)n={delete:il(e,t.key)};else if(t instanceof vc)n={update:ll(e,t.key,t.data),updateMask:Tl(t.fieldMask)};else{if(!(t instanceof bc))return fo();n={verify:il(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof $s)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Xs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Zs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof tc)return{fieldPath:t.field.canonicalString(),increment:n.yt};throw fo()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:el(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fo()}(e,t.precondition)),n}function pl(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?oc.updateTime(tl(e.updateTime)):void 0!==e.exists?oc.exists(e.exists):oc.none()}(t.currentDocument):oc.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)po("REQUEST_TIME"===t.setToServerValue),n=new $s;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Xs(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Zs(i)}else"increment"in t?n=new tc(e,t.increment):fo();var a=Fo.fromServerFormat(t.fieldPath);return new ic(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=al(e,t.update.name),a=new ts({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new wu(t.map((function(e){return Fo.fromServerFormat(e)})))}(t.updateMask);return new vc(i,a,o,n,r)}return new pc(i,a,n,r)}if(t.delete){var u=al(e,t.delete);return new _c(u,n)}if(t.verify){var s=al(e,t.verify);return new bc(s,n)}return fo()}function vl(e,t){return{documents:[ol(e,t.path)]}}function yl(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ol(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ol(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Gu(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NAN"}};if(Ku(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gu(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NOT_NAN"}};if(Ku(e.value))return{unaryFilter:{field:_l(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_l(e.field),op:wl(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:_l(e.field),direction:kl(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.gt||Au(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function ml(e){var t=ul(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){po(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=gl(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new bs(bl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Au(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new _s(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new _s(n,t)}(n.endAt)),Es(t,i,u,o,s,"F",c,l)}function gl(e){return e?void 0!==e.unaryFilter?[Il(e)]:void 0!==e.fieldFilter?[xl(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return gl(e)})).reduce((function(e,t){return e.concat(t)})):fo():[]}function kl(e){return Yc[e]}function wl(e){return $c[e]}function _l(e){return{fieldPath:e.canonicalString()}}function bl(e){return Fo.fromServerFormat(e.fieldPath)}function xl(e){return fs.create(bl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fo()}}(e.fieldFilter.op),e.fieldFilter.value)}function Il(e){switch(e.unaryFilter.op){case"IS_NAN":var t=bl(e.unaryFilter.field);return fs.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=bl(e.unaryFilter.field);return fs.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=bl(e.unaryFilter.field);return fs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=bl(e.unaryFilter.field);return fs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fo()}}function Tl(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Sl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function El(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Nl(t)),t=Cl(e.get(n),t);return Nl(t)}function Cl(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Nl(e){return e+"\x01\x01"}function Rl(e){var t=e.length;if(po(t>=2),2===t)return po("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Lo.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&fo(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:fo()}a=o+2}return new Lo(r)}var Al=["userId","batchId"];function Pl(e,t){return[e,El(t)]}function Dl(e,t,n){return[e,El(t),n]}var Ol={},Ll=["prefixPath","collectionGroup","readTime","documentId"],Ml=["prefixPath","collectionGroup","documentId"],Fl=["collectionGroup","readTime","prefixPath","documentId"],Ul=["canonicalId","targetId"],Vl=["targetId","path"],ql=["path","targetId"],jl=["collectionId","parent"],zl=["indexId","uid"],Bl=["uid","sequenceNumber"],Wl=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Hl=["indexId","uid","orderedDocumentKey"],Kl=["userId","collectionPath","documentId"],Gl=["userId","collectionPath","largestBatchId"],Ql=["userId","collectionGroup","largestBatchId"],Yl=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),$l=[].concat(u(Yl),["documentOverlays"]),Xl=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Jl=Xl,Zl=[].concat(Jl,["indexConfiguration","indexState","indexEntries"]),eh=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ie=e,i.currentSequenceNumber=r,i}return v(n)}(Yo);function th(e,t){var n=vo(e);return eu.M(n.ie,t)}var nh=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return v(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&lc(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=y(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=hc(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=y(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=hc(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Dc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=cc(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Do.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Fc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ro(this.mutations,e.mutations,(function(e,t){return dc(e,t)}))&&Ro(this.baseMutations,e.baseMutations,(function(e,t){return dc(e,t)}))}}]),e}(),rh=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return v(e,null,[{key:"from",value:function(t,n,r){po(t.mutations.length===r.length);for(var i=Lc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),ih=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return v(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),ah=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Do.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Do.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_u.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return v(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),oh=v((function e(t){d(this,e),this.re=t}));function uh(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:sh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:il(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Jc(e,t.version.toTimestamp())}}(e.re,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ch(t.version)};else{if(!t.isUnknownDocument())return fo();r.unknownDocument={path:n.path.toArray(),version:ch(t.version)}}return r}function sh(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ch(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function lh(e){var t=new Po(e.seconds,e.nanoseconds);return Do.fromTimestamp(t)}function hh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return pl(e.re,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return pl(e.re,t)})),u=Po.fromMillis(t.localWriteTimeMs);return new nh(t.batchId,u,n,o)}function fh(e){var t,n,r=lh(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?lh(e.lastLimboFreeSnapshotVersion):Do.min();return void 0!==e.query.documents?(po(1===(n=e.query).documents.length),t=Os(Cs(ul(n.documents[0])))):t=function(e){return Os(ml(e))}(e.query),new ah(t,e.targetId,0,e.lastListenSequenceNumber,r,i,_u.fromBase64String(e.resumeToken))}function dh(e,t){var n,r=ch(t.snapshotVersion),i=ch(t.lastLimboFreeSnapshotVersion);n=ss(t.target)?vl(e.re,t.target):yl(e.re,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:os(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function ph(e){var t=ml({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ls(t,t.limit,"L"):t}function vh(e,t){return new ih(t.largestBatchId,pl(e.re,t.overlayMutation))}function yh(e,t){var n=t.path.lastSegment();return[e,El(t.path.popLast()),n]}function mh(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:ch(r.readTime),documentKey:El(r.documentKey.path),largestBatchId:r.largestBatchId}}var gh=function(){function e(){d(this,e)}return v(e,[{key:"getBundleMetadata",value:function(e,t){return kh(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:lh(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return kh(e).put({bundleId:(n=t).id,createTime:ch(tl(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return wh(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:ph(t.bundledQuery),readTime:lh(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return wh(e).put(function(e){return{name:e.name,readTime:ch(tl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function kh(e){return th(e,"bundles")}function wh(e){return th(e,"namedQueries")}var _h=function(){function e(t,n){d(this,e),this.It=t,this.userId=n}return v(e,[{key:"getOverlay",value:function(e,t){var n=this;return bh(e).get(yh(this.userId,t)).next((function(e){return e?vh(n.It,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Pc();return Jo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new ih(t,a);i.push(r.ue(e,o))})),Jo.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(El(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(bh(e).Y("collectionPathOverlayIndex",i))})),Jo.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Pc(),a=El(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return bh(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=vh(r.It,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Pc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bh(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=vh(a.It,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"ue",value:function(e,t){return bh(e).put(function(e,t,n){var r=l(yh(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:dl(e.re,n.mutation)}}(this.It,this.userId,t))}}],[{key:"oe",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function bh(e){return th(e,"documentOverlays")}var xh=function(){function e(){d(this,e)}return v(e,[{key:"ce",value:function(e,t){this.ae(e,t),t.he()}},{key:"ae",value:function(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Iu(e.integerValue));else if("doubleValue"in e){var n=Iu(e.doubleValue);isNaN(n)?this.le(t,13):(this.le(t,15),Pu(n)?t.fe(0):t.fe(n))}else if("timestampValue"in e){var r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de("".concat(r.seconds||"")),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Tu(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?$u(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):fo()}},{key:"_e",value:function(e,t){this.le(t,25),this.Ie(e,t)}},{key:"Ie",value:function(e,t){t.de(e)}},{key:"ye",value:function(e,t){var n=e.fields||{};this.le(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this._e(a,t),this.ae(n[a],t)}}},{key:"pe",value:function(e,t){var n=e.values||[];this.le(t,50);var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ae(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ge",value:function(e,t){var n=this;this.le(t,37),Uo.fromName(e).path.forEach((function(e){n.le(t,60),n.Ie(e,t)}))}},{key:"le",value:function(e,t){e.fe(t)}},{key:"we",value:function(e){e.fe(2)}}]),e}();function Ih(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Th(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Ih(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}xh.Te=new xh;var Sh=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return v(e,[{key:"Ee",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ae(n.value),n=t.next();this.Re()}},{key:"be",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Pe(n.value),n=t.next();this.ve()}},{key:"Ve",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{var a=r.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Re()}},{key:"Se",value:function(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{var a=r.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"De",value:function(e){var t=this.Ce(e),n=Th(t);this.xe(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ne",value:function(e){var t=this.Ce(e),n=Th(t);this.xe(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"Me",value:function(){this.Fe(255),this.Fe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ce",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ae",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}},{key:"Pe",value:function(e){var t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}},{key:"Re",value:function(){this.Oe(0),this.Oe(1)}},{key:"ve",value:function(){this.Fe(0),this.Fe(1)}},{key:"Oe",value:function(e){this.xe(1),this.buffer[this.position++]=e}},{key:"Fe",value:function(e){this.xe(1),this.buffer[this.position++]=~e}},{key:"xe",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Eh=function(){function e(t){d(this,e),this.Be=t}return v(e,[{key:"me",value:function(e){this.Be.Ee(e)}},{key:"de",value:function(e){this.Be.Ve(e)}},{key:"fe",value:function(e){this.Be.De(e)}},{key:"he",value:function(){this.Be.ke()}}]),e}(),Ch=function(){function e(t){d(this,e),this.Be=t}return v(e,[{key:"me",value:function(e){this.Be.be(e)}},{key:"de",value:function(e){this.Be.Se(e)}},{key:"fe",value:function(e){this.Be.Ne(e)}},{key:"he",value:function(){this.Be.Me()}}]),e}(),Nh=function(){function e(){d(this,e),this.Be=new Sh,this.Le=new Eh(this.Be),this.Ue=new Ch(this.Be)}return v(e,[{key:"seed",value:function(e){this.Be.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Le:this.Ue}},{key:"$e",value:function(){return this.Be.$e()}},{key:"reset",value:function(){this.Be.reset()}}]),e}(),Rh=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return v(e,[{key:"Ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Ah(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Ph(e.arrayValue,t.arrayValue))?n:0!==(n=Ph(e.directionalValue,t.directionalValue))?n:Uo.comparator(e.documentKey,t.documentKey)}function Ph(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Dh=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ge=t.orderBy,this.Qe=[];var n,r=y(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.dt()?this.je=i:this.Qe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return v(e,[{key:"We",value:function(e){var t=qo(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=jo(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.je){var a=n[r];if(!this.He(this.je,a)||!this.Je(this.Ge[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ge.length||!this.Je(this.Ge[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=y(this.Qe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.He(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"He",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Je",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),Oh=function(){function e(){d(this,e),this.Ye=new Lh}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Ye.add(t),Jo.resolve()}},{key:"getCollectionParents",value:function(e,t){return Jo.resolve(this.Ye.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Jo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Jo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Jo.resolve(null)}},{key:"getIndexType",value:function(e,t){return Jo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Jo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Jo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Jo.resolve(Ko.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Jo.resolve(Ko.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Jo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Jo.resolve()}}]),e}(),Lh=function(){function e(){d(this,e),this.index={}}return v(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mu(Lo.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new mu(Lo.comparator)).toArray()}}]),e}(),Mh=new Uint8Array(0),Fh=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Xe=new Lh,this.Ze=new Sc((function(e){return os(e)}),(function(e,t){return us(e,t)})),this.uid=t.uid||""}return v(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Xe.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Xe.add(t)}));var a={collectionId:r,parent:El(i)};return Uh(e).put(a)}return Jo.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Ao(t),""],!1,!0);return Uh(e).W(r).next((function(e){var r,i=y(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Rl(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=qh(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=jh(e);return a.next((function(e){o.put(mh(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=qh(e),r=jh(e),i=Vh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Vh(e),i=!0,a=new Map;return Jo.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Fc(),o=[];return Jo.forEach(a,(function(i,a){var u;so("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(os(t)));var s=function(e,t){var n=qo(t);if(void 0===n)return null;var r,i=y(cs(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=y(jo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=y(cs(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=y(jo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ls(e,o.fieldPath,e.startAt):hs(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new _s(r,i)}(a,i),h=function(e,t){var n,r=[],i=!0,a=y(jo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?hs(e,o.fieldPath,e.endAt):ls(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new _s(r,i)}(a,i),f=n.nn(i,a,l),d=n.nn(i,a,h),p=n.sn(i,a,c),v=n.rn(i.indexId,s,f,l.inclusive,d,h.inclusive,p);return Jo.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=Uo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Jo.resolve(null)}))}},{key:"tn",value:function(e){var t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}},{key:"rn",value:function(e,t,n,r,i,a,o){for(var s=this,c=(null!=t?t.length:1)*Math.max(n.length,i.length),l=c/(null!=t?t.length:1),h=[],f=function(c){var f=t?s.on(t[c/l]):Mh,d=s.un(e,f,n[c%l],r),p=s.cn(e,f,i[c%l],a),v=o.map((function(t){return s.un(e,f,t,!0)}));h.push.apply(h,u(s.createRange(d,p,v)))},d=0;d<c;++d)f(d);return h}},{key:"un",value:function(e,t,n,r){var i=new Rh(e,Uo.empty(),t,n);return r?i:i.Ke()}},{key:"cn",value:function(e,t,n,r){var i=new Rh(e,Uo.empty(),t,n);return r?i.Ke():i}},{key:"en",value:function(e,t){var n=new Dh(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.We(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return Jo.forEach(this.tn(t),(function(t){return n.en(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new mu(Fo.comparator),r=!1,i=y(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=y(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"an",value:function(e,t){var n,r=new Nh,i=y(jo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);xh.Te.ce(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"on",value:function(e){var t=new Nh;return xh.Te.ce(e,t.qe(0)),t.$e()}},{key:"hn",value:function(e,t){var n=new Nh;return xh.Te.ce(Bu(this.databaseId,t),n.qe(function(e){var t=jo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"sn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Nh);var i,a=0,o=y(jo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=y(r);try{for(l.s();!(u=l.n()).done;){var h=u.value;if(this.ln(t,s.fieldPath)&&Hu(c))r=this.fn(r,s,c);else{var f=h.qe(s.kind);xh.Te.ce(c,f)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.dn(r)}},{key:"nn",value:function(e,t,n){return this.sn(e,t,n.position)}},{key:"dn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"fn",value:function(e,t,n){var r,i=u(e),a=[],o=y(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var s,c=r.value,l=y(i);try{for(l.s();!(s=l.n()).done;){var h=s.value,f=new Nh;f.seed(h.$e()),xh.Te.ce(c,f.qe(t.kind)),a.push(f)}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"ln",value:function(e,t){return!!e.filters.find((function(e){return e instanceof fs&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=qh(e),i=jh(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return Jo.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Bo(t.sequenceNumber,new Ko(lh(t.readTime),new Uo(Rl(t.documentKey)),t.largestBatchId)):Bo.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new zo(Fo.fromServerFormat(n),r)}));return new Vo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:No(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=qh(e),a=jh(e);return this._n(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Jo.forEach(t,(function(t){return a.put(mh(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Jo.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Jo.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Jo.forEach(a,(function(r){return n.wn(e,t,r).next((function(t){var a=n.mn(i,r);return t.isEqual(a)?Jo.resolve():n.gn(e,i,r,t,a)}))}))}))}))}},{key:"yn",value:function(e,t,n,r){return Vh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"pn",value:function(e,t,n,r){return Vh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(n,t.key),t.key.path.toArray()])}},{key:"wn",value:function(e,t,n){var r=Vh(e),i=new mu(Ah);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.hn(n,t)])},(function(e,r){i=i.add(new Rh(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"mn",value:function(e,t){var n=new mu(Ah),r=this.an(t,e);if(null==r)return n;var i=qo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Hu(a)){var o,u=y(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Rh(t.indexId,e.key,this.on(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Rh(t.indexId,e.key,Mh,r));return n}},{key:"gn",value:function(e,t,n,r,i){var a=this;so("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ku(a),s=ku(o);u||s;){var c=!1,l=!1;if(u&&s){var h=n(u,s);h<0?l=!0:h>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ku(o)):l?(i(u),u=ku(a)):(u=ku(a),s=ku(o))}}(r,i,Ah,(function(r){o.push(a.yn(e,t,n,r))}),(function(r){o.push(a.pn(e,t,n,r))})),Jo.waitFor(o)}},{key:"_n",value:function(e){var t=1;return jh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Ah(e,t)})).filter((function(e,t,n){return!t||0!==Ah(e,n[t-1])}));var r=[];r.push(e);var i,a=y(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Ah(o,e),s=Ah(o,t);if(0===u)r[0]=e.Ke();else if(u>0&&s<0)r.push(o),r.push(o.Ke());else if(s>0)break}}catch(h){a.e(h)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Mh,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Mh,[]]));return c}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(zh)}},{key:"getMinOffset",value:function(e,t){var n=this;return Jo.mapArray(this.tn(t),(function(t){return n.en(e,t).next((function(e){return e||fo()}))})).next(zh)}}]),e}();function Uh(e){return th(e,"collectionParents")}function Vh(e){return th(e,"indexEntries")}function qh(e){return th(e,"indexConfiguration")}function jh(e){return th(e,"indexState")}function zh(e){po(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;Go(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Ko(t.readTime,t.documentKey,n)}var Bh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wh=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return v(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Hh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){po(1===u)})));var c,l=[],h=y(n.mutations);try{for(h.s();!(c=h.n()).done;){var f=c.value,d=Dl(t,f.key.path,n.batchId);a.push(i.delete(d)),l.push(f.key)}}catch(p){h.e(p)}finally{h.f()}return Jo.waitFor(a).next((function(){return l}))}function Kh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw fo();t=e.noDocument}return JSON.stringify(t).length}Wh.DEFAULT_COLLECTION_PERCENTILE=10,Wh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wh.DEFAULT=new Wh(41943040,Wh.DEFAULT_COLLECTION_PERCENTILE,Wh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wh.DISABLED=new Wh(-1,0,0);var Gh=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.It=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return v(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Yh(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=$h(e),o=Yh(e);return o.add({}).next((function(u){po("number"==typeof u);var s,c=new nh(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return dl(e.re,t)})),i=n.mutations.map((function(t){return dl(e.re,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.It,i.userId,c),h=[],f=new mu((function(e,t){return No(e.canonicalString(),t.canonicalString())})),d=y(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=Dl(i.userId,p.key.path,u);f=f.add(p.key.path.popLast()),h.push(o.put(l)),h.push(a.put(v,Ol))}}catch(m){d.e(m)}finally{d.f()}return f.forEach((function(t){h.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),Jo.waitFor(h).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Yh(e).get(t).next((function(e){return e?(po(e.userId===n.userId),hh(n.It,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?Jo.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Yh(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(po(t.batchId>=r),a=hh(n.It,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Yh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Yh(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return hh(t.It,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Pl(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return $h(e).Z({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],h=u[2],f=Rl(c);if(s===n.userId&&t.path.isEqual(f))return Yh(e).get(h).next((function(e){if(!e)throw fo();po(e.userId===n.userId),a.push(hh(n.It,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new mu(No),i=[];return t.forEach((function(t){var a=Pl(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=$h(e).Z({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],h=Rl(s);u===n.userId&&t.path.isEqual(h)?r=r.add(c):a.done()}));i.push(u)})),Jo.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Pl(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new mu(No);return $h(e).Z({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],h=o[2],f=Rl(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(h)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Yh(e).get(t).next((function(e){if(null===e)throw fo();po(e.userId===n.userId),r.push(hh(n.It,e))})))})),Jo.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Hh(e.ie,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),Jo.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Jo.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return $h(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Rl(e[1]);i.push(a)}else r.done()})).next((function(){po(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Qh(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return Xh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"oe",value:function(t,n,r,i){return po(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Qh(e,t,n){var r=Pl(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return $h(e).Z({range:a,X:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function Yh(e){return th(e,"mutations")}function $h(e){return th(e,"documentMutations")}function Xh(e){return th(e,"mutationQueues")}var Jh=function(){function e(t){d(this,e),this.bn=t}return v(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),Zh=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.It=n}return v(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new Jh(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return Do.fromTimestamp(new Po(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return ef(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return po(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return ef(e).Z((function(o,u){var s=fh(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Jo.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return ef(e).Z((function(e,n){var r=fh(n);t(r)}))}},{key:"Vn",value:function(e){return tf(e).get("targetGlobalKey").next((function(e){return po(null!==e),e}))}},{key:"Sn",value:function(e,t){return tf(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return ef(e).put(dh(this.It,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=os(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ef(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=fh(n);us(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=nf(e);return t.forEach((function(t){var o=El(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Jo.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=nf(e);return Jo.forEach(t,(function(t){var a=El(t.path);return Jo.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=nf(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=nf(e),i=Fc();return r.Z({range:n,X:!0},(function(e,t,n){var r=Rl(e[1]),a=new Uo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=El(t.path),r=IDBKeyRange.bound([n],[Ao(n)],!1,!0),i=0;return nf(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"se",value:function(e,t){return ef(e).get(t).next((function(e){return e?fh(e):null}))}}]),e}();function ef(e){return th(e,"targets")}function tf(e){return th(e,"targetGlobal")}function nf(e){return th(e,"targetDocuments")}function rf(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=No(r,o);return 0===s?No(i,u):s}var af=function(){function e(t){d(this,e),this.xn=t,this.buffer=new mu(rf),this.Nn=0}return v(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();rf(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),of=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return v(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;so("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!ru(e.t0)){e.next=12;break}so("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,$o(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),uf=function(){function e(t,n){d(this,e),this.$n=t,this.params=n}return v(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Jo.resolve(lu.at);var r=new af(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(so("LruGarbageCollector","Garbage collection skipped; disabled"),Jo.resolve(Bh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(so("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Bh):n.Un(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"Un",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(so("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),uo()<=Ce.DEBUG&&so("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Jo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),sf=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new uf(e,t)}(this,n)}return v(e,[{key:"Bn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return cf(e,n)}},{key:"removeReference",value:function(e,t,n){return cf(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return cf(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return Xh(e).tt((function(r){return Qh(e,r,t).next((function(e){return e&&(n=!0),Jo.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Do.min()),nf(e).delete([0,El(o.path)])}))}));i.push(s)}})).next((function(){return Jo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return cf(e,t)}},{key:"Kn",value:function(e,t){var n,r=nf(e),i=lu.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==lu.at&&t(new Uo(Rl(n)),i),i=s,n=u):i=lu.at})).next((function(){i!==lu.at&&t(new Uo(Rl(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function cf(e,t){return nf(e).put(function(e,t){return{targetId:0,path:El(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var lf=function(){function e(){d(this,e),this.changes=new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return v(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,rs.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Jo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),hf=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return vf(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return vf(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],sh(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=rs.newInvalidDocument(t);return vf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yf(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:rs.newInvalidDocument(t)};return vf(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(yf(t))},(function(e,i){r={document:n.jn(t,i),size:Kh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Cc();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=Cc(),i=new pu(Uo.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,Kh(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return Jo.resolve();var r=new mu(gf);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(yf(r.first()),yf(r.last())),a=r.getIterator(),o=a.getNext();return vf(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Uo.fromSegments([].concat(u(t.prefixPath),[t.collectionGroup,t.documentId]));o&&gf(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(yf(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),sh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vf(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Cc(),i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(Uo.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Cc(),o=mf(t,n),u=mf(t,Ko.max());return vf(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(Uo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new df(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return pf(e).get("remoteDocumentGlobalKey").next((function(e){return po(!!e),e}))}},{key:"Qn",value:function(e,t){return pf(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=hl(e.re,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Uo.fromSegments(t.noDocument.path),i=lh(t.noDocument.readTime);n=rs.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return fo();var a=Uo.fromSegments(t.unknownDocument.path),o=lh(t.unknownDocument.version);n=rs.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Po(e[0],e[1]);return Do.fromTimestamp(t)}(t.readTime)),n}(this.It,t);if(!n.isNoDocument()||!n.version.isEqual(Do.min()))return n}return rs.newInvalidDocument(e)}}]),e}();function ff(e){return new hf(e)}var df=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new mu((function(e,t){return No(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=uh(t.Yn.It,o);i=i.add(a.path.popLast());var c=Kh(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=uh(t.Yn.It,o.convertToNoDocument(Do.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),Jo.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(lf);function pf(e){return th(e,"remoteDocumentGlobal")}function vf(e){return th(e,"remoteDocumentsV14")}function yf(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function mf(e,t){var n=t.documentKey.path.toArray();return[e,sh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function gf(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=No(n[a],r[a]))return i;return(i=No(n.length,r.length))||((i=No(n[n.length-2],r[r.length-2]))||No(n[n.length-1],r[r.length-1]))}var kf=v((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),wf=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return v(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.getBaseDocument(e,t,r)})).next((function(e){return null!==r&&hc(r.mutation,e,wu.empty(),Po.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Fc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fc(),i=Pc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Rc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Pc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Fc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Cc(),a=Oc(),o=Oc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof vc)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),hc(o.mutation,t,o.mutation.getFieldMask(),Po.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new kf(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Oc(),i=new pu((function(e,t){return e-t})),a=Fc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=y(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||wu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Fc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Dc();c.forEach((function(e){if(!a.has(e)){var n=cc(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Jo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return Uo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ps(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Jo.resolve(Pc()),u=-1,s=a;return o.next((function(t){return Jo.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Jo.resolve():i.getBaseDocument(e,t,n).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Fc())})).next((function(e){return{batchId:u,changes:Ac(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Uo(t)).next((function(e){var t=Rc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Rc();return this.indexManager.getCollectionParents(e,i).next((function(o){return Jo.forEach(o,(function(o){var u=function(e,t){return new Ss(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,rs.newInvalidDocument(n)))}));var n=Rc();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&hc(a.mutation,i,wu.empty(),Po.now()),Vs(t,i)&&(n=n.insert(r,i))})),n}))}},{key:"getBaseDocument",value:function(e,t,n){return null===n||1===n.mutation.type?this.remoteDocumentCache.getEntry(e,t):Jo.resolve(rs.newInvalidDocument(t))}}]),e}(),_f=function(){function e(t){d(this,e),this.It=t,this.Zn=new Map,this.ts=new Map}return v(e,[{key:"getBundleMetadata",value:function(e,t){return Jo.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:tl(n.createTime)}),Jo.resolve()}},{key:"getNamedQuery",value:function(e,t){return Jo.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:ph(e.bundledQuery),readTime:tl(e.readTime)}}(t)),Jo.resolve()}}]),e}(),bf=function(){function e(){d(this,e),this.overlays=new pu(Uo.comparator),this.es=new Map}return v(e,[{key:"getOverlay",value:function(e,t){return Jo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Pc();return Jo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.ue(e,t,i)})),Jo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),Jo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Pc(),i=t.length+1,a=new Uo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Jo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new pu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Pc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Pc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Jo.resolve(s)}},{key:"ue",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new ih(t,n));var a=this.es.get(t);void 0===a&&(a=Fc(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),xf=function(){function e(){d(this,e),this.ns=new mu(If.ss),this.rs=new mu(If.os)}return v(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new If(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new If(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new Uo(new Lo([])),r=new If(n,e),i=new If(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new Uo(new Lo([])),n=new If(t,e),r=new If(t,e+1),i=Fc();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new If(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),If=function(){function e(t,n){d(this,e),this.key=t,this._s=n}return v(e,null,[{key:"ss",value:function(e,t){return Uo.comparator(e.key,t.key)||No(e._s,t._s)}},{key:"os",value:function(e,t){return No(e._s,t._s)||Uo.comparator(e.key,t.key)}}]),e}(),Tf=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new mu(If.ss)}return v(e,[{key:"checkEmpty",value:function(e){return Jo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new nh(i,t,n,r);this.mutationQueue.push(a);var o,u=y(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new If(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Jo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Jo.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return Jo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Jo.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Jo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new If(t,0),i=new If(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),Jo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new mu(No);return t.forEach((function(e){var t=new If(e,0),i=new If(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),Jo.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Uo.isDocumentKey(i)||(i=i.child(""));var a=new If(new Uo(i),0),o=new mu(No);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),Jo.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;po(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return Jo.forEach(t.mutations,(function(i){var a=new If(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new If(t,0),r=this.gs.firstAfterOrEqual(n);return Jo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Jo.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),Sf=function(){function e(t){d(this,e),this.Es=t,this.docs=new pu(Uo.comparator),this.size=0}return v(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Jo.resolve(n?n.document.mutableCopy():rs.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Cc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():rs.newInvalidDocument(e))})),Jo.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Cc(),i=new Uo(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||Go(Ho(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return Jo.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){fo()}},{key:"As",value:function(e,t){return Jo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new Ef(this)}},{key:"getSize",value:function(e){return Jo.resolve(this.size)}}]),e}(),Ef=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).Yn=e,r}return v(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),Jo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(lf),Cf=function(){function e(t){d(this,e),this.persistence=t,this.Rs=new Sc((function(e){return os(e)}),us),this.lastRemoteSnapshotVersion=Do.min(),this.highestTargetId=0,this.bs=0,this.Ps=new xf,this.targetCount=0,this.vs=Jh.Pn()}return v(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),Jo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Jo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Jo.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),Jo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),Jo.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new Jh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,Jo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),Jo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Jo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Jo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Jo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return Jo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),Jo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Jo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),Jo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return Jo.resolve(n)}},{key:"containsKey",value:function(e,t){return Jo.resolve(this.Ps.containsKey(t))}}]),e}(),Nf=function(){function e(t,n){var r=this;d(this,e),this.Vs={},this.overlays={},this.Ss=new lu(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new Cf(this),this.indexManager=new Oh,this.remoteDocumentCache=new Sf((function(e){return r.referenceDelegate.xs(e)})),this.It=new oh(n),this.Ns=new _f(this.It)}return v(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new bf,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new Tf(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;so("MemoryPersistence","Starting transaction:",e);var i=new Rf(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return Jo.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Rf=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return v(n)}(Yo),Af=function(){function e(t){d(this,e),this.persistence=t,this.Fs=new xf,this.$s=null}return v(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw fo()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),Jo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),Jo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),Jo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Jo.forEach(this.Ls,(function(r){var i=Uo.fromPath(r);return t.Us(e,i).next((function(e){e||n.removeEntry(i,Do.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Us(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"Us",value:function(e,t){var n=this;return Jo.or([function(){return Jo.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),Pf=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new Zo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Al,{unique:!0}),e.createObjectStore("documentMutations")}(e),Df(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Jo.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Df(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Do.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Al,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Jo.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Kl});t.createIndex("collectionPathOverlayIndex",Gl,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Ql,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ll});t.createIndex("documentKeyIndex",Ml),t.createIndex("collectionGroupIndex",Fl)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:zl}).createIndex("sequenceNumberIndex",Bl,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Wl}).createIndex("documentKeyIndex",Hl,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Kh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return Jo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return Jo.forEach(r,(function(r){po(r.userId===n.userId);var i=hh(t.It,r);return Hh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Lo(n),o=function(e){return[0,El(e)]}(a);r.push(t.get(o).next((function(n){return n?Jo.resolve():function(n){return t.put({targetId:0,path:El(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Jo.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:jl});var n=t.store("collectionParents"),r=new Lh,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:El(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new Lo(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],Rl(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=fh(r),a=dh(t.It,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new Uo(Lo.fromString(i.document.name).popFirst(5)):i.noDocument?Uo.fromSegments(i.noDocument.path):i.unknownDocument?Uo.fromSegments(i.unknownDocument.path):fo()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Jo.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=ff(this.It),a=new Nf(Af.Bs,this.It.re);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Fc();hh(n.It,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Jo.forEach(r,(function(e,r){var o=new io(r),u=_h.oe(n.It,o),s=a.getIndexManager(o),c=Gh.oe(o,n.It,s,a.referenceDelegate);return new wf(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new eh(t,lu.at),e).next()}))}))}}]),e}();function Df(e){e.createObjectStore("targetDocuments",{keyPath:Vl}).createIndex("documentTargetsIndex",ql,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ul,{unique:!0}),e.createObjectStore("targetGlobal")}var Of="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Lf=function(){function e(t,n,r,i,a,o,u,s,c,l){var h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new mo(yo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new sf(this,i),this.ii=n+"main",this.It=new oh(s),this.ri=new eu(this.ii,this.Xs,new Pf(this.It)),this.Cs=new Zh(this.referenceDelegate,this.It),this.remoteDocumentCache=ff(this.It),this.Ns=new gh,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&co("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return v(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new mo(yo.FAILED_PRECONDITION,Of);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new lu(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=xe(_e().mark((function n(r){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=xe(_e().mark((function t(n){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Ff(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(ru(t))return so("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return so("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return Mf(e).get("owner").next((function(e){return Jo.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return Ff(e).delete(this.clientId)}},{key:"yi",value:function(){var e=xe(_e().mark((function e(){var t,n,r,i,a=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=th(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Jo.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=y(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?Jo.resolve(!0):Mf(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new mo(yo.FAILED_PRECONDITION,Of);return!1}}return!(!t.networkEnabled||!t.inForeground)||Ff(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&so("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=xe(_e().mark((function e(){var t=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new eh(e,lu.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Ff(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return Gh.oe(e,this.It,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Fh(e,this.It.re.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return _h.oe(this.It,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;so("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?Zl:14===i?Jl:13===i?Xl:12===i?$l:11===i?Yl:void fo();return this.ri.runTransaction(e,o,u,(function(i){return a=new eh(i,r.Ss?r.Ss.next():lu.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw co("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new mo(yo.FAILED_PRECONDITION,Qo);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return Mf(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new mo(yo.FAILED_PRECONDITION,Of)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Mf(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=Mf(e);return n.get("owner").next((function(e){return t.mi(e)?(so("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Jo.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(co("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return so("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return co("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(dn){co("Failed to set zombie client id.",dn)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(dn){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return eu.C()}}]),e}();function Mf(e){return th(e,"owner")}function Ff(e){return th(e,"clientMetadata")}function Uf(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Vf=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return v(e,null,[{key:"Ci",value:function(t,n){var r,i=Fc(),a=Fc(),o=y(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),qf=function(){function e(){d(this,e),this.xi=!1}return v(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(Ns(t))return Jo.resolve(null);var r=Os(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ls(t,null,"F"),r=Os(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Fc.apply(void 0,u(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,Ls(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return Ns(t)||r.isEqual(Do.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(uo()<=Ce.DEBUG&&so("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Us(t)),i.Bi(e,o,t,Wo(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new mu(js(e));return t.forEach((function(t,r){Vs(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return uo()<=Ce.DEBUG&&so("QueryEngine","Using full collection scan to execute query:",Us(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ko.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),jf=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Li=n,this.It=i,this.Ui=new pu(No),this.qi=new Sc((function(e){return os(e)}),us),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return v(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wf(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Ui)}))}}]),e}();function zf(e,t,n,r){return new jf(e,t,n,r)}function Bf(e,t){return Wf.apply(this,arguments)}function Wf(){return Wf=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Fc(),s=y(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,h=y(c.mutations);try{for(h.s();!(l=h.n()).done;){var f=l.value;u=u.add(f.key)}}catch(w){h.e(w)}finally{h.f()}}}catch(w){s.e(w)}finally{s.f()}var d,p=y(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,g=y(v.mutations);try{for(g.s();!(m=g.n()).done;){var k=m.value;u=u.add(k.key)}}catch(w){g.e(w)}finally{g.f()}}}catch(w){p.e(w)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Wf.apply(this,arguments)}function Hf(e,t){var n=vo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Jo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);po(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Fc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Kf(e){var t=vo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function Gf(e,t){var n=vo(e),r=t.snapshotVersion,i=n.Ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.Ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(_u.EMPTY_BYTE_STRING,Do.min()).withLastLimboFreeSnapshotVersion(Do.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=Cc(),s=Fc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Qf(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(Do.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Jo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Ui=i,e}))}function Qf(e,t,n){var r=Fc(),i=Fc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Cc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Do.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):so("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function Yf(e,t){var n=vo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function $f(e,t){var n=vo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,Jo.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new ah(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ui=n.Ui.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Xf(e,t,n){return Jf.apply(this,arguments)}function Jf(){return Jf=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=vo(t),a=i.Ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ru(e.t1)){e.next=12;break}throw e.t1;case 12:so("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Ui=i.Ui.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Jf.apply(this,arguments)}function Zf(e,t,n){var r=vo(e),i=Do.min(),a=Fc();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=vo(e),i=r.qi.get(n);return void 0!==i?Jo.resolve(r.Ui.get(i)):r.Cs.getTargetData(t,n)}(r,e,Os(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:Do.min(),n?a:Fc())})).next((function(e){return nd(r,qs(t),e),{documents:e,Hi:a}}))}))}function ed(e,t){var n=vo(e),r=vo(n.Cs),i=n.Ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.se(e,t).next((function(e){return e?e.target:null}))}))}function td(e,t){var n=vo(e),r=n.Ki.get(t)||Do.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,Wo(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return nd(n,t,e),e}))}function nd(e,t,n){var r=e.Ki.get(t)||Do.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function rd(e,t,n,r){return id.apply(this,arguments)}function id(){return id=xe(_e().mark((function e(t,n,r,i){var a,o,u,s,c,l,h,f,d,p;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=vo(t),o=Fc(),u=Cc(),s=y(r);try{for(s.s();!(c=s.n()).done;)l=c.value,h=n.Ji(l.metadata.name),l.document&&(o=o.add(h)),(f=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(h,f)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,$f(a,function(e){return Os(Cs(Lo.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Qf(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),id.apply(this,arguments)}function ad(e,t){return od.apply(this,arguments)}function od(){return od=xe(_e().mark((function e(t,n){var r,i,a,o=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Fc(),e.next=3,$f(t,Os(ph(n.bundledQuery)));case 3:return i=e.sent,a=vo(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=tl(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(_u.EMPTY_BYTE_STRING,t);return a.Ui=a.Ui.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),od.apply(this,arguments)}function ud(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function sd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function cd(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var ld=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return v(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new mo(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(co("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),hd=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return v(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new mo(i.error.code,i.error.message))),a?new e(t,i.state,r):(co("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),fd=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return v(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Vc(),o=0;i&&o<r.activeTargetIds.length;++o)i=Du(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(co("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),dd=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return v(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(co("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),pd=function(){function e(){d(this,e),this.activeTargetIds=Vc()}return v(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),vd=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new pu(No),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=ud(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new pd),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return v(e,[{key:"start",value:function(){var e=xe(_e().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h,f=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=y(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(ud(this.persistenceKey,i)))&&(o=fd.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=y(this.cr);try{for(c.s();!(l=c.n()).done;)h=l.value,this.rr(h)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(cd(this.persistenceKey,e));if(n){var r=hd.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(cd(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return so("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){so("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){so("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(so("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void co("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(xe(_e().mark((function e(){var r,i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=lu.at;if(null!=e)try{var n=JSON.parse(e);po("number"==typeof n),t=n}catch(e){co("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==lu.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new ld(this.currentUser,e,t,n),i=sd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=sd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=cd(this.persistenceKey,e),i=new hd(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return fd.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return ld.Zi(new io(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return hd.Zi(r,t)}},{key:"yr",value:function(e){return dd.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:so("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=Vc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),yd=function(){function e(){d(this,e),this.Lr=new pd,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return v(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.Ur[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ur[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ur[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new pd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),md=function(){function e(){d(this,e)}return v(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),gd=function(){function e(){var t=this;d(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return v(e,[{key:"qr",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){so("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=y(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){so("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=y(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),kd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},wd=function(){function e(t){d(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return v(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),_d=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return v(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new no;o.setWithCredentials(!0),o.listenOnce(Xa.COMPLETE,(function(){var t;try{switch(o.getLastErrorCode()){case $a.NO_ERROR:var n=o.getResponseJson();so("Connection","XHR received:",JSON.stringify(n)),i(n);break;case $a.TIMEOUT:so("Connection",'RPC "'+e+'" timed out'),a(new mo(yo.DEADLINE_EXCEEDED,"Request time out"));break;case $a.HTTP_ERROR:var r=o.getStatus();if(so("Connection",'RPC "'+e+'" failed with status:',r,"response text:",o.getResponseText()),r>0){var u=o.getResponseJson();Array.isArray(u)&&(u=u[0]);var s=null===(t=u)||void 0===t?void 0:t.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(yo).indexOf(t)>=0?t:yo.UNKNOWN}(s.status);a(new mo(c,s.message))}else a(new mo(yo.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new mo(yo.UNAVAILABLE,"Connection failed."));break;default:fo()}}finally{so("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Qa(),a=Ya(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new eo({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");so("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,h=new wd({Hr:function(e){l?so("Connection","Not sending because WebChannel is closed:",e):(c||(so("Connection","Opening WebChannel transport."),s.open(),c=!0),so("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),f=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return f(s,to.EventType.OPEN,(function(){l||so("Connection","WebChannel transport opened.")})),f(s,to.EventType.CLOSE,(function(){l||(l=!0,so("Connection","WebChannel transport closed"),h.io())})),f(s,to.EventType.ERROR,(function(e){l||(l=!0,lo("Connection","WebChannel transport errored:",e),h.io(new mo(yo.UNAVAILABLE,"The operation could not be completed")))})),f(s,to.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];po(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){so("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=kc[e];if(void 0!==t)return Tc(t)}(a),u=i.message;void 0===o&&(o=yo.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,h.io(new mo(o,u)),s.close()}else so("Connection","WebChannel received:",n),h.ro(n)}})),f(a,Ja.STAT_EVENT,(function(e){e.stat===Za.PROXY?so("Connection","Detected buffering proxy"):e.stat===Za.NOPROXY&&so("Connection","Detected no buffering proxy")})),setTimeout((function(){h.so()}),0),h}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return v(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);so("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return so("RestConnection","Received: ",e),e}),(function(t){throw lo("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+ao,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=kd[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function bd(){return"undefined"!=typeof window?window:null}function xd(){return"undefined"!=typeof document?document:null}function Id(e){return new Xc(e,!0)}var Td=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return v(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&so("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Sd=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Td(t,n)}return v(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.Uo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===yo.RESOURCE_EXHAUSTED?(co(n.toString()),co("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===yo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new mo(yo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(xe(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return so("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(so("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Ed=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).It=o,s}return v(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fo()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.gt?(po(void 0===t||"string"==typeof t),_u.fromBase64String(t||"")):(po(void 0===t||t instanceof Uint8Array),_u.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?yo.UNKNOWN:Tc(e.code);return new mo(t,e.message||"")}(o);n=new Wc(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=al(e,s.document.name),l=tl(s.document.updateTime),h=new ts({mapValue:{fields:s.document.fields}}),f=rs.newFoundDocument(c,l,h),d=s.targetIds||[],p=s.removedTargetIds||[];n=new zc(d,p,f.key,f)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var y=al(e,v.document),m=v.readTime?tl(v.readTime):Do.min(),g=rs.newNoDocument(y,m),k=v.removedTargetIds||[];n=new zc([],k,g.key,g)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=al(e,w.document),b=w.removedTargetIds||[];n=new zc([],b,_,null)}else{if(!("filter"in t))return fo();t.filter;var x=t.filter;x.targetId;var I=x.count||0,T=new xc(I),S=x.targetId;n=new Bc(S,T)}return n}(this.It,e),n=function(e){if(!("targetChange"in e))return Do.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Do.min():t.readTime?tl(t.readTime):Do.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=sl(this.It),t.addTarget=function(e,t){var n,r=t.target;return(n=ss(r)?{documents:vl(e,r)}:{query:yl(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Zc(e,t.resumeToken):t.snapshotVersion.compareTo(Do.min())>0&&(n.readTime=Jc(e,t.snapshotVersion.toTimestamp())),n}(this.It,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return fo()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.It,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=sl(this.It),t.removeTarget=e,this.Bo(t)}}]),n}(Sd),Cd=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).It=o,s.Jo=!1,s}return v(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Xt(w(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(po(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(po(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?tl(e.updateTime):tl(t);return n.isEqual(Do.min())&&(n=tl(t)),new ac(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=tl(e.commitTime);return this.listener.Zo(n,t)}return po(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=sl(this.It),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return dl(t.It,e)}))};this.Bo(n)}}]),n}(Sd),Nd=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.It=a,o.nu=!1,o}return v(n,[{key:"su",value:function(){if(this.nu)throw new mo(yo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===yo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new mo(yo.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===yo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new mo(yo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return v((function e(){d(this,e)}))}());var Rd=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return v(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(co(t),this.ou=!1):so("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),Ad=v((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr((function(e){r.enqueueAndForget(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=zd(o),!e.t0){e.next=5;break}return so("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=vo(t))._u.add(4),e.next=4,Od(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,Pd(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new Rd(r,i)}));function Pd(e){return Dd.apply(this,arguments)}function Dd(){return Dd=xe(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zd(t)){e.next=18;break}n=y(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Dd.apply(this,arguments)}function Od(e){return Ld.apply(this,arguments)}function Ld(){return Ld=xe(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=y(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Ld.apply(this,arguments)}function Md(e,t){var n=vo(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),jd(n)?qd(n):mp(n).ko()&&Ud(n,t))}function Fd(e,t){var n=vo(e),r=mp(n);n.du.delete(t),r.ko()&&Vd(n,t),0===n.du.size&&(r.ko()?r.Fo():zd(n)&&n.gu.set("Unknown"))}function Ud(e,t){e.yu.Mt(t.targetId),mp(e).zo(t)}function Vd(e,t){e.yu.Mt(t),mp(e).Ho(t)}function qd(e){e.yu=new Kc({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},se:function(t){return e.du.get(t)||null}}),mp(e).start(),e.gu.uu()}function jd(e){return zd(e)&&!mp(e).No()&&e.du.size>0}function zd(e){return 0===vo(e)._u.size}function Bd(e){e.yu=void 0}function Wd(e){return Hd.apply(this,arguments)}function Hd(){return Hd=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){Ud(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Hd.apply(this,arguments)}function Kd(e,t){return Gd.apply(this,arguments)}function Gd(){return Gd=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Bd(t),jd(t)?(t.gu.hu(n),qd(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Gd.apply(this,arguments)}function Qd(e,t,n){return Yd.apply(this,arguments)}function Yd(){return Yd=xe(_e().mark((function e(t,n,r){var i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof Wc&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=xe(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=y(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),so("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,$d(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof zc?t.yu.Gt(n):n instanceof Bc?t.yu.Yt(n):t.yu.Wt(n),r.isEqual(Do.min())){e.next=29;break}return e.prev=14,e.next=17,Kf(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.te(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(_u.EMPTY_BYTE_STRING,n.snapshotVersion)),Vd(e,t);var r=new ah(n.target,t,1,n.sequenceNumber);Ud(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),so("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,$d(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Yd.apply(this,arguments)}function $d(e,t,n){return Xd.apply(this,arguments)}function Xd(){return Xd=xe(_e().mark((function e(t,n,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ru(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,Od(t);case 5:t.gu.set("Offline"),r||(r=function(){return Kf(t.localStore)}),t.asyncQueue.enqueueRetryable(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return so("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,Pd(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Xd.apply(this,arguments)}function Jd(e,t){return t().catch((function(n){return $d(e,n,t)}))}function Zd(e){return ep.apply(this,arguments)}function ep(){return ep=xe(_e().mark((function e(t){var n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=vo(t),r=gp(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!tp(n)){e.next=19;break}return e.prev=3,e.next=6,Yf(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,np(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,$d(n,e.t0);case 17:e.next=2;break;case 19:rp(n)&&ip(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),ep.apply(this,arguments)}function tp(e){return zd(e)&&e.fu.length<10}function np(e,t){e.fu.push(t);var n=gp(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function rp(e){return zd(e)&&!gp(e).No()&&e.fu.length>0}function ip(e){gp(e).start()}function ap(e){return op.apply(this,arguments)}function op(){return op=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gp(t).eu();case 1:case"end":return e.stop()}}),e)}))),op.apply(this,arguments)}function up(e){return sp.apply(this,arguments)}function sp(){return sp=xe(_e().mark((function e(t){var n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gp(t),r=y(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),sp.apply(this,arguments)}function cp(e,t,n){return lp.apply(this,arguments)}function lp(){return lp=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=rh.from(i,n,r),e.next=3,Jd(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Zd(t);case 5:case"end":return e.stop()}}),e)}))),lp.apply(this,arguments)}function hp(e,t){return fp.apply(this,arguments)}function fp(){return fp=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&gp(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=xe(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ic(i=n.code)||i===yo.ABORTED){e.next=7;break}return r=t.fu.shift(),gp(t).Mo(),e.next=5,Jd(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Zd(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:rp(t)&&ip(t);case 5:case"end":return e.stop()}}),e)}))),fp.apply(this,arguments)}function dp(e,t){return pp.apply(this,arguments)}function pp(){return pp=xe(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=vo(t)).asyncQueue.verifyOperationInProgress(),so("RemoteStore","RemoteStore received new credentials"),i=zd(r),r._u.add(3),e.next=6,Od(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,Pd(r);case 12:case"end":return e.stop()}}),e)}))),pp.apply(this,arguments)}function vp(e,t){return yp.apply(this,arguments)}function yp(){return yp=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vo(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,Pd(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,Od(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),yp.apply(this,arguments)}function mp(e){return e.pu||(e.pu=function(e,t,n){var r=vo(e);return r.su(),new Ed(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:Wd.bind(null,e),Zr:Kd.bind(null,e),Wo:Qd.bind(null,e)}),e.wu.push(function(){var t=xe(_e().mark((function t(n){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),jd(e)?qd(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:Bd(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function gp(e){return e.Iu||(e.Iu=function(e,t,n){var r=vo(e);return r.su(),new Cd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,n)}(e.datastore,e.asyncQueue,{Yr:ap.bind(null,e),Zr:hp.bind(null,e),tu:up.bind(null,e),Zo:cp.bind(null,e)}),e.wu.push(function(){var t=xe(_e().mark((function t(n){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,Zd(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(so("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var kp=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new go,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return v(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mo(yo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function wp(e,t){if(co("AsyncQueue","".concat(t,": ").concat(e)),ru(e))return new mo(yo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var _p=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||Uo.comparator(e.key,n.key)}:function(e,t){return Uo.comparator(e.key,t.key)},this.keyedMap=Rc(),this.sortedSet=new pu(this.comparator)}return v(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),bp=function(){function e(){d(this,e),this.Tu=new pu(Uo.comparator)}return v(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):fo():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),xp=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return v(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ms(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,_p.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),Ip=v((function e(){d(this,e),this.Au=void 0,this.listeners=[]})),Tp=v((function e(){d(this,e),this.queries=new Sc((function(e){return Fs(e)}),Ms),this.onlineState="Unknown",this.Ru=new Set}));function Sp(e,t){return Ep.apply(this,arguments)}function Ep(){return Ep=xe(_e().mark((function e(t,n){var r,i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vo(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Ip),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=wp(e.t0,"Initialization of query '".concat(Us(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&Pp(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ep.apply(this,arguments)}function Cp(e,t){return Np.apply(this,arguments)}function Np(){return Np=xe(_e().mark((function e(t,n){var r,i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vo(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Np.apply(this,arguments)}function Rp(e,t){var n,r=vo(e),i=!1,a=y(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=y(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}s.Au=o}}}catch(h){a.e(h)}finally{a.f()}i&&Pp(r)}function Ap(e,t,n){var r=vo(e),i=r.queries.get(t);if(i){var a,o=y(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Pp(e){e.Ru.forEach((function(e){e.next()}))}var Dp=function(){function e(t,n,r){d(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return v(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=y(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new xp(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=xp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),Op=function(){function e(t,n){d(this,e),this.ku=t,this.byteLength=n}return v(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),Lp=function(){function e(t){d(this,e),this.It=t}return v(e,[{key:"Ji",value:function(e){return al(this.It,e)}},{key:"Yi",value:function(e){return e.metadata.exists?hl(this.It,e.document,!1):rs.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return tl(e)}}]),e}(),Mp=function(){function e(t,n,r){d(this,e),this.Mu=t,this.localStore=n,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Fp(t)}return v(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=Lo.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new Lp(this.It),i=y(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=y(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Fc()).add(u);n.set(c,l)}}catch(h){s.e(h)}finally{s.f()}}}}catch(h){i.e(h)}finally{i.f()}return n}},{key:"complete",value:function(){var e=xe(_e().mark((function e(){var t,n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rd(this.localStore,new Lp(this.It),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=y(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,ad(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Fp(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Up=v((function e(t){d(this,e),this.key=t})),Vp=v((function e(t){d(this,e),this.key=t})),qp=function(){function e(t,n){d(this,e),this.query=t,this.Uu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Fc(),this.mutatedKeys=Fc(),this.Gu=js(t),this.Qu=new _p(this.Gu)}return v(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new bp,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Vs(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Hu(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Gu(h,s)>0||c&&n.Gu(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(o=o.add(h),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fo()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new xp(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new bp,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Fc(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Vp(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Up(e))})),n}},{key:"tc",value:function(e){this.Uu=e.Hi,this.Ku=Fc();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return xp.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),jp=v((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),zp=v((function e(t){d(this,e),this.key=t,this.nc=!1})),Bp=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Sc((function(e){return Fs(e)}),Ms),this.rc=new Map,this.oc=new Set,this.uc=new pu(Uo.comparator),this.cc=new Map,this.ac=new xf,this.hc={},this.lc=new Map,this.fc=Jh.vn(),this.onlineState="Unknown",this.dc=void 0}return v(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function Wp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=xe(_e().mark((function e(t,n){var r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fv(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,$f(r.localStore,Os(n));case 8:return u=e.sent,r.isPrimaryClient&&Md(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Kp(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Kp(e,t,n,r,i){return Gp.apply(this,arguments)}function Gp(){return Gp=xe(_e().mark((function e(t,n,r,i,a){var o,u,s,c,l,h;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=xe(_e().mark((function e(t,n,r,i){var a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,Zf(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(dv(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Zf(t.localStore,n,!0);case 3:return o=e.sent,u=new qp(n,o.Hi),s=u.Wu(o.documents),c=jc.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),dv(t,r,l.Xu),h=new jp(n,r,u),e.abrupt("return",(t.ic.set(n,h),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Qp(e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=xe(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vo(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!Ms(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Xf(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Fd(r.remoteStore,i.targetId),hv(r,i.targetId)})).catch($o);case 9:e.next=14;break;case 11:return hv(r,i.targetId),e.next=14,Xf(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Yp.apply(this,arguments)}function $p(e,t,n){return Xp.apply(this,arguments)}function Xp(){return Xp=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uv(t),e.prev=1,e.next=4,function(e,t){var n,r,i=vo(e),a=Po.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Fc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Cc(),s=Fc();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=y(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=fc(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new vc(c.key,l,ns(l.value.mapValue),oc.exists(!0)))}}catch(h){s.e(h)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Ac(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new pu(No)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,yv(i,a.changes);case 9:return e.next=11,Zd(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=wp(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Xp.apply(this,arguments)}function Jp(e,t){return Zp.apply(this,arguments)}function Zp(){return Zp=xe(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.prev=1,e.next=4,Gf(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(po(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?po(n.nc):e.removedDocuments.size>0&&(po(n.nc),n.nc=!1))})),e.next=8,yv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,$o(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Zp.apply(this,arguments)}function ev(e,t,n){var r=vo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=vo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=y(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Pp(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function tv(e,t,n){return nv.apply(this,arguments)}function nv(){return nv=xe(_e().mark((function e(t,n,r){var i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=vo(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new pu(Uo.comparator)).insert(o,rs.newNoDocument(o,Do.min())),s=Fc().add(o),c=new qc(Do.min(),new Map,new mu(No),u,s),e.next=9,Jp(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),vv(i),e.next=16;break;case 14:return e.next=16,Xf(i.localStore,n,!1).then((function(){return hv(i,n,r)})).catch($o);case 16:case"end":return e.stop()}}),e)}))),nv.apply(this,arguments)}function rv(e,t){return iv.apply(this,arguments)}function iv(){return iv=xe(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),i=n.batch.batchId,e.prev=1,e.next=4,Hf(r.localStore,n);case 4:return a=e.sent,lv(r,i,null),cv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,yv(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,$o(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),iv.apply(this,arguments)}function av(e,t,n){return ov.apply(this,arguments)}function ov(){return ov=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vo(t),e.prev=1,e.next=4,function(e,t){var n=vo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return po(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,lv(i,n,r),cv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,yv(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,$o(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ov.apply(this,arguments)}function uv(e,t){return sv.apply(this,arguments)}function sv(){return sv=xe(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zd((r=vo(t)).remoteStore)||so("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=vo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=wp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),sv.apply(this,arguments)}function cv(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function lv(e,t,n){var r=vo(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function hv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=y(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||fv(e,t)}))}function fv(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(Fd(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),vv(e))}function dv(e,t,n){var r,i=y(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Up?(e.ac.addReference(a.key,t),pv(e,a)):a instanceof Vp?(so("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||fv(e,a.key)):fo()}}catch(o){i.e(o)}finally{i.f()}}function pv(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(so("SyncEngine","New document in limbo: "+n),e.oc.add(r),vv(e))}function vv(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new Uo(Lo.fromString(t)),r=e.fc.next();e.cc.set(r,new zp(n)),e.uc=e.uc.insert(n,r),Md(e.remoteStore,new ah(Os(Cs(n.path)),r,2,lu.at))}}function yv(e,t,n){return mv.apply(this,arguments)}function mv(){return mv=xe(_e().mark((function e(t,n,r){var i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=vo(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Vf.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=xe(_e().mark((function e(t,n){var r,i,a,o,u,s,c,l;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Jo.forEach(n,(function(t){return Jo.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Jo.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ru(e.t0)){e.next=10;break}throw e.t0;case 10:so("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=y(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Ui=r.Ui.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),mv.apply(this,arguments)}function gv(e,t){return kv.apply(this,arguments)}function kv(){return kv=xe(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=vo(t)).currentUser.isEqual(n)){e.next=11;break}return so("SyncEngine","User change. New user:",n.toKey()),e.next=5,Bf(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new mo(yo.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,yv(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),kv.apply(this,arguments)}function wv(e,t){var n=vo(e),r=n.cc.get(t);if(r&&r.nc)return Fc().add(r.key);var i=Fc(),a=n.rc.get(t);if(!a)return i;var o,u=y(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function _v(e,t){return bv.apply(this,arguments)}function bv(){return bv=xe(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.next=3,Zf(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&dv(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),bv.apply(this,arguments)}function xv(e,t){return Iv.apply(this,arguments)}function Iv(){return Iv=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),e.abrupt("return",td(r.localStore,n).then((function(e){return yv(r,e)})));case 2:case"end":return e.stop()}}),e)}))),Iv.apply(this,arguments)}function Tv(e,t,n,r){return Sv.apply(this,arguments)}function Sv(){return Sv=xe(_e().mark((function e(t,n,r,i){var a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=vo(t),e.next=3,function(e,t){var n=vo(e),r=vo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Jo.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Zd(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(lv(a,n,i||null),cv(a,n),function(e,t){vo(vo(e).mutationQueue).An(t)}(a.localStore,n)):fo();case 11:return e.next=13,yv(a,o);case 13:e.next=16;break;case 15:so("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Sv.apply(this,arguments)}function Ev(e,t){return Cv.apply(this,arguments)}function Cv(){return Cv=xe(_e().mark((function e(t,n){var r,i,a,o,u,s,c,l;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Fv(r=vo(t)),Uv(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Nv(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,vp(r.remoteStore,!0);case 9:o=y(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Md(r.remoteStore,s)}catch(h){o.e(h)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return hv(r,t),Xf(r.localStore,t,!0)})),Fd(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Nv(r,c);case 21:return function(e){var t=vo(e);t.cc.forEach((function(e,n){Fd(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new pu(Uo.comparator)}(r),r.dc=!1,e.next=25,vp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Cv.apply(this,arguments)}function Nv(e,t,n){return Rv.apply(this,arguments)}function Rv(){return Rv=xe(_e().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f,d,p,v,m,g;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=vo(t),a=[],o=[],u=y(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(h=i.rc.get(c))||0===h.length){e.next=34;break}return e.next=11,$f(i.localStore,Os(h[0]));case 11:l=e.sent,f=y(h),e.prev=13,f.s();case 15:if((d=f.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,_v(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),f.e(e.t0);case 29:return e.prev=29,f.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,ed(i.localStore,c);case 36:return g=e.sent,e.next=39,$f(i.localStore,g);case 39:return l=e.sent,e.next=42,Kp(i,Av(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Rv.apply(this,arguments)}function Av(e){return Es(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Pv(e){var t=vo(e);return vo(vo(t.localStore).persistence).vi()}function Dv(e,t,n,r){return Ov.apply(this,arguments)}function Ov(){return Ov=xe(_e().mark((function e(t,n,r,i){var a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=vo(t)).dc){e.next=3;break}return e.abrupt("return",void so("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,td(a.localStore,qs(o[0]));case 10:return u=e.sent,s=qc.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,_u.EMPTY_BYTE_STRING),e.next=14,yv(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Xf(a.localStore,n,!0);case 17:return hv(a,n,i),e.abrupt("break",20);case 19:fo();case 20:case"end":return e.stop()}}),e)}))),Ov.apply(this,arguments)}function Lv(e,t,n){return Mv.apply(this,arguments)}function Mv(){return Mv=xe(_e().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Fv(t)).dc){e.next=45;break}a=y(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return so("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,ed(i.localStore,u);case 12:return s=e.sent,e.next=15,$f(i.localStore,s);case 15:return c=e.sent,e.next=18,Kp(i,Av(s),c.targetId,!1,c.resumeToken);case 18:Md(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=y(r),e.prev=30,f=_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,Xf(i.localStore,t,!1).then((function(){Fd(i.remoteStore,t),hv(i,t)})).catch($o);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((h=l.n()).done){e.next=37;break}return e.delegateYield(f(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Mv.apply(this,arguments)}function Fv(e){var t=vo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Jp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=wv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tv.bind(null,t),t.sc.Wo=Rp.bind(null,t.eventManager),t.sc.wc=Ap.bind(null,t.eventManager),t}function Uv(e){var t=vo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=rv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=av.bind(null,t),t}function Vv(e,t,n){var r=vo(e);(function(){var e=xe(_e().mark((function e(t,n,r){var i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=vo(e),r=tl(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Fp(i)),a=new Mp(i,t.localStore,n.It),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,yv(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=vo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(lo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var qv=function(){function e(){d(this,e),this.synchronizeTabs=!1}return v(e,[{key:"initialize",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.It=Id(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return zf(this.persistence,new qf,e.initialUser,this.It)}},{key:"yc",value:function(e){return new Nf(Af.Bs,this.It)}},{key:"gc",value:function(e){return new yd}},{key:"terminate",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jv=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return v(n,[{key:"initialize",value:function(){var e=xe(_e().mark((function e(t){var r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(w(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,Uv(this.Ac.syncEngine);case 6:return e.next=8,Zd(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return zf(this.persistence,new qf,e.initialUser,this.It)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new of(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new cu(t,this.persistence);return new su(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=Uf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Wh.withCacheSize(this.cacheSizeBytes):Wh.DEFAULT;return new Lf(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,bd(),xd(),this.It,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new yd}}]),n}(qv),zv=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return v(n,[{key:"initialize",value:function(){var e=xe(_e().mark((function e(t){var r,i=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(w(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof vd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:Tv.bind(null,r),$r:Dv.bind(null,r),Br:Lv.bind(null,r),vi:Pv.bind(null,r),Mr:xv.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ev(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=bd();if(!vd.C(t))throw new mo(yo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Uf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(jv),Bv=function(){function e(){d(this,e)}return v(e,[{key:"initialize",value:function(){var e=xe(_e().mark((function e(t,n){var r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ev(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=gv.bind(null,this.syncEngine),e.next=12,vp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Tp}},{key:"createDatastore",value:function(e){var t,n=Id(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new _d(t));return function(e,t,n,r){return new Nd(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ev(o.syncEngine,e,0)},a=gd.C()?new gd:new md,new Ad(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Bp(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=vo(t),so("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,Od(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Wv(e,t,n){if(!n)throw new mo(yo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Hv(e,t,n,r){if(!0===t&&!0===r)throw new mo(yo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Kv(e){if(!Uo.isDocumentKey(e))throw new mo(yo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gv(e){if(Uo.isDocumentKey(e))throw new mo(yo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Qv(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":fo()}function Yv(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mo(yo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Qv(e);throw new mo(yo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function $v(e,t){if(t<=0)throw new mo(yo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Xv=new Map,Jv=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new mo(yo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new mo(yo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Hv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return v(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Zv=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jv({}),this._settingsFrozen=!1}return v(e,[{key:"app",get:function(){if(!this._app)throw new mo(yo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new mo(yo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jv(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wo;switch(e.type){case"gapi":var t=e.client;return new Io(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new mo(yo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Xv.get(e);t&&(so("ComponentProvider","Removing Datastore"),Xv.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function ey(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Yv(e,Zv))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&lo("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=io.MOCK_USER;else{o=X(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new mo(yo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new io(s)}e._authCredentials=new _o(new ko(o,u))}}var ty=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return v(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new ry(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),ny=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return v(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),ry=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,Cs(i)))._path=i,a.type="collection",a}return v(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ty(this.firestore,null,new Uo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(ny);function iy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=we(e),Wv("collection","path",t),e instanceof Zv){var a=Lo.fromString.apply(Lo,[t].concat(r));return Gv(a),new ry(e,null,a)}if(!(e instanceof ty||e instanceof ry))throw new mo(yo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lo.fromString.apply(Lo,[t].concat(r)));return Gv(o),new ry(e.firestore,null,o)}function ay(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=we(e),1===arguments.length&&(t=Co.R()),Wv("doc","path",t),e instanceof Zv){var a=Lo.fromString.apply(Lo,[t].concat(r));return Kv(a),new ty(e,null,new Uo(a))}if(!(e instanceof ty||e instanceof ry))throw new mo(yo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Lo.fromString.apply(Lo,[t].concat(r)));return Kv(o),new ty(e.firestore,e instanceof ry?e.converter:null,new Uo(o))}function oy(e,t){return e=we(e),t=we(t),(e instanceof ty||e instanceof ry)&&(t instanceof ty||t instanceof ry)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function uy(e,t){return e=we(e),t=we(t),e instanceof ny&&t instanceof ny&&e.firestore===t.firestore&&Ms(e._query,t._query)&&e.converter===t.converter}function sy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return xe(_e().mark((function r(){var i;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var cy=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return v(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):co("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),ly=function(){function e(t,n){var r=this;d(this,e),this.Pc=t,this.It=n,this.metadata=new go,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return v(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=xe(_e().mark((function e(){var t,n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new Op(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=xe(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=xe(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),hy=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return v(e,[{key:"lookup",value:function(){var e=xe(_e().mark((function e(t){var n,r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new mo(yo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=xe(_e().mark((function e(t,n){var r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),i=sl(r.It)+"/documents",a={documents:n.map((function(e){return il(r.It,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=fl(r.It,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());po(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new _c(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=xe(_e().mark((function e(){var t,n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Uo.fromPath(t);n.mutations.push(new bc(r,n.precondition(r)))})),e.next=7,function(){var e=xe(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=vo(t),i=sl(r.It)+"/documents",a={writes:n.map((function(e){return dl(r.It,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fo();t=Do.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new mo(yo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Do.min())?oc.exists(!1):oc.updateTime(t):oc.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Do.min()))throw new mo(yo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oc.updateTime(t)}return oc.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),fy=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new Td(this.asyncQueue,"transaction_retry")}return v(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(xe(_e().mark((function t(){var n,r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new hy(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!Au(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Ic(t)}return!1}}]),e}(),dy=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=io.UNAUTHENTICATED,this.clientId=Co.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return so("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return so("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return v(e,[{key:"getConfiguration",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new mo(yo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new go;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(xe(_e().mark((function n(){var r;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=wp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function py(e,t){return vy.apply(this,arguments)}function vy(){return vy=xe(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),so("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Bf(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),vy.apply(this,arguments)}function yy(e,t){return my.apply(this,arguments)}function my(){return my=xe(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,gy(t);case 3:return r=e.sent,so("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return dp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return dp(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),my.apply(this,arguments)}function gy(e){return ky.apply(this,arguments)}function ky(){return ky=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return so("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,py(t,new qv);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),ky.apply(this,arguments)}function wy(e){return _y.apply(this,arguments)}function _y(){return _y=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return so("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,yy(t,new Bv);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}function by(e){return gy(e).then((function(e){return e.persistence}))}function xy(e){return gy(e).then((function(e){return e.localStore}))}function Iy(e){return wy(e).then((function(e){return e.remoteStore}))}function Ty(e){return wy(e).then((function(e){return e.syncEngine}))}function Sy(e){return wy(e).then((function(e){return e.datastore}))}function Ey(e){return Cy.apply(this,arguments)}function Cy(){return Cy=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Wp.bind(null,n.syncEngine),r.onUnlisten=Qp.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),Cy.apply(this,arguments)}function Ny(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new go;return e.asyncQueue.enqueueAndForget(xe(_e().mark((function i(){return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new cy({next:function(a){t.enqueueAndForget((function(){return Cp(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new mo(yo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new mo(yo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Dp(Cs(n.path),a,{includeMetadataChanges:!0,Nu:!0});return Sp(e,o)},i.next=3,Ey(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Ry(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new go;return e.asyncQueue.enqueueAndForget(xe(_e().mark((function i(){return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new cy({next:function(n){t.enqueueAndForget((function(){return Cp(e,o)})),n.fromCache&&"server"===r.source?i.reject(new mo(yo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Dp(n,a,{includeMetadataChanges:!0,Nu:!0});return Sp(e,o)},i.next=3,Ey(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var Ay=function(){function e(){var t=this;d(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Td(this,"async_queue_retry"),this.Wc=function(){var e=xd();e&&so("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=xd();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return v(e,[{key:"isShuttingDown",get:function(){return this.Uc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;var t=xd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.Uc)return new Promise((function(){}));var n=new go;return this.Hc((function(){return t.Uc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=xe(_e().mark((function e(){var t=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ru(e.t0)){e.next=12;break}throw e.t0;case 12:so("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw co("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=kp.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.qc.push(i),i}},{key:"zc",value:function(){this.Kc&&fo()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=y(this.qc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.qc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=y(t.qc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.qc.indexOf(e);this.qc.splice(t,1)}}]),e}();function Py(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=y(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Dy=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new go,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return v(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Oy=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Ay,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return v(n,[{key:"_terminate",value:function(){return this._firestoreClient||My(this),this._firestoreClient.terminate()}}]),n}(Zv);function Ly(e){return e._firestoreClient||My(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function My(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new Nu(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new dy(e._authCredentials,e._appCheckCredentials,e._queue,r)}function Fy(e,t,n){var r=new go;return e.asyncQueue.enqueue(xe(_e().mark((function i(){var a;return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,py(e,n);case 3:return i.next=5,yy(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===yo.FAILED_PRECONDITION||e.code===yo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:lo("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Uy(e){return function(e){return e.asyncQueue.enqueue(xe(_e().mark((function t(){var n,r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,by(e);case 2:return n=t.sent,t.next=5,Iy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=vo(e);return t._u.delete(0),Pd(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ly(e=Yv(e,Oy)))}function Vy(e){return function(e){return e.asyncQueue.enqueue(xe(_e().mark((function t(){var n,r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,by(e);case 2:return n=t.sent,t.next=5,Iy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=vo(t))._u.add(0),e.next=4,Od(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ly(e=Yv(e,Oy)))}function qy(e,t){var n=Ly(e=Yv(e,Oy)),r=new Dy;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new ly(e,t)}(function(e,t){if(e instanceof Uint8Array)return sy(e,t);if(e instanceof ArrayBuffer)return sy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Id(t));e.asyncQueue.enqueueAndForget(xe(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Vv,t.next=3,Ty(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function jy(e,t){return function(e,t){return e.asyncQueue.enqueue(xe(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=vo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,xy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Ly(e=Yv(e,Oy)),t).then((function(t){return t?new ny(e,null,t.query):null}))}function zy(e){if(e._initialized||e._terminated)throw new mo(yo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var By=function(){function e(t){d(this,e),this._byteString=t}return v(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(_u.fromBase64String(t))}catch(t){throw new mo(yo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(_u.fromUint8Array(t))}}]),e}(),Wy=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new mo(yo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Fo(n)}return v(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Hy=v((function e(t){d(this,e),this._methodName=t})),Ky=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new mo(yo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mo(yo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return v(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return No(this._lat,e._lat)||No(this._long,e._long)}}]),e}(),Gy=/^__.*__$/,Qy=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new vc(e,this.data,this.fieldMask,t,this.fieldTransforms):new pc(e,this.data,t,this.fieldTransforms)}}]),e}(),Yy=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return v(e,[{key:"toMutation",value:function(e,t){return new vc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function $y(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fo()}}var Xy=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return v(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return mm(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if($y(this.sa)&&Gy.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),Jy=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.It=r||Id(t)}return v(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Xy({sa:e,methodName:t,fa:n,path:Fo.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}]),e}();function Zy(e){var t=e._freezeSettings(),n=Id(e._databaseId);return new Jy(e._databaseId,!!t.ignoreUndefinedProperties,n)}function em(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);dm("Data must be an object, but it was:",o,r);var u,s,c=hm(r,o);if(a.merge)u=new wu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,h=[],f=y(a.mergeFields);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=pm(t,d,n);if(!o.contains(p))throw new mo(yo.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));gm(h,p)||h.push(p)}}catch(v){f.e(v)}finally{f.f()}u=new wu(h),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Qy(new ts(c),u,s)}var tm=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Hy);function nm(e,t,n){return new Xy({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.It,t.ignoreUndefinedProperties)}var rm=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"_toFieldTransform",value:function(e){return new ic(e.path,new $s)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Hy),im=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=nm(this,e,!0),n=this._a.map((function(e){return lm(e,t)})),r=new Xs(n);return new ic(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Hy),am=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=nm(this,e,!0),n=this._a.map((function(e){return lm(e,t)})),r=new Zs(n);return new ic(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Hy),om=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).wa=r,i}return v(n,[{key:"_toFieldTransform",value:function(e){var t=new tc(e.It,Hs(e.It,this.wa));return new ic(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Hy);function um(e,t,n,r){var i=e.da(1,t,n);dm("Data must be an object, but it was:",i,r);var a=[],o=ts.empty();fu(r,(function(e,r){var u=ym(t,e,n);r=we(r);var s=i.ca(u);if(r instanceof tm)a.push(u);else{var c=lm(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new wu(a);return new Yy(o,u,i.fieldTransforms)}function sm(e,t,n,r,i,a){var o=e.da(1,t,n),u=[pm(t,r,n)],s=[i];if(a.length%2!=0)throw new mo(yo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(pm(t,a[c])),s.push(a[c+1]);for(var l=[],h=ts.empty(),f=u.length-1;f>=0;--f)if(!gm(l,u[f])){var d=u[f],p=s[f];p=we(p);var v=o.ca(d);if(p instanceof tm)l.push(d);else{var y=lm(p,v);null!=y&&(l.push(d),h.set(d,y))}}var m=new wu(l);return new Yy(h,m,o.fieldTransforms)}function cm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lm(n,e.da(r?4:3,t))}function lm(e,t){if(fm(e=we(e)))return dm("Unsupported field value:",t,e),hm(e,t);if(e instanceof Hy)return function(e,t){if(!$y(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=y(e);try{for(a.s();!(n=a.n()).done;){var o=lm(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=we(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Hs(t.It,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Po.fromDate(e);return{timestampValue:Jc(t.It,n)}}if(e instanceof Po){var r=new Po(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Jc(t.It,r)}}if(e instanceof Ky)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof By)return{bytesValue:Zc(t.It,e._byteString)};if(e instanceof ty){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:nl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(Qv(e)))}(e,t)}function hm(e,t){var n={};return du(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fu(e,(function(e,r){var i=lm(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function fm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Po||e instanceof Ky||e instanceof By||e instanceof ty||e instanceof Hy)}function dm(e,t,n){if(!fm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Qv(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function pm(e,t,n){if((t=we(t))instanceof Wy)return t._internalPath;if("string"==typeof t)return ym(e,t);throw mm("Field path arguments must be of type string or ",e,!1,void 0,n)}var vm=new RegExp("[~\\*/\\[\\]]");function ym(e,t,n){if(t.search(vm)>=0)throw mm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return T(Wy,u(t.split(".")))._internalPath}catch(r){throw mm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function mm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new mo(yo.INVALID_ARGUMENT,u+e+s)}function gm(e,t){return e.some((function(e){return e.isEqual(t)}))}var km=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return v(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ty(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new wm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(_m("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),wm=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){return Xt(w(n.prototype),"data",this).call(this)}}]),n}(km);function _m(e,t){return"string"==typeof t?ym(e,t):t instanceof Wy?t._internalPath:t._delegate._internalPath}function bm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new mo(yo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xm=v((function e(){d(this,e)}));function Im(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var Tm=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).ma=e,a.ga=r,a.ya=i,a.type="where",a}return v(n,[{key:"_apply",value:function(e){var t=Zy(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new mo(yo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Mm(o,a);var s,c=[],l=y(o);try{for(l.s();!(s=l.n()).done;){var h=s.value;c.push(Lm(r,e,h))}}catch(d){l.e(d)}finally{l.f()}u={arrayValue:{values:c}}}else u=Lm(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Mm(o,a),u=cm(n,"where",o,"in"===a||"not-in"===a);var f=fs.create(i,a,u);return function(e,t){if(t.dt()){var n=As(e);if(null!==n&&!n.isEqual(t.field))throw new mo(yo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Rs(e);null!==r&&Fm(e,t.field,r)}var i=function(e,t){var n,r=y(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(d){r.e(d)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new mo(yo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new mo(yo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ny(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(xm);var Sm=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).ma=e,i.pa=r,i.type="orderBy",i}return v(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new mo(yo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new mo(yo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new bs(t,n);return function(e,t){if(null===Rs(e)){var n=As(e);null!==n&&Fm(e,n,t.field)}}(e,r),r}(e._query,this.ma,this.pa);return new ny(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Ss(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(xm);var Em=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Ia=r,a.Ta=i,a}return v(n,[{key:"_apply",value:function(e){return new ny(e.firestore,e.converter,Ls(e._query,this.Ia,this.Ta))}}]),n}(xm);var Cm=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return v(n,[{key:"_apply",value:function(e){var t=Om(e,this.type,this.Ea,this.Aa);return new ny(e.firestore,e.converter,function(e,t){return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(xm);function Nm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cm("startAt",t,!0)}function Rm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Cm("startAfter",t,!1)}var Am=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a.Ea=r,a.Aa=i,a}return v(n,[{key:"_apply",value:function(e){var t=Om(e,this.type,this.Ea,this.Aa);return new ny(e.firestore,e.converter,function(e,t){return new Ss(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(xm);function Pm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Am("endBefore",t,!1)}function Dm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Am("endAt",t,!0)}function Om(e,t,n,r){if(n[0]=we(n[0]),n[0]instanceof km)return function(e,t,n,r,i){if(!r)throw new mo(yo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=y(Ds(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Bu(t,r.key));else{var c=r.data.field(s.field);if(Su(c))throw new mo(yo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new mo(yo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(h){u.e(h)}finally{u.f()}return new _s(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Zy(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new mo(yo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new mo(yo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ps(e)&&-1!==c.indexOf("/"))throw new mo(yo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Lo.fromString(c));if(!Uo.isDocumentKey(l))throw new mo(yo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Uo(l);u.push(Bu(t,h))}else{var f=cm(n,r,c);u.push(f)}}return new _s(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Lm(e,t,n){if("string"==typeof(n=we(n))){if(""===n)throw new mo(yo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ps(t)&&-1!==n.indexOf("/"))throw new mo(yo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Lo.fromString(n));if(!Uo.isDocumentKey(r))throw new mo(yo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Bu(e,new Uo(r))}if(n instanceof ty)return Bu(e,n._key);throw new mo(yo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Qv(n),"."))}function Mm(e,t){if(!Array.isArray(e)||0===e.length)throw new mo(yo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new mo(yo.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function Fm(e,t,n){if(!n.isEqual(t))throw new mo(yo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Um=function(){function e(){d(this,e)}return v(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Iu(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fo()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return fu(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Ky(Iu(e.latitude),Iu(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Eu(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Cu(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=xu(e);return new Po(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Lo.fromString(e);po(Sl(n));var r=new Ru(n.get(1),n.get(3)),i=new Uo(n.popFirst(5));return r.isEqual(t)||co("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Vm(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var qm=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new By(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ty(this.firestore,null,t)}}]),n}(Um),jm=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return v(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),zm=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return v(n,[{key:"exists",value:function(){return Xt(w(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Bm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(_m("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(km),Bm=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Xt(w(n.prototype),"data",this).call(this,e)}}]),n}(zm),Wm=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new jm(i.hasPendingWrites,i.fromCache),this.query=r}return v(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Bm(n._firestore,n._userDataWriter,r.key,r,new jm(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new mo(yo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Bm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new jm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Bm(e._firestore,e._userDataWriter,t.doc.key,t.doc,new jm(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Hm(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function Hm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fo()}}function Km(e,t){return e instanceof zm&&t instanceof zm?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Wm&&t instanceof Wm&&e._firestore===t._firestore&&uy(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Gm=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new By(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ty(this.firestore,null,t)}}]),n}(Um);function Qm(e){e=Yv(e,ty);var t=Yv(e.firestore,Oy),n=Ly(t),r=new Gm(t);return function(e,t){var n=new go;return e.asyncQueue.enqueueAndForget(xe(_e().mark((function r(){return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=vo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new mo(yo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=wp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new zm(t,r,e._key,n,new jm(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Ym(e){e=Yv(e,ny);var t=Yv(e.firestore,Oy),n=Ly(t),r=new Gm(t);return function(e,t){var n=new go;return e.asyncQueue.enqueueAndForget(xe(_e().mark((function r(){return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=xe(_e().mark((function e(t,n,r){var i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Zf(t,n,!0);case 3:i=e.sent,a=new qp(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=wp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,xy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Wm(t,r,e,n)}))}function $m(e,t,n){e=Yv(e,ty);var r=Yv(e.firestore,Oy),i=Vm(e.converter,t,n);return eg(r,[em(Zy(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,oc.none())])}function Xm(e,t,n){e=Yv(e,ty);for(var r=Yv(e.firestore,Oy),i=Zy(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return eg(r,[("string"==typeof(t=we(t))||t instanceof Wy?sm(i,"updateDoc",e._key,t,n,o):um(i,"updateDoc",e._key,t)).toMutation(e._key,oc.exists(!0))])}function Jm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=we(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Py(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(Py(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof ty)l=Yv(e.firestore,Oy),h=Cs(e._key.path),c={next:function(t){n[s]&&n[s](tg(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Yv(e,ny);l=Yv(p.firestore,Oy),h=p._query;var v=new Gm(l);c={next:function(e){n[s]&&n[s](new Wm(l,v,p,e))},error:n[s+1],complete:n[s+2]},bm(e._query)}return function(e,t,n,r){var i=new cy(r),a=new Dp(t,i,n);return e.asyncQueue.enqueueAndForget(xe(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sp,t.next=3,Ey(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(xe(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Cp,t.next=3,Ey(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ly(l),h,f,c)}function Zm(e,t){return function(e,t){var n=new cy(t);return e.asyncQueue.enqueueAndForget(xe(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){vo(e).Ru.add(t),t.next()},t.next=3,Ey(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(xe(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){vo(e).Ru.delete(t)},t.next=3,Ey(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ly(e=Yv(e,Oy)),Py(t)?t:{next:t})}function eg(e,t){return function(e,t){var n=new go;return e.asyncQueue.enqueueAndForget(xe(_e().mark((function r(){return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=$p,r.next=3,Ty(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ly(e),t)}function tg(e,t,n){var r=n.docs.get(t._key),i=new Gm(e);return new zm(e,i,t._key,r,new jm(n.hasPendingWrites,n.fromCache),t.converter)}var ng={maxAttempts:5},rg=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zy(t)}return v(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=ig(e,this._firestore),i=Vm(r.converter,t,n),a=em(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,oc.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=ig(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=we(t))||t instanceof Wy?sm(this._dataReader,"WriteBatch.update",i._key,t,n,o):um(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,oc.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=ig(e,this._firestore);return this._mutations=this._mutations.concat(new _c(t._key,oc.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new mo(yo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function ig(e,t){if((e=we(e)).firestore!==t)throw new mo(yo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ag=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return v(n,[{key:"get",value:function(e){var t=this,r=ig(e,this._firestore),i=new Gm(this._firestore);return Xt(w(n.prototype),"get",this).call(this,e).then((function(e){return new zm(t._firestore,i,r._key,e._document,new jm(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=Zy(t)}return v(e,[{key:"get",value:function(e){var t=this,n=ig(e,this._firestore),r=new qm(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return fo();var i=e[0];if(i.isFoundDocument())return new km(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new km(t._firestore,r,n._key,null,n.converter);throw fo()}))}},{key:"set",value:function(e,t,n){var r=ig(e,this._firestore),i=Vm(r.converter,t,n),a=em(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=ig(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=we(t))||t instanceof Wy?sm(this._dataReader,"Transaction.update",i._key,t,n,o):um(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=ig(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function og(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new im("arrayUnion",t)}function ug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new am("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){ao=e}(kt),ft(new Ie("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Oy(new bo(e.getProvider("auth-internal")),new So(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new mo(yo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Tt(ro,"3.7.3",e),Tt(ro,"3.7.3","esm2017")}();function sg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new mo("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function cg(){if("undefined"===typeof Uint8Array)throw new mo("unimplemented","Uint8Arrays are not available in this environment.")}function lg(){if("undefined"==typeof atob)throw new mo("unimplemented","Blobs are unavailable in Firestore in this environment.")}var hg=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"toBase64",value:function(){return lg(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return cg(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return lg(),new e(By.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return cg(),new e(By.fromUint8Array(t))}}]),e}();function fg(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=y(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var dg=function(){function e(){d(this,e)}return v(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){zy(e=Yv(e,Oy));var n=Ly(e),r=e._freezeSettings(),i=new Bv;return Fy(n,i,new jv(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){zy(e=Yv(e,Oy));var t=Ly(e),n=e._freezeSettings(),r=new Bv;return Fy(t,r,new zv(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new mo(yo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new go;return e._queue.enqueueAndForgetEvenWhileRestricted(xe(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(eu.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,eu.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Uf(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),pg=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ru||(this._appCompat=t)}return v(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||lo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ey(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Uy(this._delegate)}},{key:"disableNetwork",value:function(){return Vy(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Hv("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new go;return e.asyncQueue.enqueueAndForget(xe(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=uv,n.next=3,Ty(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Ly(e=Yv(e,Oy)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Zm(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new mo("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Cg(this,iy(this._delegate,e))}catch(t){throw wg(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new kg(this,ay(this._delegate,e))}catch(t){throw wg(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Tg(this,function(e,t){if(e=Yv(e,Zv),Wv("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new mo(yo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new ny(e,null,function(e){return new Ss(Lo.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw wg(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=Yv(e,Oy);var r=Object.assign(Object.assign({},ng),n);return function(e){if(e.maxAttempts<1)throw new mo(yo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new go;return e.asyncQueue.enqueueAndForget(xe(_e().mark((function i(){var a;return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Sy(e);case 2:a=i.sent,new fy(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Ly(e),(function(n){return t(new ag(e,n))}),r)}(this._delegate,(function(n){return e(new yg(t,n))}))}},{key:"batch",value:function(){var e=this;return Ly(this._delegate),new mg(new rg(this._delegate,(function(t){return eg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return qy(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return jy(this._delegate,e).then((function(e){return e?new Tg(t,e):null}))}}]),e}(),vg=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return v(n,[{key:"convertBytes",value:function(e){return new hg(new By(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return kg.forKey(t,this.firestore,null)}}]),n}(Um);var yg=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new vg(t)}return v(e,[{key:"get",value:function(e){var t=this,n=Ng(e);return this._delegate.get(n).then((function(e){return new xg(t._firestore,new zm(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Ng(e);return n?(sg("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ng(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ng(e);return this._delegate.delete(t),this}}]),e}(),mg=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"set",value:function(e,t,n){var r=Ng(e);return n?(sg("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Ng(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Ng(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),gg=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return v(e,[{key:"fromFirestore",value:function(e,t){var n=new Bm(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ig(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new vg(t),n),i.set(n,a)),a}}]),e}();gg.INSTANCES=new WeakMap;var kg=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vg(t)}return v(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Cg(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Cg(this.firestore,iy(this._delegate,e))}catch(t){throw wg(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=we(e))instanceof ty&&oy(this._delegate,e)}},{key:"set",value:function(e,t){t=sg("DocumentReference.set",t);try{return t?$m(this._delegate,e,t):$m(this._delegate,e)}catch(n){throw wg(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Xm(this._delegate,e):Xm.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw wg(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return eg(Yv(e.firestore,Oy),[new _c(e._key,oc.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=_g(n),a=bg(n,(function(t){return new xg(e.firestore,new zm(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Jm(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Qm(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Yv(e,ty);var t=Yv(e.firestore,Oy);return Ny(Ly(t),e._key,{source:"server"}).then((function(n){return tg(t,e,n)}))}(this._delegate):function(e){e=Yv(e,ty);var t=Yv(e.firestore,Oy);return Ny(Ly(t),e._key).then((function(n){return tg(t,e,n)}))}(this._delegate),t.then((function(e){return new xg(n.firestore,new zm(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new mo("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ty(n._delegate,r,new Uo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ty(n._delegate,r,t))}}]),e}();function wg(e,t,n){return e.message=e.message.replace(t,n),e}function _g(e){var t,n=y(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!fg(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function bg(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=fg(e[0])?e[0]:fg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var xg=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"ref",get:function(){return new kg(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Km(this._delegate,e._delegate)}}]),e}(),Ig=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||fo()}(void 0!==t),t}}]),n}(xg),Tg=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vg(t)}return v(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Im(this._delegate,function(e,t,n){var r=t,i=_m("where",e);return new Tm(i,r,n)}(t,n,r)))}catch(i){throw wg(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Im(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=_m("orderBy",e);return new Sm(n,t)}(t,n)))}catch(r){throw wg(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Im(this._delegate,function(e){return $v("limit",e),new Em("limit",e,"F")}(t)))}catch(n){throw wg(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Im(this._delegate,function(e){return $v("limitToLast",e),new Em("limitToLast",e,"L")}(t)))}catch(n){throw wg(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Im(this._delegate,Nm.apply(void 0,arguments)))}catch(t){throw wg(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Im(this._delegate,Rm.apply(void 0,arguments)))}catch(t){throw wg(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Im(this._delegate,Pm.apply(void 0,arguments)))}catch(t){throw wg(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Im(this._delegate,Dm.apply(void 0,arguments)))}catch(t){throw wg(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return uy(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Ym(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Yv(e,ny);var t=Yv(e.firestore,Oy),n=Ly(t),r=new Gm(t);return Ry(n,e._query,{source:"server"}).then((function(n){return new Wm(t,r,e,n)}))}(this._delegate):function(e){e=Yv(e,ny);var t=Yv(e.firestore,Oy),n=Ly(t),r=new Gm(t);return bm(e._query),Ry(n,e._query).then((function(n){return new Wm(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Eg(n.firestore,new Wm(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=_g(n),a=bg(n,(function(t){return new Eg(e.firestore,new Wm(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Jm(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(gg.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Sg=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Ig(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Eg=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return v(e,[{key:"query",get:function(){return new Tg(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Ig(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Sg(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Ig(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Km(this._delegate,e._delegate)}}]),e}(),Cg=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return v(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new kg(this.firestore,e):null}},{key:"doc",value:function(e){try{return new kg(this.firestore,void 0===e?ay(this._delegate):ay(this._delegate,e))}catch(t){throw wg(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Yv(e.firestore,Oy),r=ay(e),i=Vm(e.converter,t);return eg(n,[em(Zy(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,oc.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new kg(t.firestore,e)}))}},{key:"isEqual",value:function(e){return oy(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(gg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Tg);function Ng(e){return Yv(e,ty)}var Rg,Ag=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=T(Wy,n)}return v(e,[{key:"isEqual",value:function(e){return(e=we(e))instanceof Wy&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Fo.keyField().canonicalString())}}]),e}(),Pg=function(){function e(t){d(this,e),this._delegate=t}return v(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new rm("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new tm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=og.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=ug.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new om("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Dg={Firestore:pg,GeoPoint:Ky,Timestamp:Po,Blob:hg,Transaction:yg,WriteBatch:mg,DocumentReference:kg,DocumentSnapshot:xg,Query:Tg,QueryDocumentSnapshot:Ig,QuerySnapshot:Eg,CollectionReference:Cg,FieldPath:Ag,FieldValue:Pg,setLogLevel:function(e){!function(e){oo.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Ie("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Dg)))})(Rg=Yt,(function(e,t){return new pg(e,t,new dg)})),Rg.registerVersion("@firebase/firestore-compat","0.2.3");function Og(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var Lg;Object.create;var Mg="facebook.com",Fg="github.com",Ug="google.com",Vg="password",qg="twitter.com",jg="EMAIL_SIGNIN",zg="PASSWORD_RESET",Bg="RECOVER_EMAIL",Wg="REVERT_SECOND_FACTOR_ADDITION",Hg="VERIFY_AND_CHANGE_EMAIL",Kg="VERIFY_EMAIL";function Gg(){return f({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Qg=function(){var e;return f(e={},"admin-restricted-operation","This operation is restricted to administrators only."),f(e,"argument-error",""),f(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),f(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),f(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),f(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),f(e,"cordova-not-ready","Cordova framework is not ready."),f(e,"cors-unsupported","This browser is not supported."),f(e,"credential-already-in-use","This credential is already associated with a different user account."),f(e,"custom-token-mismatch","The custom token corresponds to a different audience."),f(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),f(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),f(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),f(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),f(e,"email-already-in-use","The email address is already in use by another account."),f(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),f(e,"expired-action-code","The action code has expired."),f(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),f(e,"internal-error","An internal AuthError has occurred."),f(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),f(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),f(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),f(e,"invalid-auth-event","An internal AuthError has occurred."),f(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),f(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),f(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),f(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),f(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),f(e,"invalid-email","The email address is badly formatted."),f(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),f(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),f(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),f(e,"invalid-credential","The supplied auth credential is malformed or has expired."),f(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),f(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),f(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),f(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),f(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),f(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),f(e,"wrong-password","The password is invalid or the user does not have a password."),f(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),f(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),f(e,"invalid-provider-id","The specified provider ID is invalid."),f(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),f(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),f(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),f(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),f(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),f(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),f(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),f(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),f(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),f(e,"missing-continue-uri","A continue URL must be provided in the request."),f(e,"missing-iframe-start","An internal AuthError has occurred."),f(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),f(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),f(e,"missing-multi-factor-info","No second factor identifier is provided."),f(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),f(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),f(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),f(e,"app-deleted","This instance of FirebaseApp has been deleted."),f(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),f(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),f(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),f(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),f(e,"no-auth-event","An internal AuthError has occurred."),f(e,"no-such-provider","User was not linked to an account with the given provider."),f(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),f(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),f(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),f(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),f(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),f(e,"provider-already-linked","User can only be linked to one identity for the given provider."),f(e,"quota-exceeded","The project's quota for this operation has been exceeded."),f(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),f(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),f(e,"rejected-credential","The request contains malformed or mismatching credentials."),f(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),f(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),f(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),f(e,"timeout","The operation has timed out."),f(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),f(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),f(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),f(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),f(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),f(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),f(e,"unverified-email","The operation requires a verified email."),f(e,"user-cancelled","The user did not grant your application the permissions it requested."),f(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),f(e,"user-disabled","The user account has been disabled by an administrator."),f(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),f(e,"user-signed-out",""),f(e,"weak-password","The password must be 6 characters long or more."),f(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),f(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Yg=Gg,$g=new Z("auth","Firebase",Gg()),Xg=new Le("@firebase/auth");function Jg(e){if(Xg.logLevel<=Ce.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Xg.error.apply(Xg,["Auth (".concat(kt,"): ").concat(e)].concat(n))}}function Zg(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw rk.apply(void 0,[e].concat(n))}function ek(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return rk.apply(void 0,[e].concat(n))}function tk(e,t,n){var r=Object.assign(Object.assign({},Yg()),f({},t,n));return new Z("auth","Firebase",r).create(t,{appName:e.name})}function nk(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Zg(e,"argument-error"),tk(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function rk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=u(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(u(o)))}return $g.create.apply($g,[e].concat(n))}function ik(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw rk.apply(void 0,[t].concat(r))}}function ak(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Jg(t),new Error(t)}function ok(e,t){e||ak(t)}var uk=new Map;function sk(e){ok(e instanceof Function,"Expected a class definition");var t=uk.get(e);return t?(ok(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,uk.set(e,t),t)}function ck(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function lk(){return"http:"===hk()||"https:"===hk()}function hk(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var fk=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,ok(n>t,"Short delay should be less than long delay!"),this.isMobile=V()||z()}return v(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(lk()||j()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function dk(e,t){ok(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var pk=function(){function e(){d(this,e)}return v(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ak("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ak("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ak("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),vk=(f(Lg={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),f(Lg,"MISSING_CUSTOM_TOKEN","internal-error"),f(Lg,"INVALID_IDENTIFIER","invalid-email"),f(Lg,"MISSING_CONTINUE_URI","internal-error"),f(Lg,"INVALID_PASSWORD","wrong-password"),f(Lg,"MISSING_PASSWORD","internal-error"),f(Lg,"EMAIL_EXISTS","email-already-in-use"),f(Lg,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),f(Lg,"INVALID_IDP_RESPONSE","invalid-credential"),f(Lg,"INVALID_PENDING_TOKEN","invalid-credential"),f(Lg,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),f(Lg,"MISSING_REQ_TYPE","internal-error"),f(Lg,"EMAIL_NOT_FOUND","user-not-found"),f(Lg,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),f(Lg,"EXPIRED_OOB_CODE","expired-action-code"),f(Lg,"INVALID_OOB_CODE","invalid-action-code"),f(Lg,"MISSING_OOB_CODE","internal-error"),f(Lg,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),f(Lg,"INVALID_ID_TOKEN","invalid-user-token"),f(Lg,"TOKEN_EXPIRED","user-token-expired"),f(Lg,"USER_NOT_FOUND","user-token-expired"),f(Lg,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),f(Lg,"INVALID_CODE","invalid-verification-code"),f(Lg,"INVALID_SESSION_INFO","invalid-verification-id"),f(Lg,"INVALID_TEMPORARY_PROOF","invalid-credential"),f(Lg,"MISSING_SESSION_INFO","missing-verification-id"),f(Lg,"SESSION_EXPIRED","code-expired"),f(Lg,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),f(Lg,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),f(Lg,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),f(Lg,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),f(Lg,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),f(Lg,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),f(Lg,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),f(Lg,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),f(Lg,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),f(Lg,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),f(Lg,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),Lg),yk=new fk(3e4,6e4);function mk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function gk(e,t,n,r){return kk.apply(this,arguments)}function kk(){return kk=xe(_e().mark((function e(t,n,r,i){var a,o=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",wk(t,a,xe(_e().mark((function e(){var a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=he(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",pk.fetch()(Ik(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),kk.apply(this,arguments)}function wk(e,t,n){return _k.apply(this,arguments)}function _k(){return(_k=xe(_e().mark((function e(t,n,r){var i,a,o,u,s,c,h,f,d,p;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},vk),n),e.prev=2,a=new Tk(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Sk(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),h=l(c,2),f=h[0],d=h[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==f){e.next=23;break}throw Sk(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==f){e.next=27;break}throw Sk(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==f){e.next=29;break}throw Sk(t,"user-disabled",u);case 29:if(p=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw tk(t,p,d);case 34:Zg(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof J)){e.next=41;break}throw e.t0;case 41:Zg(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])})))).apply(this,arguments)}function bk(e,t,n,r){return xk.apply(this,arguments)}function xk(){return xk=xe(_e().mark((function e(t,n,r,i){var a,o,u=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,gk(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Zg(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),xk.apply(this,arguments)}function Ik(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?dk(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Tk=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(ek(n.auth,"network-request-failed"))}),yk.get())}))}return v(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Sk(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=ek(e,t,r);return i.customData._tokenResponse=n,i}function Ek(e,t){return Ck.apply(this,arguments)}function Ck(){return(Ck=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nk(e,t){return Rk.apply(this,arguments)}function Rk(){return(Rk=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ak(e,t){return Pk.apply(this,arguments)}function Pk(){return(Pk=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dk(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Ok(){return Ok=xe(_e().mark((function e(t){var n,r,i,a,o,u,s=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=we(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,ik((a=Mk(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Dk(Lk(a.auth_time)),issuedAtTime:Dk(Lk(a.iat)),expirationTime:Dk(Lk(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Ok.apply(this,arguments)}function Lk(e){return 1e3*Number(e)}function Mk(e){var t,n=l(e.split("."),3),r=n[0],i=n[1],a=n[2];if(void 0===r||void 0===i||void 0===a)return Jg("JWT malformed, contained fewer than 3 sections"),null;try{var o=M(i);return o?JSON.parse(o):(Jg("Failed to decode base64 JWT payload"),null)}catch(u){return Jg("Caught error parsing JWT payload as JSON",null===(t=u)||void 0===t?void 0:t.toString()),null}}function Fk(e,t){return Uk.apply(this,arguments)}function Uk(){return Uk=xe(_e().mark((function e(t,n){var r=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof J&&Vk(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Uk.apply(this,arguments)}function Vk(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var qk=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return v(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(xe(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===(t=e.t0)||void 0===t?void 0:t.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),jk=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return v(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Dk(this.lastLoginAt),this.creationTime=Dk(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function zk(e){return Bk.apply(this,arguments)}function Bk(){return Bk=xe(_e().mark((function e(t){var n,r,i,a,o,u,s,c,l,h,f;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Fk(t,Ak(r,{idToken:i}));case 6:ik(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Kk(o.providerUserInfo):[],s=Hk(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),h=!!c&&l,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new jk(o.createdAt,o.lastLoginAt),isAnonymous:h},Object.assign(t,f);case 17:case"end":return e.stop()}}),e)}))),Bk.apply(this,arguments)}function Wk(){return(Wk=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=we(t),e.next=3,zk(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Hk(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(u(n),u(t))}function Kk(e){return e.map((function(e){var t=e.providerId,n=Og(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Gk(e,t){return Qk.apply(this,arguments)}function Qk(){return(Qk=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wk(t,{},xe(_e().mark((function e(){var r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=he({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=Ik(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",pk.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Yk=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return v(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){ik(e.idToken,"internal-error"),ik("undefined"!==typeof e.idToken,"internal-error"),ik("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Mk(e);return ik(t,"internal-error"),ik("undefined"!==typeof t.exp,"internal-error"),ik("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=xe(_e().mark((function e(t){var n,r=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],ik(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=xe(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gk(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ak("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(ik("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(ik("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(ik("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function $k(e,t){ik("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Xk=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Og(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new qk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?u(a.providerData):[],this.metadata=new jk(a.createdAt||void 0,a.lastLoginAt||void 0)}return v(e,[{key:"getIdToken",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fk(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(ik(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Ok.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return Wk.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(ik(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){ik(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=xe(_e().mark((function e(t){var n,r,i=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,zk(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Fk(this,Ek(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,_=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;ik(k&&x,t,"internal-error");var I=Yk.fromJSON(this.name,x);ik("string"===typeof k,t,"internal-error"),$k(h,t.name),$k(f,t.name),ik("boolean"===typeof w,t,"internal-error"),ik("boolean"===typeof _,t,"internal-error"),$k(d,t.name),$k(p,t.name),$k(v,t.name),$k(y,t.name),$k(m,t.name),$k(g,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:w,displayName:h,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return b&&Array.isArray(b)&&(T.providerData=b.map((function(e){return Object.assign({},e)}))),y&&(T._redirectEventId=y),T}},{key:"_fromIdTokenResponse",value:function(){var t=xe(_e().mark((function t(n,r){var i,a,o,u=arguments;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Yk).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,zk(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Jk=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return v(e,[{key:"_isAvailable",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Jk.type="NONE";var Zk=Jk;function ew(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var tw=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=ew(this.userKey,a.apiKey,o),this.fullPersistenceKey=ew("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return v(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Xk._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=xe(_e().mark((function t(n,r){var i,a,o,u,s,c,l,h,f,d,p,v=arguments;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(sk(Zk),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||sk(Zk),u=ew(i,n.config.apiKey,n.name),s=null,c=y(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return h=l.value,t.prev=14,t.next=17,h._get(u);case 17:if(!(f=t.sent)){t.next=23;break}return d=Xk._fromJSON(n,f),h!==o&&(s=d),o=h,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function nw(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ow(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(rw(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(sw(t))return"Blackberry";if(cw(t))return"Webos";if(iw(t))return"Safari";if((t.includes("chrome/")||aw(t))&&!t.includes("edge/"))return"Chrome";if(uw(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function rw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/firefox\//i.test(e)}function iw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function aw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/crios\//i.test(e)}function ow(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iemobile/i.test(e)}function uw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/android/i.test(e)}function sw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/blackberry/i.test(e)}function cw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/webos/i.test(e)}function lw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function hw(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return lw(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function fw(){return B()&&10===document.documentMode}function dw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return lw(e)||uw(e)||cw(e)||sw(e)||/windows phone/i.test(e)||ow(e)}function pw(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=nw(U());break;case"Worker":t="".concat(nw(U()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(kt,"/").concat(r)}var vw=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return v(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=xe(_e().mark((function e(t){var n,r,i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:r=[],e.prev=3,i=y(this.queue),e.prev=5,i.s();case 7:if((a=i.n()).done){e.next=14;break}return o=a.value,e.next=11,o(t);case 11:o.onAbort&&r.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),r.reverse(),u=y(r);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(l){}}}catch(h){u.e(h)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===(n=e.t1)||void 0===n?void 0:n.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),yw=function(){function e(t,n,r){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gw(this),this.idTokenSubscription=new gw(this),this.beforeStateQueue=new vw(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$g,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return v(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=sk(t)),this._initializationPromise=this.queue(xe(_e().mark((function r(){var i,a;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,tw.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=xe(_e().mark((function e(t){var n,r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return ik(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,zk(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?we(t):null)&&ik(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=xe(_e().mark((function e(t){var n,r=this,i=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&ik(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(xe(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(sk(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new Z("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return ik(n=t&&sk(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,tw.create(this,[sk(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=xe(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return ik(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return ik(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pw(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=xe(_e().mark((function e(){var t,n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mw(e){return we(e)}var gw=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=ve((function(e){return n.observer=e}))}return v(e,[{key:"next",get:function(){return ik(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function kw(e,t,n){var r=mw(e);ik(r._canInitEmulator,r,"emulator-config-failed"),ik(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=ww(t),o=function(e){var t=ww(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:_w(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:_w(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ww(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function _w(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var bw=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return v(e,[{key:"toJSON",value:function(){return ak("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ak("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ak("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ak("not implemented")}}]),e}();function xw(e,t){return Iw.apply(this,arguments)}function Iw(){return(Iw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:resetPassword",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tw(e,t){return Sw.apply(this,arguments)}function Sw(){return(Sw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ew(e,t){return Cw.apply(this,arguments)}function Cw(){return(Cw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:update",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nw(e,t){return Rw.apply(this,arguments)}function Rw(){return(Rw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bk(t,"POST","/v1/accounts:signInWithPassword",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Aw(e,t){return Pw.apply(this,arguments)}function Pw(){return(Pw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:sendOobCode",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dw(e,t){return Ow.apply(this,arguments)}function Ow(){return(Ow=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aw(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lw(e,t){return Mw.apply(this,arguments)}function Mw(){return(Mw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aw(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fw(e,t){return Uw.apply(this,arguments)}function Uw(){return(Uw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aw(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vw(e,t){return qw.apply(this,arguments)}function qw(){return(qw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aw(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jw(e,t){return zw.apply(this,arguments)}function zw(){return(zw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bk(t,"POST","/v1/accounts:signInWithEmailLink",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bw(e,t){return Ww.apply(this,arguments)}function Ww(){return(Ww=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bk(t,"POST","/v1/accounts:signInWithEmailLink",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Hw=function(e){k(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return v(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Nw(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",jw(t,{email:this._email,oobCode:this._password}));case 5:Zg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Tw(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Bw(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Zg(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(bw);function Kw(e,t){return Gw.apply(this,arguments)}function Gw(){return(Gw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bk(t,"POST","/v1/accounts:signInWithIdp",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qw=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return v(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Kw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Kw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Kw(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=he(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zg("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Og(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(bw);function Yw(e,t){return $w.apply(this,arguments)}function $w(){return($w=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:sendVerificationCode",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xw(){return(Xw=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bk(t,"POST","/v1/accounts:signInWithPhoneNumber",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jw(){return(Jw=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bk(t,"POST","/v1/accounts:signInWithPhoneNumber",mk(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Sk(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zw=f({},"USER_NOT_FOUND","user-not-found");function e_(){return(e_=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",bk(t,"POST","/v1/accounts:signInWithPhoneNumber",mk(t,r),Zw));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var t_=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Xw.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Jw.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return e_.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(bw);var n_=function(){function e(t){var n,r,i,a,o,u;d(this,e);var s=fe(de(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);ik(c&&l&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return v(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=fe(de(e)).link,n=t?fe(de(t)).deep_link_id:null,r=fe(de(e)).deep_link_id;return(r?fe(de(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(dy){return null}}}]),e}();var r_=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return v(e,null,[{key:"credential",value:function(e,t){return Hw._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=n_.parseLink(t);return ik(n,"argument-error"),Hw._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();r_.PROVIDER_ID="password",r_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",r_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var i_=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return v(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),a_=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return v(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return u(this.scopes)}}]),n}(i_),o_=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return ik(e.idToken||e.accessToken,"argument-error"),Qw._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return ik("providerId"in t&&"signInMethod"in t,"argument-error"),Qw._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(a_),u_=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"facebook.com")}return v(n,null,[{key:"credential",value:function(e){return Qw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(dy){return null}}}]),n}(a_);u_.FACEBOOK_SIGN_IN_METHOD="facebook.com",u_.PROVIDER_ID="facebook.com";var s_=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return v(n,null,[{key:"credential",value:function(e,t){return Qw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(dy){return null}}}]),n}(a_);s_.GOOGLE_SIGN_IN_METHOD="google.com",s_.PROVIDER_ID="google.com";var c_=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"github.com")}return v(n,null,[{key:"credential",value:function(e){return Qw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(dy){return null}}}]),n}(a_);c_.GITHUB_SIGN_IN_METHOD="github.com",c_.PROVIDER_ID="github.com";var l_=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return v(n,[{key:"_getIdTokenResponse",value:function(e){return Kw(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Kw(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Kw(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(bw),h_=function(e){k(n,e);var t=I(n);function n(e){return d(this,n),ik(e.startsWith("saml."),"argument-error"),t.call(this,e)}return v(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=l_.fromJSON(e);return ik(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return l_._create(r,n)}catch(i){return null}}}]),n}(i_),f_=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"twitter.com")}return v(n,null,[{key:"credential",value:function(e,t){return Qw._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(dy){return null}}}]),n}(a_);function d_(e,t){return p_.apply(this,arguments)}function p_(){return(p_=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bk(t,"POST","/v1/accounts:signUp",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}f_.TWITTER_SIGN_IN_METHOD="twitter.com",f_.PROVIDER_ID="twitter.com";var v_=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return v(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=xe(_e().mark((function t(n,r,i){var a,o,u,s,c=arguments;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Xk._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=y_(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=xe(_e().mark((function t(n,r,i){var a;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=y_(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function y_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function m_(){return m_=xe(_e().mark((function e(t){var n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mw(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new v_({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,d_(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,v_._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),m_.apply(this,arguments)}var g_=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o,u;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(m(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return v(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(J);function k_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw g_._fromErrorAndOperation(e,n,t,r);throw n}))}function w_(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function __(e,t){return b_.apply(this,arguments)}function b_(){return b_=xe(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=we(t),e.next=3,T_(!0,r,n);case 3:return e.t0=Nk,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=w_(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),b_.apply(this,arguments)}function x_(e,t){return I_.apply(this,arguments)}function I_(){return I_=xe(_e().mark((function e(t,n){var r,i,a=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Fk,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",v_._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function T_(e,t,n){return S_.apply(this,arguments)}function S_(){return(S_=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zk(n);case 2:i=w_(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",ik(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E_(e,t){return C_.apply(this,arguments)}function C_(){return C_=xe(_e().mark((function e(t,n){var r,i,a,o,u,s,c,l=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],a=t.auth,o="reauthenticate",e.prev=3,e.next=6,Fk(t,k_(a,o,n,t),r);case 6:return ik((u=e.sent).idToken,a,"internal-error"),ik(s=Mk(u.idToken),a,"internal-error"),c=s.sub,ik(t.uid===c,a,"user-mismatch"),e.abrupt("return",v_._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===(i=e.t0)||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Zg(a,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),C_.apply(this,arguments)}function N_(e,t){return R_.apply(this,arguments)}function R_(){return R_=xe(_e().mark((function e(t,n){var r,i,a,o,u=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,k_(t,i,n);case 4:return a=e.sent,e.next=7,v_._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function A_(e,t){return P_.apply(this,arguments)}function P_(){return(P_=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N_(mw(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D_(e,t){return O_.apply(this,arguments)}function O_(){return(O_=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=we(t),e.next=3,T_(!1,r,n.providerId);case 3:return e.abrupt("return",x_(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L_(e,t){return M_.apply(this,arguments)}function M_(){return(M_=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E_(we(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F_(e,t){return U_.apply(this,arguments)}function U_(){return(U_=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bk(t,"POST","/v1/accounts:signInWithCustomToken",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V_(){return(V_=xe(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mw(t),e.next=3,F_(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,v_._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q_=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return v(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?j_._fromServerResponse(e,t):Zg(e,"internal-error")}}]),e}(),j_=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return v(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(q_);function z_(e,t,n){var r;ik((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ik("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ik(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ik(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function B_(){return(B_=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),a={requestType:"PASSWORD_RESET",email:n},r&&z_(i,a,r),e.next=5,Lw(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W_(){return(W_=xe(_e().mark((function e(t,n,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xw(we(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H_(){return(H_=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ew(we(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K_(e,t){return G_.apply(this,arguments)}function G_(){return(G_=xe(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=we(t),e.next=3,xw(r,{oobCode:n});case 3:i=e.sent,ik(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return ik(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:ik(i.mfaInfo,r,"internal-error");case 13:ik(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=q_._fromServerResponse(mw(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q_(){return(Q_=xe(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K_(we(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y_(e,t,n){return $_.apply(this,arguments)}function $_(){return($_=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mw(t),e.next=3,d_(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,v_._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X_(){return(X_=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),a={requestType:"EMAIL_SIGNIN",email:n},ik(r.handleCodeInApp,i,"argument-error"),r&&z_(i,a,r),e.next=6,Fw(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J_(){return(J_=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),ik((a=r_.credentialWithLink(n,r||ck()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",A_(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z_(e,t){return eb.apply(this,arguments)}function eb(){return(eb=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:createAuthUri",mk(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tb(){return(tb=xe(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lk()?ck():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Z_(we(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nb(){return(nb=xe(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=we(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&z_(r.auth,a,n),e.next=8,Dw(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rb(){return(rb=xe(_e().mark((function e(t,n,r){var i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&z_(i.auth,o,r),e.next=8,Vw(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ib(e,t){return ab.apply(this,arguments)}function ab(){return(ab=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gk(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ob(){return(ob=xe(_e().mark((function e(t,n){var r,i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=we(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Fk(a,ib(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ub(e,t,n){return sb.apply(this,arguments)}function sb(){return(sb=xe(_e().mark((function e(t,n,r){var i,a,o,u;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Fk(t,Tw(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cb=v((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),lb=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return v(n)}(cb),hb=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return v(n)}(cb),fb=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return v(n)}(lb),db=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return v(n)}(cb),pb=function(e){k(n,e);var t=I(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return v(n)}(lb);function vb(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Mk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new cb(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new hb(a,i);case"github.com":return new fb(a,i);case"google.com":return new db(a,i);case"twitter.com":return new pb(a,i,e.screenName||null);case"custom":case"anonymous":return new cb(a,null);default:return new cb(a,r,i)}}(n)}var yb=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.auth=r}return v(e,[{key:"toJSON",value:function(){return{multiFactorSession:f({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),mb=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return v(e,[{key:"resolveSignIn",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=mw(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return q_._fromServerResponse(r,e)}));ik(i.mfaPendingCredential,r,"internal-error");var o=yb._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=xe(_e().mark((function e(t){var a,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,v_._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return ik(n.user,r,"internal-error"),e.abrupt("return",v_._forOperation(n.user,n.operationType,u));case 17:Zg(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function gb(e,t){return gk(e,"POST","/v2/accounts/mfaEnrollment:start",mk(e,t))}var kb=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return q_._fromServerResponse(t.auth,e)})))}))}return v(e,[{key:"getSession",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=yb,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=xe(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Fk(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=xe(_e().mark((function e(t){var n,r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return i=e.sent,e.next=6,Fk(this.user,gk(o=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",mk(o,{idToken:i,mfaEnrollmentId:r})));case 6:return a=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==r})),e.next=10,this.user._updateTokensIfNecessary(a);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===(n=e.t0)||void 0===n?void 0:n.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var o}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),wb=new WeakMap;var _b="__sak",bb=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return v(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(_b,"1"),this.storage.removeItem(_b),Promise.resolve(!0)):Promise.resolve(!1)}catch(dy){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var xb=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=U();return iw(e)||lw(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=dw(),e._shouldAllowMigration=!0,e}return v(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);fw()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=xe(_e().mark((function e(t,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(w(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=xe(_e().mark((function e(t){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(w(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xt(w(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(bb);xb.type="LOCAL";var Ib=xb,Tb=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return v(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(bb);Tb.type="SESSION";var Sb=Tb;function Eb(e){return Promise.all(e.map(function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Cb=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return v(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=xe(_e().mark((function e(t){var n,r,i,a,o,u,s,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Eb(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Nb(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Cb.receivers=[];var Rb=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return v(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=xe(_e().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Nb("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Ab(){return window}function Pb(){return"undefined"!==typeof Ab().WorkerGlobalScope&&"function"===typeof Ab().importScripts}function Db(){return Ob.apply(this,arguments)}function Ob(){return(Ob=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Lb(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Mb="firebaseLocalStorageDb",Fb="firebaseLocalStorage",Ub="fbase_key",Vb=function(){function e(t){d(this,e),this.request=t}return v(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function qb(e,t){return e.transaction([Fb],t?"readwrite":"readonly").objectStore(Fb)}function jb(){var e=indexedDB.deleteDatabase(Mb);return new Vb(e).toPromise()}function zb(){var e=indexedDB.open(Mb,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(Fb,{keyPath:Ub})}catch(r){n(r)}})),e.addEventListener("success",xe(_e().mark((function n(){var r;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(Fb)){n.next=12;break}return r.close(),n.next=5,jb();case 5:return n.t0=t,n.next=8,zb();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Bb(e,t,n){return Wb.apply(this,arguments)}function Wb(){return Wb=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qb(t,!0).put((f(i={},Ub,n),f(i,"value",r),i)),e.abrupt("return",new Vb(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Wb.apply(this,arguments)}function Hb(e,t){return Kb.apply(this,arguments)}function Kb(){return Kb=xe(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qb(t,!1).get(n),e.next=3,new Vb(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Kb.apply(this,arguments)}function Gb(e,t){var n=qb(e,!0).delete(t);return new Vb(n).toPromise()}var Qb=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return v(e,[{key:"_openDb",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,zb();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Pb()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=xe(_e().mark((function e(){var t=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Cb._getInstance(Pb()?self:null),this.receiver._subscribe("keyChanged",function(){var e=xe(_e().mark((function e(n,r){var i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=xe(_e().mark((function e(){var t,n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Db();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Rb(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Lb()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,zb();case 5:return t=e.sent,e.next=8,Bb(t,_b,"1");case 8:return e.next=10,Gb(t,_b);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=xe(_e().mark((function e(t,n){var r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Bb(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Hb(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=xe(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Gb(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=xe(_e().mark((function e(){var t,n,r,i,a,o,u,s,c,l,h;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=qb(e,!1).getAll();return new Vb(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=y(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(f){i.e(f)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)h=l[c],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(xe(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Qb.type="LOCAL";var Yb=Qb;function $b(e,t){return gk(e,"POST","/v2/accounts/mfaSignIn:start",mk(e,t))}function Xb(e){return Jb.apply(this,arguments)}function Jb(){return(Jb=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gk(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zb(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=ek("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function ex(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var tx=1e12,nx=function(){function e(t){d(this,e),this.auth=t,this.counter=tx,this._widgets=new Map}return v(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new rx(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||tx;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||tx;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||tx,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),rx=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;ik(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return v(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ix=ex("rcb"),ax=new fk(3e4,6e4),ox="https://www.google.com/recaptcha/api.js?",ux=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Ab().grecaptcha)||void 0===t?void 0:t.render)}return v(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return ik(sx(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Ab().grecaptcha):new Promise((function(r,i){var a=Ab().setTimeout((function(){i(ek(e,"network-request-failed"))}),ax.get());Ab()[ix]=function(){Ab().clearTimeout(a),delete Ab()[ix];var o=Ab().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(ek(e,"internal-error"))},Zb("".concat(ox,"?").concat(he({onload:ix,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(ek(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=Ab().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function sx(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var cx=function(){function e(){d(this,e)}return v(e,[{key:"load",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new nx(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),lx="recaptcha",hx={theme:"light",type:"image"},fx=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},hx),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=lx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mw(r),this.isInvisible="invisible"===this.parameters.size,ik("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;ik(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cx:new ux,this.validateStartingState()}return v(e,[{key:"verify",value:function(){var e=xe(_e().mark((function e(){var t,n,r,i=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){ik(!this.parameters.sitekey,this.auth,"argument-error"),ik(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ik("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Ab()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){ik(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=xe(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ik(lk()&&!Pb(),this.auth,"internal-error"),e.next=3,dx();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Xb(this.auth);case 8:ik(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return ik(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function dx(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var px=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return v(e,[{key:"confirm",value:function(e){var t=t_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function vx(){return(vx=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mw(t),e.next=3,kx(i,n,we(r));case 3:return a=e.sent,e.abrupt("return",new px(a,(function(e){return A_(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yx(e,t,n){return mx.apply(this,arguments)}function mx(){return(mx=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),e.next=3,T_(!1,i,"phone");case 3:return e.next=5,kx(i.auth,n,we(r));case 5:return a=e.sent,e.abrupt("return",new px(a,(function(e){return D_(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gx(){return(gx=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=we(t),e.next=3,kx(i.auth,n,we(r));case 3:return a=e.sent,e.abrupt("return",new px(a,(function(e){return L_(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kx(e,t,n){return wx.apply(this,arguments)}function wx(){return wx=xe(_e().mark((function e(t,n,r){var i,a,o,u,s,c,l,h,f;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,ik("string"===typeof a,t,"argument-error"),ik(r.type===lx,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return ik("enroll"===u.type,t,"internal-error"),e.next=13,gb(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return ik("signin"===u.type,t,"internal-error"),ik(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,$b(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Yw(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return h=e.sent,f=h.sessionInfo,e.abrupt("return",f);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),wx.apply(this,arguments)}function _x(){return(_x=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x_(we(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bx=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=mw(t)}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return kx(this.auth,e,we(t))}}],[{key:"credential",value:function(e,t){return t_._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?t_._fromTokenResponse(n,r):null}}]),e}();function xx(e,t){return t?sk(t):(ik(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}bx.PROVIDER_ID="phone",bx.PHONE_SIGN_IN_METHOD="phone";var Ix=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return v(n,[{key:"_getIdTokenResponse",value:function(e){return Kw(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Kw(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Kw(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(bw);function Tx(e){return N_(e.auth,new Ix(e),e.bypassAuthState)}function Sx(e){var t=e.auth,n=e.user;return ik(n,t,"internal-error"),E_(n,new Ix(e),e.bypassAuthState)}function Ex(e){return Cx.apply(this,arguments)}function Cx(){return(Cx=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,ik(r=t.user,n,"internal-error"),e.abrupt("return",x_(r,new Ix(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nx=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return v(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=xe(_e().mark((function t(n,r){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=xe(_e().mark((function e(t){var n,r,i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tx;case"linkViaPopup":case"linkViaRedirect":return Ex;case"reauthViaPopup":case"reauthViaRedirect":return Sx;default:Zg(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ok(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ok(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Rx=new fk(2e3,1e4);function Ax(e,t,n){return Px.apply(this,arguments)}function Px(){return(Px=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mw(t),nk(t,n,i_),a=xx(i,r),o=new Mx(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dx(){return(Dx=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nk((i=we(t)).auth,n,i_),a=xx(i.auth,r),o=new Mx(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ox(e,t,n){return Lx.apply(this,arguments)}function Lx(){return(Lx=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nk((i=we(t)).auth,n,i_),a=xx(i.auth,r),o=new Mx(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Mx=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=m(u),u}return v(n,[{key:"executeNotNull",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return ik(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=xe(_e().mark((function e(){var t,n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ok(1===this.filter.length,"Popup operations only handle one event"),t=Nb(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(ek(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(ek(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(ek(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Rx.get())}()}}]),n}(Nx);Mx.currentPopupAction=null;var Fx=new Map,Ux=function(e){k(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return v(n,[{key:"execute",value:function(){var e=xe(_e().mark((function e(){var t,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Fx.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Vx(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Xt(w(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:Fx.set(this.auth._key(),t);case 21:return this.bypassAuthState||Fx.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=xe(_e().mark((function e(t){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Xt(w(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Xt(w(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Nx);function Vx(e,t){return qx.apply(this,arguments)}function qx(){return(qx=xe(_e().mark((function e(t,n){var r,i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Hx(n),i=Wx(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jx(e,t){return zx.apply(this,arguments)}function zx(){return(zx=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wx(t)._set(Hx(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bx(e,t){Fx.set(e._key(),t)}function Wx(e){return sk(e._redirectPersistence)}function Hx(e){return ew("pendingRedirect",e.config.apiKey,e.name)}function Kx(e,t,n){return function(e,t,n){return Gx.apply(this,arguments)}(e,t,n)}function Gx(){return(Gx=xe(_e().mark((function e(t,n,r){var i,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mw(t),nk(t,n,i_),a=xx(i,r),e.next=5,jx(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qx(e,t,n){return function(e,t,n){return Yx.apply(this,arguments)}(e,t,n)}function Yx(){return(Yx=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nk((i=we(t)).auth,n,i_),a=xx(i.auth,r),e.next=5,jx(a,i.auth);case 5:return e.next=7,nI(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $x(e,t,n){return function(e,t,n){return Xx.apply(this,arguments)}(e,t,n)}function Xx(){return(Xx=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return nk((i=we(t)).auth,n,i_),a=xx(i.auth,r),e.next=5,T_(!1,i,n.providerId);case 5:return e.next=7,jx(a,i.auth);case 7:return e.next=9,nI(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jx(e,t){return Zx.apply(this,arguments)}function Zx(){return(Zx=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mw(t)._initializationPromise;case 2:return e.abrupt("return",eI(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eI(e,t){return tI.apply(this,arguments)}function tI(){return tI=xe(_e().mark((function e(t,n){var r,i,a,o,u,s=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=mw(t),a=xx(i,n),o=new Ux(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),tI.apply(this,arguments)}function nI(e){return rI.apply(this,arguments)}function rI(){return(rI=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Nb("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iI=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return v(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oI(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!oI(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(ek(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(aI(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(aI(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function aI(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function oI(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function uI(e){return sI.apply(this,arguments)}function sI(){return sI=xe(_e().mark((function e(t){var n,r=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",gk(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}var cI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lI=/^https?/;function hI(){return(hI=xe(_e().mark((function e(t){var n,r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uI(t);case 4:n=e.sent,r=n.authorizedDomains,i=y(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!fI(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Zg(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function fI(e){var t=ck(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!lI.test(r))return!1;if(cI.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var dI=new fk(3e4,6e4);function pI(){var e=Ab().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=u(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var vI=null;function yI(e){return vI=vI||function(e){return new Promise((function(t,n){var r,i,a;function o(){pI(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){pI(),n(ek(e,"network-request-failed"))},timeout:dI.get()})}if(null===(i=null===(r=Ab().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Ab().gapi)||void 0===a?void 0:a.load)){var u=ex("iframefcb");return Ab()[u]=function(){gapi.load?o():n(ek(e,"network-request-failed"))},Zb("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw vI=null,e}))}(e),vI}var mI=new fk(5e3,15e3),gI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wI(e){var t=e.config;ik(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?dk(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:kt},i=kI.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(he(r).slice(1))}function _I(e){return bI.apply(this,arguments)}function bI(){return bI=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yI(t);case 2:return n=e.sent,ik(r=Ab().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:wI(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gI,dontclear:!0},(function(e){return new Promise(function(){var n=xe(_e().mark((function n(r,i){var a,o,u;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Ab().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=ek(t,"network-request-failed"),o=Ab().setTimeout((function(){i(a)}),mI.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),bI.apply(this,arguments)}var xI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},II="_blank",TI="http://localhost",SI=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return v(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function EI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},xI),{width:r.toString(),height:i.toString(),top:a,left:o}),c=U().toLowerCase();n&&(u=aw(c)?II:n),rw(c)&&(t=t||TI,s.scrollbars="yes");var h=Object.entries(s).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(hw(c)&&"_self"!==u)return CI(t||"",u),new SI(null);var f=window.open(t||"",u,h);ik(f,e,"popup-blocked");try{f.focus()}catch(d){}return new SI(f)}function CI(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var NI="__/auth/handler",RI="emulator/auth/handler";function AI(e,t,n,r,i,a){ik(e.config.authDomain,e,"auth-domain-config-required"),ik(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:kt,eventId:i};if(t instanceof i_){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ue(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=l(s[u],2),h=c[0],f=c[1];o[h]=f}}if(t instanceof a_){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,y=Object.keys(p);v<y.length;v++){var m=y[v];void 0===p[m]&&delete p[m]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(NI);return dk(t,RI)}(e),"?").concat(he(p).slice(1))}var PI="webStorageSupport",DI=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Sb,this._completeRedirectFn=eI,this._overrideRedirectResult=Bx}return v(e,[{key:"_openPopup",value:function(){var e=xe(_e().mark((function e(t,n,r,i){var a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ok(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=AI(t,n,r,ck(),i),e.abrupt("return",EI(t,o,Nb()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=xe(_e().mark((function e(t,n,r,i){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=AI(t,n,r,ck(),i),Ab().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ok(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_I(t);case 2:return n=e.sent,r=new iI(t),n.register("authEvent",(function(e){return ik(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(PI,{type:PI},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Zg(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return hI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return dw()||iw()||lw()}}]),e}(),OI=DI,LI=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return v(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return gk(e,"POST","/v2/accounts/mfaEnrollment:finalize",mk(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return gk(e,"POST","/v2/accounts/mfaSignIn:finalize",mk(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return v(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ak("unexpected MultiFactorSessionType")}}}]),e}()),MI=function(){function e(){d(this,e)}return v(e,null,[{key:"assertion",value:function(e){return LI._fromCredential(e)}}]),e}();MI.FACTOR_ID="phone";var FI="@firebase/auth",UI="0.20.11",VI=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return v(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){ik(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var qI;!function(e){var t;null===(t=G())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function jI(){return window}qI="Browser",ft(new Ie("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){ik(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),ik(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:qI,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pw(qI)},i=new yw(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(sk);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),ft(new Ie("auth-internal",(function(e){return function(e){return new VI(e)}(mw(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Tt(FI,UI,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(qI)),Tt(FI,UI,"esm2017");function zI(e,t,n){return BI.apply(this,arguments)}function BI(){return BI=xe(_e().mark((function e(t,n,r){var i,a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=jI(),o=a.BuildInfo,ok(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,YI(n.sessionId);case 4:return u=e.sent,s={},lw()?s.ibi=o.packageName:uw()?s.apn=o.packageName:Zg(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",AI(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),BI.apply(this,arguments)}function WI(){return(WI=xe(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=jI(),r=n.BuildInfo,i={},lw()?i.iosBundleId=r.packageName:uw()?i.androidPackageName=r.packageName:Zg(t,"operation-not-supported-in-this-environment"),e.next=5,uI(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function HI(e){var t=jI().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function KI(e,t,n){return GI.apply(this,arguments)}function GI(){return GI=xe(_e().mark((function e(t,n,r){var i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=jI(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(ek(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),uw()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),GI.apply(this,arguments)}function QI(e){var t,n,r,i,a,o,u,s,c,l,h=jI();ik("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ik("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ik("function"===typeof(null===(a=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ik("function"===typeof(null===(s=null===(u=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ik("function"===typeof(null===(l=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function YI(e){return $I.apply(this,arguments)}function $I(){return($I=xe(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=XI(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XI(e){if(ok(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var JI=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return v(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Xt(w(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(iI);function ZI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:iT(),postBody:null,tenantId:e.tenantId,error:ek(e,"no-auth-event")}}function eT(e,t){return aT()._set(oT(e),t)}function tT(e){return nT.apply(this,arguments)}function nT(){return(nT=xe(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aT()._get(oT(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,aT()._remove(oT(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rT(e,t){var n,r,i=function(e){var t=uT(e),n=t.link?decodeURIComponent(t.link):void 0,r=uT(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return uT(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=uT(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?ek(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function iT(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function aT(){return sk(Ib)}function oT(e){return ew("authEvent",e.config.apiKey,e.name)}function uT(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=s(t=n)||a(t)||o(t)||c();r[0];return fe(r.slice(1).join("?"))}var sT=function(){function e(){d(this,e),this._redirectPersistence=Sb,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=eI,this._overrideRedirectResult=Bx}return v(e,[{key:"_initialize",value:function(){var e=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new JI(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Zg(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=xe(_e().mark((function e(t,n,r,i){var a,o,u,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return QI(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),Fx.clear(),e.next=10,this._originValidation(t);case 10:return o=ZI(t,r,i),e.next=13,eT(t,o);case 13:return e.next=15,zI(t,o,n);case 15:return u=e.sent,e.next=18,HI(u);case 18:return s=e.sent,e.abrupt("return",KI(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return WI.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=jI(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(xe(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,tT(e);case 2:t.onEvent(lT());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=xe(_e().mark((function n(r){var i,a;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,tT(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=rT(i,r.url)),t.onEvent(a||lT());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");jI().handleOpenURL=function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),cT=sT;function lT(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ek("no-auth-event")}}function hT(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function fT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return!("file:"!==hT()&&"ionic:"!==hT()&&"capacitor:"!==hT()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function dT(){return B()&&11===(null===document||void 0===document?void 0:document.documentMode)}function pT(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return/Edge\/\d+/.test(e)}function vT(){try{var e=self.localStorage,t=Nb();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U();return dT()||pT(e)}()||H()}catch(n){return yT()&&H()}return!1}function yT(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function mT(){return("http:"===hT()||"https:"===hT()||j()||fT())&&!(z()||q())&&vT()&&!yT()}function gT(){return fT()&&"undefined"!==typeof document}function kT(){return wT.apply(this,arguments)}function wT(){return(wT=xe(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(gT()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _T={LOCAL:"local",NONE:"none",SESSION:"session"},bT=ik,xT="persistence";function IT(e,t){bT(Object.values(_T).includes(t),e,"invalid-persistence-type"),z()?bT(t!==_T.SESSION,e,"unsupported-persistence-type"):q()?bT(t===_T.NONE,e,"unsupported-persistence-type"):yT()?bT(t===_T.NONE||t===_T.LOCAL&&H(),e,"unsupported-persistence-type"):bT(t===_T.NONE||vT(),e,"unsupported-persistence-type")}function TT(e){return ST.apply(this,arguments)}function ST(){return(ST=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=ET(),r=ew(xT,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ET(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var CT=ik,NT=function(){function e(){d(this,e),this.browserResolver=sk(OI),this.cordovaResolver=sk(cT),this.underlyingResolver=null,this._redirectPersistence=Sb,this._completeRedirectFn=eI,this._overrideRedirectResult=Bx}return v(e,[{key:"_initialize",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=xe(_e().mark((function e(t,n,r,i){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=xe(_e().mark((function e(t,n,r,i){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return gT()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return CT(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,kT();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function RT(e){return e.unwrap()}function AT(e,t){var n,r,i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===(r=t)||void 0===r?void 0:r.code))t.resolver=new MT(e,function(e,t){var n,r=we(e),i=t;return ik(t.customData.operationType,r,"argument-error"),ik(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),mb._fromError(r,i)}(e,t));else if(i){var a=PT(t),o=t;a&&(o.credential=a,o.tenantId=i.tenantId||void 0,o.email=i.email||void 0,o.phoneNumber=i.phoneNumber||void 0)}}function PT(e){var t=(e instanceof J?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof J)&&"temporaryProof"in t&&"phoneNumber"in t)return bx.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Vg)return null;switch(r){case Ug:n=s_;break;case Mg:n=u_;break;case Fg:n=c_;break;case qg:n=f_;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?l_._create(r,u):Qw._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new o_(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof J?n.credentialFromError(e):n.credentialFromResult(e)}function DT(e,t){return t.catch((function(t){throw t instanceof J&&AT(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,PT(t)),additionalUserInfo:vb(e),user:FT.getOrCreate(r)}}))}function OT(e,t){return LT.apply(this,arguments)}function LT(){return(LT=xe(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return DT(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var MT=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return v(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return DT(RT(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),FT=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=we(e);return wb.has(t)||wb.set(t,kb._fromUser(t)),wb.get(t)}(t)}return v(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DT(this.auth,D_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",OT(this.auth,yx(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DT(this.auth,Ox(this._delegate,t,NT)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TT(mw(this.auth));case 2:return e.abrupt("return",$x(this._delegate,t,NT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DT(this.auth,L_(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return OT(this.auth,function(e,t,n){return gx.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return DT(this.auth,function(e,t,n){return Dx.apply(this,arguments)}(this._delegate,e,NT))}},{key:"reauthenticateWithRedirect",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TT(mw(this.auth));case 2:return e.abrupt("return",Qx(this._delegate,t,NT));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return nb.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,__(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return ub(we(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return ub(we(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return _x.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return ob.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return rb.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();FT.USER_MAP=new WeakMap;var UT=ik,VT=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;UT(r,"invalid-api-key",{appName:t.name}),UT(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?NT:void 0;this._delegate=n.initialize({options:{persistence:jT(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Qg),this.linkUnderlyingAuth()}return v(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?FT.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){kw(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return H_.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return K_(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return W_.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=xe(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",DT(this._delegate,Y_(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return tb.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=n_.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=xe(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UT(mT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Jx(this._delegate,NT);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",DT(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){mw(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=qT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=qT(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return X_.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return B_.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=xe(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:IT(this._delegate,t),e.t0=t,e.next=e.t0===_T.SESSION?4:e.t0===_T.LOCAL?6:e.t0===_T.NONE?11:13;break;case 4:return n=Sb,e.abrupt("break",14);case 6:return e.next=8,sk(Yb)._isAvailable();case 8:return r=e.sent,n=r?Yb:Ib,e.abrupt("break",14);case 11:return n=Zk,e.abrupt("break",14);case 13:return e.abrupt("return",Zg("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return DT(this._delegate,function(e){return m_.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return DT(this._delegate,A_(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return DT(this._delegate,function(e,t){return V_.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return DT(this._delegate,function(e,t,n){return A_(we(e),r_.credential(t,n))}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return DT(this._delegate,function(e,t,n){return J_.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return OT(this._delegate,function(e,t,n){return vx.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UT(mT(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",DT(this._delegate,Ax(this._delegate,t,NT)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=xe(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return UT(mT(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,TT(this._delegate);case 3:return e.abrupt("return",Kx(this._delegate,t,NT));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Q_.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function qT(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&FT.getOrCreate(e))},error:t,complete:n}}function jT(e,t){var n=function(e,t){var n=ET();if(!n)return[];var r=ew(xT,e,t);switch(n.getItem(r)){case _T.NONE:return[Zk];case _T.LOCAL:return[Yb,Sb];case _T.SESSION:return[Sb];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Yb)||n.push(Yb),"undefined"!==typeof window)for(var r=0,i=[Ib,Sb];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Zk)||n.push(Zk),n}VT.Persistence=_T;var zT=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new bx(RT(Yt.auth()))}return v(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return bx.credential(e,t)}}]),e}();zT.PHONE_SIGN_IN_METHOD=bx.PHONE_SIGN_IN_METHOD,zT.PROVIDER_ID=bx.PROVIDER_ID;var BT=ik,WT=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yt.app();d(this,e),BT(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new fx(t,n,i.auth()),this.type=this._delegate.type}return v(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Ie("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new VT(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:jg,PASSWORD_RESET:zg,RECOVER_EMAIL:Bg,REVERT_SECOND_FACTOR_ADDITION:Wg,VERIFY_AND_CHANGE_EMAIL:Hg,VERIFY_EMAIL:Kg}},EmailAuthProvider:r_,FacebookAuthProvider:u_,GithubAuthProvider:c_,GoogleAuthProvider:s_,OAuthProvider:o_,SAMLAuthProvider:h_,PhoneAuthProvider:zT,PhoneMultiFactorGenerator:MI,RecaptchaVerifier:WT,TwitterAuthProvider:f_,Auth:VT,AuthCredential:bw,Error:J}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.2.24")}(Yt);var HT="@firebase/database",KT="0.13.10",GT="";var QT=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return v(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),re(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:ne(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),YT=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return v(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return ae(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),$T=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new QT(t)}}catch(n){}return new YT},XT=$T("localStorage"),JT=$T("sessionStorage"),ZT=new Le("@firebase/database"),eS=function(){var e=1;return function(){return e++}}(),tS=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,R(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new pe;n.update(t);var r=n.digest();return D.encodeByteArray(r)},nS=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?re(r):r,t+=" "}return t},rS=null,iS=!0,aS=function(e,t){R(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(ZT.logLevel=Ce.VERBOSE,rS=ZT.log.bind(ZT),t&&JT.set("logging_enabled",!0)):"function"===typeof e?rS=e:(rS=null,JT.remove("logging_enabled"))},oS=function(){if(!0===iS&&(iS=!1,null===rS&&!0===JT.get("logging_enabled")&&aS(!0)),rS){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=nS.apply(null,t);rS(r)}},uS=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];oS.apply(void 0,[e].concat(n))}},sS=function(){var e="FIREBASE INTERNAL ERROR: "+nS.apply(void 0,arguments);ZT.error(e)},cS=function(){var e="FIREBASE FATAL ERROR: ".concat(nS.apply(void 0,arguments));throw ZT.error(e),new Error(e)},lS=function(){var e="FIREBASE WARNING: "+nS.apply(void 0,arguments);ZT.warn(e)},hS=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},fS="[MIN_NAME]",dS="[MAX_NAME]",pS=function(e,t){if(e===t)return 0;if(e===fS||t===dS)return-1;if(t===fS||e===dS)return 1;var n=IS(e),r=IS(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},vS=function(e,t){return e===t?0:e<t?-1:1},yS=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+re(t))},mS=function e(t){if("object"!==typeof t||null===t)return re(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=re(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},gS=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function kS(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var wS=function(e){R(!hS(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var _S=new RegExp("^-?(0*)\\d{1,10}$"),bS=-2147483648,xS=2147483647,IS=function(e){if(_S.test(e)){var t=Number(e);if(t>=bS&&t<=xS)return t}return null},TS=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw lS("Exception was thrown by user callback.",e),t}),Math.floor(0))}},SS=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},ES=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return v(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){lS('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),CS=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return v(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(oS("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',lS(e)}}]),e}(),NS=function(){function e(t){d(this,e),this.accessToken=t}return v(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();NS.OWNER="owner";var RS="5",AS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PS="websocket",DS="long_polling",OS=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=XT.get("host:"+t)||this._host}return v(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&XT.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function LS(e,t,n){var r;if(R("string"===typeof t,"typeof type must == string"),R("object"===typeof n,"typeof params must == object"),t===PS)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==DS)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return kS(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var MS=function(){function e(){d(this,e),this.counters_={}}return v(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ae(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return F(void 0,this.counters_)}}]),e}(),FS={},US={};function VS(e){var t=e.toString();return FS[t]||(FS[t]=new MS),FS[t]}var qS=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return v(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&TS((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),jS="start",zS="close",BS=function(){function e(t,n,r,i,a,o,u){var s=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=uS(t),this.stats_=VS(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),LS(n,DS,e)}}return v(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qS(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(W()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new WS((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===jS)n.id=a,n.password=o;else{if(i!==zS)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=RS,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&AS.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=re(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=O(t),r=gS(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!W()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=re(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!W()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),WS=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,W())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=eS(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){oS("frame writing exception"),u.stack&&oS(u.stack),oS(u)}}}return v(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;W()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){oS("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||oS("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),HS=null;"undefined"!==typeof MozWebSocket?HS=MozWebSocket:"undefined"!==typeof WebSocket&&(HS=WebSocket);var KS=function(){function e(t,n,r,i,a,o,u){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=uS(this.connId),this.stats_=VS(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return v(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,XT.set("previous_websocket_failure",!0);try{var r;if(W()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(RS,"/").concat(GT,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new HS(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){XT.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=ne(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(R(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=re(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=gS(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=RS,!W()&&"undefined"!==typeof location&&location.hostname&&AS.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),LS(e,PS,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==HS&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return XT.isInMemoryStorage||!0===XT.get("previous_websocket_failure")}}]),e}();KS.responsesRequiredToBeHealthy=2,KS.healthyTimeout=3e4;var GS=function(){function e(t){d(this,e),this.initTransports_(t)}return v(e,[{key:"initTransports_",value:function(t){var n=KS&&KS.isAvailable(),r=n&&!KS.previouslyFailed();if(t.webSocketOnly&&(n||lS("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[KS];else{var i,a=this.transports_=[],o=y(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[BS,KS]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();GS.globalTransportInitialized_=!1;var QS=function(){function e(t,n,r,i,a,o,u,s,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=uS("c:"+this.id+":"),this.transportManager_=new GS(n),this.log_("Connection created"),this.start_()}return v(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=SS((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=yS("t",e),n=yS("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=yS("t",e),n=yS("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=yS("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?sS("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sS("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),RS!==n&&lS("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),SS((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):SS((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(XT.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),YS=function(){function e(){d(this,e)}return v(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),$S=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},R(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return v(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=u(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){R(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),XS=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||V()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return v(n,[{key:"getInitialEvent",value:function(e){return R("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}($S),JS=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return v(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function ZS(){return new JS("")}function eE(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function tE(e){return e.pieces_.length-e.pieceNum_}function nE(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new JS(e.pieces_,t)}function rE(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function iE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function aE(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new JS(t,0)}function oE(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof JS)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new JS(n,0)}function uE(e){return e.pieceNum_>=e.pieces_.length}function sE(e,t){var n=eE(e),r=eE(t);if(null===n)return t;if(n===r)return sE(nE(e),nE(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function cE(e,t){if(tE(e)!==tE(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function lE(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(tE(e)>tE(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var hE=v((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=iE(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=ke(this.parts_[r]);fE(this)}));function fE(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+dE(e))}function dE(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var pE=function(e){k(n,e);var t=I(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return v(n,[{key:"getInitialEvent",value:function(e){return R("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}($S),vE=1e3,yE=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u,s,c){var l;if(d(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=uS("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=vE,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!W())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return pE.getInstance().on("visible",l.onVisible_,m(l)),-1===e.host.indexOf("fblocal")&&XS.getInstance().on("online",l.onOnline_,m(l)),l}return v(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(re(i)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new $,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=ie(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=ie(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),R(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+re(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):sS("Unrecognized action received from server: "+re(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=vE,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=vE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=vE),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=xe(_e().mark((function e(){var t,r,i,a,o,u,s,c,h,f,d,p,v,y,m=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},h=function(e){R(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)]);case 19:d=e.sent,p=l(d,2),v=p[0],y=p[1],u?oS("getToken() completed but was canceled"):(oS("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=y&&y.token,s=new QS(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){lS(e+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&lS(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){oS("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){oS("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ue(this.interruptReasons_)&&(this.reconnectDelay_=vE,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return mS(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new JS(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){oS("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){oS("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=y(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=y(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";W()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+GT.replace(/\./g,"-")]=1,V()?e["framework.cordova"]=1:z()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=XS.getInstance().currentlyOnline();return ue(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&ae(e,"w")){var n=oe(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();lS("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(YS);yE.nextPersistentConnectionId_=0,yE.nextConnectionId_=0;var mE,gE=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return v(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),kE=function(){function e(){d(this,e)}return v(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new gE(fS,e),r=new gE(fS,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return gE.MIN}}]),e}(),wE=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){return pS(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw A("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return gE.MIN}},{key:"maxPost",value:function(){return new gE(dS,mE)}},{key:"makePost",value:function(e,t){return R("string"===typeof e,"KeyIndex indexValue must always be a string."),new gE(e,mE)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return mE},set:function(e){mE=e}}]),n}(kE),_E=new wE,bE=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return v(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),xE=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:SE.EMPTY_NODE,this.right=null!=a?a:SE.EMPTY_NODE}return v(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return SE.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return SE.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();xE.RED=!0,xE.BLACK=!1;var IE,TE=function(){function e(){d(this,e)}return v(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new xE(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),SE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return v(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,xE.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,xE.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new bE(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new bE(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new bE(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new bE(this.root_,null,this.comparator_,!0,e)}}]),e}();function EE(e,t){return pS(e.name,t.name)}function CE(e,t){return pS(e,t)}SE.EMPTY_NODE=new TE;var NE,RE,AE,PE=function(e){return"number"===typeof e?"number:"+wS(e):"string:"+e},DE=function(e){if(e.isLeafNode()){var t=e.val();R("string"===typeof t||"number"===typeof t||"object"===typeof t&&ae(t,".sv"),"Priority must be a string or number.")}else R(e===IE||e.isEmpty(),"priority of unexpected type.");R(e===IE||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},OE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,R(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),DE(this.priorityNode_)}return v(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return uE(t)?this:".priority"===eE(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=eE(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(R(".priority"!==r||1===tE(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(nE(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+PE(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?wS(this.value_):this.value_,this.lazyHash_=tS(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(R(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return R(i>=0,"Unknown leaf type: "+n),R(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return NE},set:function(e){NE=e}}]),e}();OE.VALUE_TYPE_ORDER=["object","boolean","number","string"];var LE,ME,FE=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?pS(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return gE.MIN}},{key:"maxPost",value:function(){return new gE(dS,new OE("[PRIORITY-POST]",AE))}},{key:"makePost",value:function(e,t){var n=RE(e);return new gE(t,new OE("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(kE),UE=new FE,VE=Math.log(2),qE=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/VE,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return v(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),jE=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new xE(o,a.node,xE.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new xE(o,a.node,xE.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],h=n?n(l):l;s(new xE(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,xE.BLACK):(u(h,xE.BLACK),u(h,xE.RED))}return a}(new qE(e.length));return new SE(r||t,a)},zE={},BE=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return v(e,[{key:"get",value:function(e){var t=oe(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof SE?t:null}},{key:"hasIndex",value:function(e){return ae(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){R(t!==_E,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(gE.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?jE(i,t.getCompare()):zE;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(se(this.indexes_,(function(e,i){var a=oe(r.indexSet_,i);if(R(a,"Missing index implementation for "+i),e===zE){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(gE.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),jE(o,a.getCompare())}return zE}var c=n.get(t.name),l=e;return c&&(l=l.remove(new gE(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(se(this.indexes_,(function(e){if(e===zE)return e;var r=n.get(t.name);return r?e.remove(new gE(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return R(zE&&UE,"ChildrenNode.ts has not been loaded"),LE=LE||new e({".priority":zE},{".priority":UE})}}]),e}(),WE=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&DE(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return v(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||ME}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ME:t}},{key:"getChild",value:function(e){var t=eE(e);return null===t?this:this.getImmediateChild(t).getChild(nE(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(R(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new gE(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?ME:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=eE(e);if(null===n)return t;R(".priority"!==eE(e)||1===tE(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(nE(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(UE,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+PE(this.getPriority().val())+":"),this.forEachChild(UE,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":tS(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new gE(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new gE(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new gE(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,gE.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,gE.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===HE?-1:0}},{key:"withIndex",value:function(t){if(t===_E||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===_E||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(UE),r=t.getIterator(UE),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===_E?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return ME||(ME=new e(new SE(CE),null,BE.Default))}}]),e}();WE.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var HE=new(function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,new SE(CE),WE.EMPTY_NODE,BE.Default)}return v(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return WE.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(WE));Object.defineProperties(gE,{MIN:{value:new gE(fS,WE.EMPTY_NODE)},MAX:{value:new gE(dS,HE)}}),wE.__EMPTY_NODE=WE.EMPTY_NODE,OE.__childrenNodeConstructor=WE,IE=HE,function(e){AE=e}(HE);function KE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return WE.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),R(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new OE(n,KE(t))}if(e instanceof Array){var r=WE.EMPTY_NODE;return kS(e,(function(t,n){if(ae(e,t)&&"."!==t.substring(0,1)){var i=KE(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(KE(t))}var i=[],a=!1,o=e;if(kS(o,(function(e,t){if("."!==e.substring(0,1)){var n=KE(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new gE(e,n)))}})),0===i.length)return WE.EMPTY_NODE;var u=jE(i,EE,(function(e){return e.name}),CE);if(a){var s=jE(i,UE.getCompare());return new WE(u,KE(t),new BE({".priority":s},{".priority":UE}))}return new WE(u,KE(t),BE.Default)}!function(e){RE=e}(KE);var GE=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,R(!uE(e)&&".priority"!==eE(e),"Can't create PathIndex with empty path or .priority key"),r}return v(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?pS(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=KE(e),r=WE.EMPTY_NODE.updateChild(this.indexPath_,n);return new gE(t,r)}},{key:"maxPost",value:function(){var e=WE.EMPTY_NODE.updateChild(this.indexPath_,HE);return new gE(dS,e)}},{key:"toString",value:function(){return iE(this.indexPath_,0).join("/")}}]),n}(kE),QE=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?pS(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return gE.MIN}},{key:"maxPost",value:function(){return gE.MAX}},{key:"makePost",value:function(e,t){var n=KE(e);return new gE(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(kE),YE=new QE,$E="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function XE(e){return{type:"value",snapshotNode:e}}function JE(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function ZE(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function eC(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var tC=function(){function e(t){d(this,e),this.index_=t}return v(e,[{key:"updateChild",value:function(e,t,n,r,i,a){R(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var o=e.getImmediateChild(t);return o.getChild(r).equals(n.getChild(r))&&o.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(ZE(t,o)):R(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?a.trackChildChange(JE(t,n)):a.trackChildChange(eC(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}},{key:"updateFullNode",value:function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(UE,(function(e,r){t.hasChild(e)||n.trackChildChange(ZE(e,r))})),t.isLeafNode()||t.forEachChild(UE,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(eC(t,r,i))}else n.trackChildChange(JE(t,r))}))),t.withIndex(this.index_)}},{key:"updatePriority",value:function(e,t){return e.isEmpty()?WE.EMPTY_NODE:e.updatePriority(t)}},{key:"filtersNodes",value:function(){return!1}},{key:"getIndexedFilter",value:function(){return this}},{key:"getIndex",value:function(){return this.index_}}]),e}(),nC=function(){function e(t){d(this,e),this.indexedFilter_=new tC(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return v(e,[{key:"getStartPost",value:function(){return this.startPost_}},{key:"getEndPost",value:function(){return this.endPost_}},{key:"matches",value:function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}},{key:"updateChild",value:function(e,t,n,r,i,a){return this.matches(new gE(t,n))||(n=WE.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,a)}},{key:"updateFullNode",value:function(e,t,n){t.isLeafNode()&&(t=WE.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(WE.EMPTY_NODE);var i=this;return t.forEachChild(UE,(function(e,t){i.matches(new gE(e,t))||(r=r.updateImmediateChild(e,WE.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.indexedFilter_}},{key:"getIndex",value:function(){return this.index_}}],[{key:"getStartPost_",value:function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}},{key:"getEndPost_",value:function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}]),e}(),rC=function(){function e(t){d(this,e),this.rangedFilter_=new nC(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return v(e,[{key:"updateChild",value:function(e,t,n,r,i,a){return this.rangedFilter_.matches(new gE(t,n))||(n=WE.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,a):this.fullLimitUpdateChild_(e,t,n,i,a)}},{key:"updateFullNode",value:function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=WE.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){var i;r=WE.EMPTY_NODE.withIndex(this.index_),i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var a=0;i.hasNext()&&a<this.limit_;){var o=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),o)<=0:this.index_.compare(o,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(o.name,o.node),a++}}else{var u,s,c,l;if(r=(r=t.withIndex(this.index_)).updatePriority(WE.EMPTY_NODE),this.reverse_){l=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),s=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(e,t){return h(t,e)}}else l=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),s=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();for(var f=0,d=!1;l.hasNext();){var p=l.getNext();!d&&c(u,p)<=0&&(d=!0),d&&f<this.limit_&&c(p,s)<=0?f++:r=r.updateImmediateChild(p.name,WE.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}},{key:"updatePriority",value:function(e,t){return e}},{key:"filtersNodes",value:function(){return!0}},{key:"getIndexedFilter",value:function(){return this.rangedFilter_.getIndexedFilter()}},{key:"getIndex",value:function(){return this.index_}},{key:"fullLimitUpdateChild_",value:function(e,t,n,r,i){var a;if(this.reverse_){var o=this.index_.getCompare();a=function(e,t){return o(t,e)}}else a=this.index_.getCompare();var u=e;R(u.numChildren()===this.limit_,"");var s=new gE(t,n),c=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(s);if(u.hasChild(t)){for(var h=u.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:a(f,s);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(eC(t,n,h)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(ZE(t,h));var p=u.updateImmediateChild(t,WE.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(JE(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?e:l&&a(c,s)>=0?(null!=i&&(i.trackChildChange(ZE(c.name,c.node)),i.trackChildChange(JE(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(c.name,WE.EMPTY_NODE)):e}}]),e}(),iC=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=UE}return v(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fS}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:dS}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===UE}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function aC(e){var t,n={};return e.isDefault()||(e.index_===UE?t="$priority":e.index_===YE?t="$value":e.index_===_E?t="$key":(R(e.index_ instanceof GE,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=re(t),e.startSet_&&(n.startAt=re(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+re(e.indexStartName_))),e.endSet_&&(n.endAt=re(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+re(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function oC(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==UE&&(t.i=e.index_.toString()),t}var uC=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=uS("p:rest:"),o.listens_={},o}return v(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=aC(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),oe(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=aC(e._queryParams),r=e._path.toString(),i=new $;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+he(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=ne(c.responseText)}catch(n){lS("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&lS("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(YS),sC=function(){function e(){d(this,e),this.rootNode_=WE.EMPTY_NODE}return v(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function cC(){return{value:null,children:new Map}}function lC(e,t,n){if(uE(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=eE(t);e.children.has(r)||e.children.set(r,cC()),lC(e.children.get(r),t=nE(t),n)}}function hC(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){hC(r,new JS(t.toString()+"/"+e),n)}))}var fC,dC=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return v(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&kS(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),pC=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new dC(t);var r=1e4+2e4*Math.random();SS(this.reportStats_.bind(this),Math.floor(r))}return v(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;kS(t,(function(t,i){i>0&&ae(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),SS(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function vC(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(fC||(fC={}));var yC,mC=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=fC.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return v(e,[{key:"operationForChild",value:function(t){if(uE(this.path)){if(null!=this.affectedTree.value)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new JS(t));return new e(ZS(),n,this.revert)}return R(eE(this.path)===t,"operationForChild called for unrelated child."),new e(nE(this.path),this.affectedTree,this.revert)}}]),e}(),gC=function(){function e(t,n){d(this,e),this.source=t,this.path=n,this.type=fC.LISTEN_COMPLETE}return v(e,[{key:"operationForChild",value:function(t){return uE(this.path)?new e(this.source,ZS()):new e(this.source,nE(this.path))}}]),e}(),kC=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=fC.OVERWRITE}return v(e,[{key:"operationForChild",value:function(t){return uE(this.path)?new e(this.source,ZS(),this.snap.getImmediateChild(t)):new e(this.source,nE(this.path),this.snap)}}]),e}(),wC=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=fC.MERGE}return v(e,[{key:"operationForChild",value:function(t){if(uE(this.path)){var n=this.children.subtree(new JS(t));return n.isEmpty()?null:n.value?new kC(this.source,ZS(),n.value):new e(this.source,ZS(),n)}return R(eE(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,nE(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),_C=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return v(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(uE(e))return this.isFullyInitialized()&&!this.filtered_;var t=eE(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}(),bC=v((function e(t){d(this,e),this.query_=t,this.index_=this.query_._queryParams.getIndex()}));function xC(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw A("Should only compare child_ events.");var r=new gE(t.childName,t.snapshotNode),i=new gE(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function IC(e,t){return{eventCache:e,serverCache:t}}function TC(e,t,n,r){return IC(new _C(t,n,r),e.serverCache)}function SC(e,t,n,r){return IC(e.eventCache,new _C(t,n,r))}function EC(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function CC(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var NC=function(){return yC||(yC=new SE(vS)),yC},RC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NC();d(this,e),this.value=t,this.children=n}return v(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:ZS(),value:this.value};if(uE(e))return null;var n=eE(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(nE(e),t);return null!=i?{path:oE(new JS(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(uE(t))return this;var n=eE(t),r=this.children.get(n);return null!==r?r.subtree(nE(t)):new e(null)}},{key:"set",value:function(t,n){if(uE(t))return new e(n,this.children);var r=eE(t),i=(this.children.get(r)||new e(null)).set(nE(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(uE(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=eE(t),r=this.children.get(n);if(r){var i,a=r.remove(nE(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(uE(e))return this.value;var t=eE(e),n=this.children.get(t);return n?n.get(nE(e)):null}},{key:"setTree",value:function(t,n){if(uE(t))return n;var r,i=eE(t),a=(this.children.get(i)||new e(null)).setTree(nE(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(ZS(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(oE(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,ZS(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(uE(e))return null;var i=eE(e),a=this.children.get(i);return a?a.findOnPath_(nE(e),oE(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,ZS(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(uE(t))return this;this.value&&r(n,this.value);var i=eE(t),a=this.children.get(i);return a?a.foreachOnPath_(nE(t),oE(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(ZS(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(oE(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return kS(t,(function(e,t){n=n.set(new JS(e),t)})),n}}]),e}(),AC=function(){function e(t){d(this,e),this.writeTree_=t}return v(e,null,[{key:"empty",value:function(){return new e(new RC(null))}}]),e}();function PC(e,t,n){if(uE(t))return new AC(new RC(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=sE(i,t);return a=a.updateChild(o,n),new AC(e.writeTree_.set(i,a))}var u=new RC(n),s=e.writeTree_.setTree(t,u);return new AC(s)}function DC(e,t,n){var r=e;return kS(n,(function(e,n){r=PC(r,oE(t,e),n)})),r}function OC(e,t){if(uE(t))return AC.empty();var n=e.writeTree_.setTree(t,new RC(null));return new AC(n)}function LC(e,t){return null!=MC(e,t)}function MC(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(sE(n.path,t)):null}function FC(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(UE,(function(e,n){t.push(new gE(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new gE(e,n.value))})),t}function UC(e,t){if(uE(t))return e;var n=MC(e,t);return new AC(null!=n?new RC(n):e.writeTree_.subtree(t))}function VC(e){return e.writeTree_.isEmpty()}function qC(e,t){return jC(ZS(),e.writeTree_,t)}function jC(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(R(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=jC(oE(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(oE(e,".priority"),r)),n}function zC(e,t){return nN(t,e)}function BC(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function WC(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));R(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&HC(u,r.path)?i=!1:lE(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=GC(e.allWrites,KC,ZS()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=OC(e.visibleWrites,r.path):kS(r.children,(function(t){e.visibleWrites=OC(e.visibleWrites,oE(r.path,t))}));return!0}return!1}function HC(e,t){if(e.snap)return lE(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&lE(oE(e.path,n),t))return!0;return!1}function KC(e){return e.visible}function GC(e,t,n){for(var r=AC.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)lE(n,o)?r=PC(r,u=sE(n,o),a.snap):lE(o,n)&&(u=sE(o,n),r=PC(r,ZS(),a.snap.getChild(u)));else{if(!a.children)throw A("WriteRecord should have .snap or .children");if(lE(n,o))r=DC(r,u=sE(n,o),a.children);else if(lE(o,n))if(uE(u=sE(o,n)))r=DC(r,ZS(),a.children);else{var s=oe(a.children,eE(u));if(s){var c=s.getChild(nE(u));r=PC(r,ZS(),c)}}}}}return r}function QC(e,t,n,r,i){if(r||i){var a=UC(e.visibleWrites,t);if(!i&&VC(a))return n;if(i||null!=n||LC(a,ZS())){return qC(GC(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(lE(e.path,t)||lE(t,e.path))}),t),n||WE.EMPTY_NODE)}return null}var o=MC(e.visibleWrites,t);if(null!=o)return o;var u=UC(e.visibleWrites,t);return VC(u)?n:null!=n||LC(u,ZS())?qC(u,n||WE.EMPTY_NODE):null}function YC(e,t,n,r){return QC(e.writeTree,e.treePath,t,n,r)}function $C(e,t){return function(e,t,n){var r=WE.EMPTY_NODE,i=MC(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(UE,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=UC(e.visibleWrites,t);return n.forEachChild(UE,(function(e,t){var n=qC(UC(a,new JS(e)),t);r=r.updateImmediateChild(e,n)})),FC(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return FC(UC(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function XC(e,t,n,r){return function(e,t,n,r,i){R(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=oE(t,n);if(LC(e.visibleWrites,a))return null;var o=UC(e.visibleWrites,a);return VC(o)?i.getChild(n):qC(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function JC(e,t){return function(e,t){return MC(e.visibleWrites,t)}(e.writeTree,oE(e.treePath,t))}function ZC(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=UC(e.visibleWrites,t),c=MC(s,ZS());if(null!=c)u=c;else{if(null==n)return[];u=qC(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=o.getCompare(),f=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function eN(e,t,n){return function(e,t,n,r){var i=oE(t,n),a=MC(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?qC(UC(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function tN(e,t){return nN(oE(e.treePath,t),e.writeTree)}function nN(e,t){return{treePath:e,writeTree:t}}var rN=function(){function e(){d(this,e),this.changeMap=new Map}return v(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;R("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),R(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,eC(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,ZE(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,JE(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw A("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,eC(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),iN=new(function(){function e(){d(this,e)}return v(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),aN=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return v(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new _C(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eN(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:CC(this.viewCache_),i=ZC(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function oN(e,t,n,r,i){var a,o,u=new rN;if(n.type===fC.OVERWRITE){var s=n;s.source.fromUser?a=cN(e,t,s.path,s.snap,r,i,u):(R(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!uE(s.path),a=sN(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===fC.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=oE(n,r);lN(t,eE(c))&&(u=cN(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=oE(n,r);lN(t,eE(c))||(u=cN(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(R(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=fN(e,t,c.path,c.children,r,i,o,u))}else if(n.type===fC.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=JC(r,n))return t;var u,s=new aN(r,t,i),c=t.eventCache.getNode();if(uE(n)||".priority"===eE(n)){var l;if(t.serverCache.isFullyInitialized())l=YC(r,CC(t));else{var h=t.serverCache.getNode();R(h instanceof WE,"serverChildren would be complete if leaf node"),l=$C(r,h)}u=e.filter.updateFullNode(c,l,a)}else{var f=eE(n),d=eN(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,nE(n),s,a):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,WE.EMPTY_NODE,nE(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=YC(r,CC(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=JC(r,ZS()),TC(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=JC(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(uE(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return sN(e,t,n,s.getNode().getChild(n),i,a,u,o);if(uE(n)){var c=new RC(null);return s.getNode().forEachChild(_E,(function(e,t){c=c.set(new JS(e),t)})),fN(e,t,n,c,i,a,u,o)}return t}var l=new RC(null);return r.foreach((function(e,t){var r=oE(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),fN(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==fC.LISTEN_COMPLETE)throw A("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=SC(t,a.getNode(),a.isFullyInitialized()||uE(n),a.isFiltered());return uN(e,o,n,r,iN,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=EC(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(XE(EC(t)))}}(t,a,h),{viewCache:a,changes:h}}function uN(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=JC(r,n))return t;if(uE(n))if(R(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=CC(t),l=$C(r,c instanceof WE?c:WE.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var h=YC(r,CC(t));o=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=eE(n);if(".priority"===f){R(1===tE(n),"Can't have a priority with additional path components");var d=s.getNode(),p=XC(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,y=nE(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=XC(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(y,m):s.getNode().getImmediateChild(f)}else v=eN(r,f,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),f,v,y,i,a):s.getNode()}}return TC(t,o,s.isFullyInitialized()||uE(n),e.filter.filtersNodes())}function sN(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(uE(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=eE(n);if(!c.isCompleteForPath(n)&&tE(n)>1)return t;var d=nE(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,iN,null)}var v=SC(t,s,c.isFullyInitialized()||uE(n),l.filtersNodes());return uN(e,v,n,i,new aN(i,v,a),u)}function cN(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new aN(i,t,a);if(uE(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=TC(t,s,!0,e.filter.filtersNodes());else{var h=eE(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=TC(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=nE(n),p=c.getNode().getImmediateChild(h);if(uE(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===rE(d)&&v.getChild(aE(d)).isEmpty()?v:v.updateChild(d,r):WE.EMPTY_NODE}if(p.equals(f))u=t;else u=TC(t,e.filter.updateChild(c.getNode(),h,f,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function lN(e,t){return e.eventCache.isCompleteForChild(t)}function hN(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function fN(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=uE(n)?r:new RC(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=hN(0,t.serverCache.getNode().getImmediateChild(n),r);c=sN(e,c,new JS(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var h=hN(0,t.serverCache.getNode().getImmediateChild(n),r);c=sN(e,c,new JS(n),h,i,a,o,u)}})),c}var dN,pN=function(){function e(t,n){d(this,e),this.query_=t,this.eventRegistrations_=[];var r,i=this.query_._queryParams,a=new tC(i.getIndex()),o=(r=i).loadsAllData()?new tC(r.getIndex()):r.hasLimit()?new rC(r):new nC(r);this.processor_=function(e){return{filter:e}}(o);var u=n.serverCache,s=n.eventCache,c=a.updateFullNode(WE.EMPTY_NODE,u.getNode(),null),l=o.updateFullNode(WE.EMPTY_NODE,s.getNode(),null),h=new _C(c,u.isFullyInitialized(),a.filtersNodes()),f=new _C(l,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=IC(f,h),this.eventGenerator_=new bC(this.query_)}return v(e,[{key:"query",get:function(){return this.query_}}]),e}();function vN(e,t){var n=CC(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!uE(t)&&!n.getImmediateChild(eE(t)).isEmpty())?n.getChild(t):null}function yN(e){return 0===e.eventRegistrations_.length}function mN(e,t,n){var r=[];if(n){R(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],o=0;o<e.eventRegistrations_.length;++o){var u=e.eventRegistrations_[o];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(o+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function gN(e,t,n,r){t.type===fC.MERGE&&null!==t.source.queryId&&(R(CC(e.viewCache_),"We should always have a full cache before handling merges"),R(EC(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=oN(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,R(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),R(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),R(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,kN(e,u.changes,u.viewCache.eventCache.getNode(),null)}function kN(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),xC(e,i,"child_removed",t,r,n),xC(e,i,"child_added",t,r,n),xC(e,i,"child_moved",a,r,n),xC(e,i,"child_changed",t,r,n),xC(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var wN,_N=v((function e(){d(this,e),this.views=new Map}));function bN(e){return 0===e.views.size}function xN(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return R(null!=a,"SyncTree gave us an op for an invalid query."),gN(a,t,n,r)}var o,u=[],s=y(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(gN(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function IN(e,t,n,r,i){var a=t._queryIdentifier,o=e.views.get(a);if(!o){var u=YC(n,i?r:null),s=!1;u?s=!0:r instanceof WE?(u=$C(n,r),s=!1):(u=WE.EMPTY_NODE,s=!1);var c=IC(new _C(u,s,!1),new _C(r,i,!1));return new pN(t,c)}return o}function TN(e,t,n,r,i,a){var o=IN(e,t,r,i,a);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(UE,(function(e,t){r.push(JE(e,t))})),n.isFullyInitialized()&&r.push(XE(n.getNode())),kN(e,r,n.getNode(),t)}(o,n)}function SN(e,t,n,r){var i=t._queryIdentifier,a=[],o=[],u=AN(e);if("default"===i){var s,c=y(e.views.entries());try{for(c.s();!(s=c.n()).done;){var h=l(s.value,2),f=h[0],d=h[1];o=o.concat(mN(d,n,r)),yN(d)&&(e.views.delete(f),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(v){c.e(v)}finally{c.f()}}else{var p=e.views.get(i);p&&(o=o.concat(mN(p,n,r)),yN(p)&&(e.views.delete(i),p.query._queryParams.loadsAllData()||a.push(p.query)))}return u&&!AN(e)&&a.push(new(R(dN,"Reference.ts has not been loaded"),dN)(t._repo,t._path)),{removed:a,events:o}}function EN(e){var t,n=[],r=y(e.views.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;i.query._queryParams.loadsAllData()||n.push(i)}}catch(a){r.e(a)}finally{r.f()}return n}function CN(e,t){var n,r=null,i=y(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||vN(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}function NN(e,t){if(t._queryParams.loadsAllData())return PN(e);var n=t._queryIdentifier;return e.views.get(n)}function RN(e,t){return null!=NN(e,t)}function AN(e){return null!=PN(e)}function PN(e){var t,n=y(e.views.values());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.query._queryParams.loadsAllData())return r}}catch(i){n.e(i)}finally{n.f()}return null}var DN=1,ON=v((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new RC(null),this.pendingWriteTree_={visibleWrites:AC.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function LN(e,t,n,r,i){return function(e,t,n,r,i){R(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=PC(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?BN(e,new kC({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function MN(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=BC(e.pendingWriteTree_,t),i=WC(e.pendingWriteTree_,t);if(i){var a=new RC(null);return null!=r.snap?a=a.set(ZS(),!0):kS(r.children,(function(e){a=a.set(new JS(e),!0)})),BN(e,new mC(r.path,a,n))}return[]}function FN(e,t,n){return BN(e,new kC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function UN(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=t._path,o=e.syncPointTree_.get(a),u=[];if(o&&("default"===t._queryIdentifier||RN(o,t))){var s=SN(o,t,n,r);bN(o)&&(e.syncPointTree_=e.syncPointTree_.remove(a));var c=s.removed;if(u=s.events,!i){var l=-1!==c.findIndex((function(e){return e._queryParams.loadsAllData()})),h=e.syncPointTree_.findOnPath(a,(function(e,t){return AN(t)}));if(l&&!h){var f=e.syncPointTree_.subtree(a);if(!f.isEmpty())for(var d=JN(f),p=0;p<d.length;++p){var v=d[p],y=v.query,m=KN(e,v);e.listenProvider_.startListening(ZN(y),GN(e,y),m.hashFn,m.onComplete)}}if(!h&&c.length>0&&!r)if(l){var g=null;e.listenProvider_.stopListening(ZN(t),g)}else c.forEach((function(t){var n=e.queryToTagMap.get(QN(t));e.listenProvider_.stopListening(ZN(t),n)}))}eR(e,c)}return u}function VN(e,t,n,r){var i=YN(e,r);if(null!=i){var a=$N(i),o=a.path,u=a.queryId,s=sE(o,t);return XN(e,o,new kC(vC(u),s,n))}return[]}function qN(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t._path,a=null,o=!1;e.syncPointTree_.foreachOnPath(i,(function(e,t){var n=sE(e,i);a=a||CN(t,n),o=o||AN(t)}));var u,s=e.syncPointTree_.get(i);if(s?(o=o||AN(s),a=a||CN(s,ZS())):(s=new _N,e.syncPointTree_=e.syncPointTree_.set(i,s)),null!=a)u=!0;else{u=!1,a=WE.EMPTY_NODE;var c=e.syncPointTree_.subtree(i);c.foreachChild((function(e,t){var n=CN(t,ZS());n&&(a=a.updateImmediateChild(e,n))}))}var l=RN(s,t);if(!l&&!t._queryParams.loadsAllData()){var h=QN(t);R(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=tR();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=zC(e.pendingWriteTree_,i),p=TN(s,t,n,d,a,u);if(!l&&!o&&!r){var v=NN(s,t);p=p.concat(nR(e,t,v))}return p}function jN(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=CN(n,sE(e,t));if(r)return r}));return QC(r,t,i,n,!0)}function zN(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=sE(e,n);r=r||CN(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||CN(i,ZS()):(i=new _N,e.syncPointTree_=e.syncPointTree_.set(n,i));var a=null!=r,o=a?new _C(r,!0,!1):null;return function(e){return EC(e.viewCache_)}(IN(i,t,zC(e.pendingWriteTree_,t._path),a?o.getNode():WE.EMPTY_NODE,a))}function BN(e,t){return WN(t,e.syncPointTree_,null,zC(e.pendingWriteTree_,ZS()))}function WN(e,t,n,r){if(uE(e.path))return HN(e,t,n,r);var i=t.get(ZS());null==n&&null!=i&&(n=CN(i,ZS()));var a=[],o=eE(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=tN(r,o);a=a.concat(WN(u,s,c,l))}return i&&(a=a.concat(xN(i,e,r,n))),a}function HN(e,t,n,r){var i=t.get(ZS());null==n&&null!=i&&(n=CN(i,ZS()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=tN(r,t),s=e.operationForChild(t);s&&(a=a.concat(HN(s,i,o,u)))})),i&&(a=a.concat(xN(i,e,r,n))),a}function KN(e,t){var n=t.query,r=GN(e,n);return{hashFn:function(){var e=function(e){return e.viewCache_.serverCache.getNode()}(t)||WE.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=YN(e,n);if(r){var i=$N(r),a=i.path,o=i.queryId,u=sE(a,t);return XN(e,a,new gC(vC(o),u))}return[]}(e,n._path,r):function(e,t){return BN(e,new gC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return UN(e,n,null,i)}}}function GN(e,t){var n=QN(t);return e.queryToTagMap.get(n)}function QN(e){return e._path.toString()+"$"+e._queryIdentifier}function YN(e,t){return e.tagToQueryMap.get(t)}function $N(e){var t=e.indexOf("$");return R(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new JS(e.substr(0,t))}}function XN(e,t,n){var r=e.syncPointTree_.get(t);return R(r,"Missing sync point for query tag that we're tracking"),xN(r,n,zC(e.pendingWriteTree_,t),null)}function JN(e){return e.fold((function(e,t,n){if(t&&AN(t))return[PN(t)];var r=[];return t&&(r=EN(t)),kS(n,(function(e,t){r=r.concat(t)})),r}))}function ZN(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(R(wN,"Reference.ts has not been loaded"),wN)(e._repo,e._path):e}function eR(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=QN(r),a=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(a)}}}function tR(){return DN++}function nR(e,t,n){var r=t._path,i=GN(e,t),a=KN(e,n),o=e.listenProvider_.startListening(ZN(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)R(!AN(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var s=u.fold((function(e,t,n){if(!uE(e)&&t&&AN(t))return[PN(t).query];var r=[];return t&&(r=r.concat(EN(t).map((function(e){return e.query})))),kS(n,(function(e,t){r=r.concat(t)})),r})),c=0;c<s.length;++c){var l=s[c];e.listenProvider_.stopListening(ZN(l),GN(e,l))}return o}var rR=function(){function e(t){d(this,e),this.node_=t}return v(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),iR=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return v(e,[{key:"getImmediateChild",value:function(t){var n=oE(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return jN(this.syncTree_,this.path_)}}]),e}(),aR=function(e,t,n){return e&&"object"===typeof e?(R(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?oR(e[".sv"],t,n):"object"===typeof e[".sv"]?uR(e[".sv"],t):void R(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},oR=function(e,t,n){if("timestamp"===e)return n.timestamp;R(!1,"Unexpected server value: "+e)},uR=function(e,t,n){e.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&R(!1,"Unexpected increment value: "+r);var i=t.node();if(R(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},sR=function(e,t,n,r){return lR(t,new iR(n,e),r)},cR=function(e,t,n){return lR(e,new rR(t),n)};function lR(e,t,n){var r,i=e.getPriority().val(),a=aR(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=aR(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new OE(u,KE(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new OE(a))),s.forEachChild(UE,(function(e,i){var a=lR(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var hR=v((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function fR(e,t){for(var n=t instanceof JS?t:new JS(t),r=e,i=eE(n);null!==i;){var a=oe(r.node.children,i)||{children:{},childCount:0};r=new hR(i,r,a),i=eE(n=nE(n))}return r}function dR(e){return e.node.value}function pR(e,t){e.node.value=t,kR(e)}function vR(e){return e.node.childCount>0}function yR(e,t){kS(e.node.children,(function(n,r){t(new hR(n,e,r))}))}function mR(e,t,n,r){n&&!r&&t(e),yR(e,(function(e){mR(e,t,!0,r)})),n&&r&&t(e)}function gR(e){return new JS(null===e.parent?e.name:gR(e.parent)+"/"+e.name)}function kR(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===dR(e)&&!vR(e)}(n),i=ae(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,kR(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,kR(e))}(e.parent,e.name,e)}var wR=/[\[\].#$\/\u0000-\u001F\u007F]/,_R=/[\[\].#$\u0000-\u001F\u007F]/,bR=10485760,xR=function(e){return"string"===typeof e&&0!==e.length&&!wR.test(e)},IR=function(e){return"string"===typeof e&&0!==e.length&&!_R.test(e)},TR=function(e,t,n,r){r&&void 0===t||SR(ge(e,"value"),t,n)},SR=function e(t,n,r){var i=r instanceof JS?new hE(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+dE(i));if("function"===typeof n)throw new Error(t+"contains a function "+dE(i)+" with contents = "+n.toString());if(hS(n))throw new Error(t+"contains "+n.toString()+" "+dE(i));if("string"===typeof n&&n.length>bR/3&&ke(n)>bR)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+dE(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(kS(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!xR(n)))throw new Error(t+" contains an invalid key ("+n+") "+dE(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=ke(t),fE(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=ke(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+dE(i)+" in addition to actual children.")}},ER=function(e,t,n,r){if((!r||void 0!==n)&&!IR(n))throw new Error(ge(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},CR=function(e,t){if(".info"===eE(t))throw new Error(e+" failed = Can't modify data under /.info/")},NR=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!xR(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),IR(e)}(n))throw new Error(ge(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},RR=v((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function AR(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||cE(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function PR(e,t,n){AR(e,n),DR(e,(function(e){return lE(e,t)||lE(t,e)}))}function DR(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(OR(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function OR(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();rS&&oS("event: "+n.toString()),TS(r)}}}var LR="repo_interrupt",MR=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new RR,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=cC(),this.transactionQueueTree_=new hR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return v(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function FR(e,t,n){if(e.stats_=VS(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new uC(e.repoInfo_,(function(t,n,r,i){qR(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return jR(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{re(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new yE(e.repoInfo_,t,(function(t,n,r,i){qR(e,t,n,r,i)}),(function(t){jR(e,t)}),(function(t){!function(e,t){kS(t,(function(t,n){zR(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return US[n]||(US[n]=t()),US[n]}(e.repoInfo_,(function(){return new pC(e.stats_,e.server_)})),e.infoData_=new sC,e.infoSyncTree_=new ON({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=FN(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),zR(e,"connected",!1),e.serverSyncTree_=new ON({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);PR(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function UR(e){var t=e.infoData_.getNode(new JS(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function VR(e){return(t=(t={timestamp:UR(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function qR(e,t,n,r,i){e.dataUpdateCount++;var a=new JS(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=se(n,(function(e){return KE(e)}));o=function(e,t,n,r){var i=YN(e,r);if(i){var a=$N(i),o=a.path,u=a.queryId,s=sE(o,t),c=RC.fromObject(n);return XN(e,o,new wC(vC(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=KE(n);o=VN(e.serverSyncTree_,a,s,i)}else if(r){var c=se(n,(function(e){return KE(e)}));o=function(e,t,n){var r=RC.fromObject(n);return BN(e,new wC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=KE(n);o=FN(e.serverSyncTree_,a,l)}var h=a;o.length>0&&(h=XR(e,a)),PR(e.eventQueue_,h,o)}function jR(e,t){zR(e,"connected",t),!1===t&&function(e){KR(e,"onDisconnectEvents");var t=VR(e),n=cC();hC(e.onDisconnect_,ZS(),(function(r,i){var a=sR(r,i,e.serverSyncTree_,t);lC(n,r,a)}));var r=[];hC(n,ZS(),(function(t,n){r=r.concat(FN(e.serverSyncTree_,t,n));var i=nA(e,t);XR(e,i)})),e.onDisconnect_=cC(),PR(e.eventQueue_,ZS(),r)}(e)}function zR(e,t,n){var r=new JS("/.info/"+t),i=KE(n);e.infoData_.updateSnapshot(r,i);var a=FN(e.infoSyncTree_,r,i);PR(e.eventQueue_,r,a)}function BR(e){return e.nextWriteId_++}function WR(e,t,n,r,i){KR(e,"set",{path:t.toString(),value:n,priority:r});var a=VR(e),o=KE(n,r),u=jN(e.serverSyncTree_,t),s=cR(o,u,a),c=BR(e),l=LN(e.serverSyncTree_,t,s,c,!0);AR(e.eventQueue_,l),e.server_.put(t.toString(),o.val(!0),(function(n,r){var a="ok"===n;a||lS("set at "+t+" failed: "+n);var o=MN(e.serverSyncTree_,c,!a);PR(e.eventQueue_,t,o),GR(e,i,n,r)}));var h=nA(e,t);XR(e,h),PR(e.eventQueue_,h,[])}function HR(e){e.persistentConnection_&&e.persistentConnection_.interrupt(LR)}function KR(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];oS.apply(void 0,[t].concat(r))}function GR(e,t,n,r){t&&TS((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var a=new Error(i);a.code=e,t(a)}}))}function QR(e,t,n){return jN(e.serverSyncTree_,t,n)||WE.EMPTY_NODE}function YR(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||tA(e,t),dR(t)){var n=ZR(e,t);R(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&$R(e,gR(t),n)}else vR(t)&&yR(t,(function(t){YR(e,t)}))}function $R(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=QR(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];R(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=sE(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),h=t;e.server_.put(h.toString(),l,(function(r){KR(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(MN(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);tA(e,fR(e.transactionQueueTree_,t)),YR(e,e.transactionQueueTree_),PR(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)TS(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{lS("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}XR(e,t)}}),o)}function XR(e,t){var n=JR(e,t),r=gR(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=sE(n,s.path),l=!1,h=void 0;if(R(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,h=s.abortReason,i=i.concat(MN(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,h="maxretry",i=i.concat(MN(e.serverSyncTree_,s.currentWriteId,!0));else{var f=QR(e,s.path,o);s.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){SR("transaction failed: Data returned ",d,s.path);var p=KE(d);"object"===typeof d&&null!=d&&ae(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=s.currentWriteId,y=VR(e),m=cR(p,f,y);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=m,s.currentWriteId=BR(e),o.splice(o.indexOf(v),1),i=(i=i.concat(LN(e.serverSyncTree_,s.path,m,s.currentWriteId,s.applyLocally))).concat(MN(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(MN(e.serverSyncTree_,s.currentWriteId,!0))}PR(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===h?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(h),!1,null)}))))},s=0;s<t.length;s++)u(s);tA(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)TS(r[c]);YR(e,e.transactionQueueTree_)}(e,ZR(e,n),r),r}function JR(e,t){var n,r=e.transactionQueueTree_;for(n=eE(t);null!==n&&void 0===dR(r);)r=fR(r,n),n=eE(t=nE(t));return r}function ZR(e,t){var n=[];return eA(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function eA(e,t,n){var r=dR(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);yR(t,(function(t){eA(e,t,n)}))}function tA(e,t){var n=dR(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,pR(t,n.length>0?n:void 0)}yR(t,(function(t){tA(e,t)}))}function nA(e,t){var n=gR(JR(e,t)),r=fR(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){rA(e,t)})),rA(e,r),mR(r,(function(t){rA(e,t)})),n}function rA(e,t){var n=dR(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(R(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(R(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(MN(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?pR(t,void 0):n.length=a+1,PR(e.eventQueue_,gR(t),i);for(var u=0;u<r.length;u++)TS(r[u])}}var iA=function(e,t){var n=aA(e),r=n.namespace;"firebase.com"===n.domain&&cS(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||cS("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&lS("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new OS(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new JS(n.pathString)}},aA=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=y(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):lS("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,h)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in f&&(a=f.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},oA=function(){function e(t,n,r,i){d(this,e),this.eventType=t,this.eventRegistration=n,this.snapshot=r,this.prevName=i}return v(e,[{key:"getPath",value:function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}},{key:"getEventType",value:function(){return this.eventType}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.getPath().toString()+":"+this.eventType+":"+re(this.snapshot.exportVal())}}]),e}(),uA=function(){function e(t,n,r){d(this,e),this.eventRegistration=t,this.error=n,this.path=r}return v(e,[{key:"getPath",value:function(){return this.path}},{key:"getEventType",value:function(){return"cancel"}},{key:"getEventRunner",value:function(){return this.eventRegistration.getEventRunner(this)}},{key:"toString",value:function(){return this.path.toString()+":cancel"}}]),e}(),sA=function(){function e(t,n){d(this,e),this.snapshotCallback=t,this.cancelCallback=n}return v(e,[{key:"onValue",value:function(e,t){this.snapshotCallback.call(null,e,t)}},{key:"onCancel",value:function(e){return R(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}},{key:"hasCancelCallback",get:function(){return!!this.cancelCallback}},{key:"matches",value:function(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}]),e}(),cA=function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return v(e,[{key:"key",get:function(){return uE(this._path)?null:rE(this._path)}},{key:"ref",get:function(){return new lA(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=oC(this._queryParams),t=mS(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return oC(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=we(t))instanceof e))return!1;var n=this._repo===t._repo,r=cE(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var lA=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,r,new iC,!1)}return v(n,[{key:"parent",get:function(){var e=aE(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(cA),hA=function(){function e(t,n,r){d(this,e),this._node=t,this.ref=n,this._index=r}return v(e,[{key:"priority",get:function(){return this._node.getPriority().val()}},{key:"key",get:function(){return this.ref.key}},{key:"size",get:function(){return this._node.numChildren()}},{key:"child",value:function(t){var n=new JS(t),r=dA(this.ref,t);return new e(this._node.getChild(n),r,UE)}},{key:"exists",value:function(){return!this._node.isEmpty()}},{key:"exportVal",value:function(){return this._node.val(!0)}},{key:"forEach",value:function(t){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return t(new e(i,dA(n.ref,r),UE))}))}},{key:"hasChild",value:function(e){var t=new JS(e);return!this._node.getChild(t).isEmpty()}},{key:"hasChildren",value:function(){return!this._node.isLeafNode()&&!this._node.isEmpty()}},{key:"toJSON",value:function(){return this.exportVal()}},{key:"val",value:function(){return this._node.val()}}]),e}();function fA(e,t){return(e=we(e))._checkNotDeleted("ref"),void 0!==t?dA(e._root,t):e._root}function dA(e,t){var n,r,i,a;return null===eE((e=we(e))._path)?(n="child",r="path",a=!1,(i=t)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),ER(n,r,i,a)):ER("child","path",t,!1),new lA(e._repo,oE(e._path,t))}function pA(e,t){e=we(e),CR("set",e._path),TR("set",t,e._path,!1);var n=new $;return WR(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function vA(e){e=we(e);var t=new sA((function(){})),n=new yA(t);return function(e,t,n){var r=zN(e.serverSyncTree_,t);return null!=r?Promise.resolve(r):e.server_.get(t).then((function(r){var i,a=KE(r).withIndex(t._queryParams.getIndex());if(qN(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())i=FN(e.serverSyncTree_,t._path,a);else{var o=GN(e.serverSyncTree_,t);i=VN(e.serverSyncTree_,t._path,a,o)}return PR(e.eventQueue_,t._path,i),UN(e.serverSyncTree_,t,n,null,!0),a}),(function(n){return KR(e,"get for query "+re(t)+" failed: "+n),Promise.reject(new Error(n))}))}(e._repo,e,n).then((function(t){return new hA(t,new lA(e._repo,e._path),e._queryParams.getIndex())}))}var yA=function(){function e(t){d(this,e),this.callbackContext=t}return v(e,[{key:"respondsTo",value:function(e){return"value"===e}},{key:"createEvent",value:function(e,t){var n=t._queryParams.getIndex();return new oA("value",this,new hA(e.snapshotNode,new lA(t._repo,t._path),n))}},{key:"getEventRunner",value:function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}}},{key:"createCancelEvent",value:function(e,t){return this.callbackContext.hasCancelCallback?new uA(this,e,t):null}},{key:"matches",value:function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}},{key:"hasAnyCallback",value:function(){return null!==this.callbackContext}}]),e}();!function(e){R(!dN,"__referenceConstructor has already been defined"),dN=e}(lA),function(e){R(!wN,"__referenceConstructor has already been defined"),wN=e}(lA);var mA={},gA=!1;function kA(e,t,n,r){e.repoInfo_=new OS("".concat(t,":").concat(n),!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function wA(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||cS("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),oS("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=iA(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=iA(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new NS(NS.OWNER):new CS(e.name,e.options,t);NR("Invalid Firebase Database URL",u),uE(u.path)||cS("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(e,t,n,r){var i=mA[t.name];i||(i={},mA[t.name]=i);var a=i[e.toURLString()];a&&cS("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new MR(e,gA,n,r),i[e.toURLString()]=a,a}(s,e,l,new ES(e.name,n));return new _A(h,e)}var _A=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return v(e,[{key:"_repo",get:function(){return this._instanceStarted||(FR(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new lA(this._repo,ZS())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=mA[t];n&&n[e.key]===e||cS("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),HR(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&cS("Cannot call "+e+" on a deleted database.")}}]),e}();function bA(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(e=we(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&cS("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&cS('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new NS(NS.OWNER);else if(r.mockUserToken){var o="string"===typeof r.mockUserToken?r.mockUserToken:X(r.mockUserToken,e.app.options.projectId);a=new NS(o)}kA(i,t,n,a)}yE.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},yE.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){GT=e}(kt),ft(new Ie("database",(function(e,t){var n=t.instanceIdentifier;return wA(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Tt(HT,KT,e),Tt(HT,KT,"esm2017")}();var xA="firebasestorage.googleapis.com",IA=function(e){k(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,TA(e),"Firebase Storage: ".concat(r," (").concat(TA(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(m(i),n.prototype),i}return v(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return TA(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(J);function TA(e){return"storage/"+e}function SA(){return new IA("unknown","An unknown error occurred, please check the error payload for server response.")}function EA(){return new IA("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function CA(){return new IA("canceled","User canceled the upload/download.")}function NA(){return new IA("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function RA(e){return new IA("invalid-argument",e)}function AA(){return new IA("app-deleted","The Firebase app was deleted.")}function PA(e,t){return new IA("invalid-format","String does not match format '"+e+"': "+t)}function DA(e){throw new IA("internal-error","Internal error: "+e)}var OA,LA=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return v(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new IA("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===xA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],h=l.regex.exec(t);if(h){var f=h[l.indices.bucket],d=h[l.indices.path];d||(d=""),r=new e(f,d),l.postModify(r);break}}if(null==r)throw function(e){return new IA("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),MA=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return v(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function FA(e){return"string"===typeof e||e instanceof String}function UA(e){return VA()&&e instanceof Blob}function VA(){return"undefined"!==typeof Blob&&!q()}function qA(e,t,n,r){if(r<t)throw RA("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw RA("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function jA(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function zA(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function BA(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(OA||(OA={}));var WA=function(){function e(t,n,r,i,a,o,u,s,c,l,h){var f=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){f.resolve_=e,f.reject_=t,f.start_()}))}return v(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=SA();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?AA():CA());else i(EA())}};this.canceled_?t(0,new HA(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function f(){a&&clearTimeout(a)}function d(e){if(c)f();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return f(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return f(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),h(a)}}var p=!1;function v(e){p||(p=!0,f(),c||(null!==i?(e||(u=2),clearTimeout(i),h(0)):e||(u=1)))}return h(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new HA(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===OA.NO_ERROR,a=r.getStatus();if(n&&!BA(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new HA(o,r))}else{var u=r.getErrorCode()===OA.ABORT;t(!1,new HA(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),HA=v((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function KA(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function GA(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function QA(e,t){t&&(e["X-Firebase-GMPID"]=t)}function YA(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function $A(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=zA(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return QA(c,t),KA(c,n),GA(c,a),YA(c,r),new WA(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function XA(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function JA(){for(var e=XA(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(VA())return new Blob(n);throw new IA("unsupported-environment","This browser doesn't seem to support creating Blobs")}function ZA(e){if("undefined"===typeof atob)throw new IA("unsupported-environment","".concat("base-64"," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));return atob(e)}var eP="raw",tP="base64",nP="base64url",rP="data_url",iP=v((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function aP(e,t){switch(e){case eP:return new iP(oP(t));case tP:case nP:return new iP(uP(e,t));case rP:return new iP(function(e){var t=new sP(e);return t.base64?uP(tP,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw PA(rP,"Malformed data URL.")}return oP(t)}(t.rest)}(t),new sP(t).contentType)}throw SA()}function oP(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function uP(e,t){switch(e){case tP:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw PA(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case nP:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw PA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=ZA(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw PA(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var sP=v((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw PA(rP,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var cP=function(){function e(t,n){d(this,e);var r=0,i="";UA(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return v(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(UA(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(VA()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(JA.apply(null,i))}var a=n.map((function(e){return FA(e)?aP(eP,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function lP(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function hP(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function fP(e,t){return t}var dP=v((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||fP})),pP=null;function vP(){if(pP)return pP;var e=[];e.push(new dP("bucket")),e.push(new dP("generation")),e.push(new dP("metageneration")),e.push(new dP("name","fullPath",!0));var t=new dP("name");t.xform=function(e,t){return function(e){return!FA(e)||e.length<2?e:hP(e)}(t)},e.push(t);var n=new dP("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new dP("timeCreated")),e.push(new dP("updated")),e.push(new dP("md5Hash",null,!0)),e.push(new dP("cacheControl",null,!0)),e.push(new dP("contentDisposition",null,!0)),e.push(new dP("contentEncoding",null,!0)),e.push(new dP("contentLanguage",null,!0)),e.push(new dP("contentType",null,!0)),e.push(new dP("metadata","customMetadata",!0)),pP=e}function yP(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new LA(n,r);return t._makeStorageReference(i)}})}(r,e),r}function mP(e,t,n){var r=lP(t);return null===r?null:yP(e,r,n)}function gP(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}function kP(e,t,n){var r=lP(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes){var i,a=y(n.prefixes);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new LA(t,o));r.prefixes.push(u)}}catch(f){a.e(f)}finally{a.f()}}if(n.items){var s,c=y(n.items);try{for(c.s();!(s=c.n()).done;){var l=s.value,h=e._makeStorageReference(new LA(t,l.name));r.items.push(h)}}catch(f){c.e(f)}finally{c.f()}}return r}(e,t,r)}var wP=v((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function _P(e){if(!e)throw SA()}function bP(e,t){return function(n,r){var i=mP(e,r,t);return _P(null!==i),i}}function xP(e,t){return function(n,r){var i=mP(e,r,t);return _P(null!==i),function(e,t,n,r){var i=lP(t);if(null===i)return null;if(!FA(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return jA("/b/"+o(i)+"/o/"+o(a),n,r)+zA({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function IP(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new IA("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new IA("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new IA("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new IA("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function TP(e){var t=IP(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new IA("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function SP(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=jA(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new wP(o,"GET",function(e,t){return function(n,r){var i=kP(e,t,r);return _P(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=IP(t),s}function EP(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function CP(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=EP(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+gP(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",h=cP.getBlob(c,r,l);if(null===h)throw NA();var f={name:s.fullPath},d=jA(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new wP(d,"POST",bP(e,n),p);return v.urlParams=f,v.headers=o,v.body=h.uploadData(),v.errorHandler=IP(t),v}var NP=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=OA.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=OA.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=OA.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return v(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw DA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw DA("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw DA("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw DA("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw DA("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),RP=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return v(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(NP);function AP(){return new RP}var PP=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof LA?n:LA.makeFromUrl(n,t.host)}return v(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new LA(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return hP(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new LA(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new IA("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function DP(e,t,n){e._throwIfRoot("uploadBytes");var r=CP(e.storage,e._location,vP(),new cP(t,!0),n);return e.storage.makeRequestWithTokens(r,AP).then((function(t){return{metadata:t,ref:e}}))}function OP(e,t,n){return LP.apply(this,arguments)}function LP(){return LP=xe(_e().mark((function e(t,n,r){var i,a,o,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,MP(t,o);case 3:if(s=e.sent,(i=n.prefixes).push.apply(i,u(s.prefixes)),(a=n.items).push.apply(a,u(s.items)),null==s.nextPageToken){e.next=9;break}return e.next=9,OP(t,n,s.nextPageToken);case 9:case"end":return e.stop()}}),e)}))),LP.apply(this,arguments)}function MP(e,t){null!=t&&"number"===typeof t.maxResults&&qA("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=SP(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,AP)}function FP(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=jA(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new wP(r,"GET",xP(e,n),i);return a.errorHandler=TP(t),a}(e.storage,e._location,vP());return e.storage.makeRequestWithTokens(t,AP).then((function(e){if(null===e)throw new IA("no-download-url","The given file does not have any download URLs.");return e}))}function UP(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new LA(e._location.bucket,n);return new PP(e.storage,r)}function VP(e,t){if(e instanceof BP){var n=e;if(null==n._bucket)throw new IA("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new PP(n,n._bucket);return null!=t?VP(r,t):r}return void 0!==t?UP(e,t):e}function qP(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof BP)return new PP(e,t);throw RA("To use ref(service, url), the first argument must be a Storage instance.")}return VP(e,t)}function jP(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:LA.makeFromBucketSpec(n,e)}function zP(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:X(i,e.app.options.projectId))}var BP=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=xA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?LA.makeFromBucketSpec(i,this._host):jP(this._host,this.app.options)}return v(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=LA.makeFromBucketSpec(this._url,e):this._bucket=jP(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){qA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){qA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=xe(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=xe(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new PP(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new MA(AA());var o=$A(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=xe(_e().mark((function e(t,n){var r,i,a,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),WP="@firebase/storage",HP="0.9.14",KP="storage";function GP(e,t,n){return DP(e=we(e),t,n)}function QP(e){return function(e){var t={prefixes:[],items:[]};return OP(e,t).then((function(){return t}))}(e=we(e))}function YP(e,t){return qP(e=we(e),t)}function $P(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};zP(e,t,n,r)}function XP(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new BP(r,i,a,n,kt)}ft(new Ie(KP,XP,"PUBLIC").setMultipleInstances(!0)),Tt(WP,HP,""),Tt(WP,HP,"esm2017");var JP=Yt.initializeApp({apiKey:"AIzaSyBqB309W9FbzJxy8C87KAI0DY3EHjScVBM",authDomain:"todobd-f20dc.firebaseapp.com",databaseURL:"https://todobd-f20dc-default-rtdb.europe-west1.firebasedatabase.app",projectId:"todobd-f20dc",storageBucket:"todobd-f20dc.appspot.com",messagingSenderId:"695062420653",appId:"1:695062420653:web:ebf974438b321e9ce17a24"}),ZP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t(),t=arguments.length>1?arguments[1]:void 0,n=dt(e,"database").getImmediate({identifier:t}),r=Q("database");return r&&bA.apply(void 0,[n].concat(u(r))),n}(),eD=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t(),t=arguments.length>1?arguments[1]:void 0,n=dt(e=we(e),KP),r=n.getImmediate({identifier:t}),i=Q("storage");return i&&$P.apply(void 0,[r].concat(u(i))),r}(JP),tD=n(184);function nD(e){var t=e.id,n=e.title,r=e.deadline,i=e.status,a=e.onClick,o=e.changeTaskStatus,u=e.removeTodo;if("empty"===i)return(0,tD.jsx)("div",{onClick:a,className:"Card ".concat(i),children:(0,tD.jsx)("h3",{children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u0434\u0430\u0447\u0443"})});var s="overdue"===i?(0,tD.jsx)("h4",{children:"\u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043e"}):"process"===i?(0,tD.jsxs)("div",{className:"radio",onChange:function(){return o(t,"finished")},children:[(0,tD.jsx)("input",{type:"radio"}),(0,tD.jsx)("p",{children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]}):(0,tD.jsxs)("div",{className:"radio",onClick:function(){return o(t,"process")},children:[(0,tD.jsx)("input",{type:"radio",checked:!0}),(0,tD.jsx)("p",{children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]});return(0,tD.jsxs)("div",{onClick:function(){return a(Number(t))},className:"Card ".concat("process"===i),children:[(0,tD.jsxs)("div",{className:"content",children:[(0,tD.jsx)("h3",{children:n}),(0,tD.jsx)("p",{children:h(r).format("DD.MM.YYYY")})]}),(0,tD.jsxs)("div",{children:[s,(0,tD.jsx)("p",{onClick:function(){return u(t)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}function rD(e){var t,n=e.data,r=n.title,i=n.deadline,a=n.description,o=e.id,u=e.taskStatus,s=e.links,c=e.close,l=e.changeViue,f=e.changeStatus,d=e.remove;return t="overdue"===u?(0,tD.jsx)("h4",{children:"\u043f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043e"}):"process"===u?(0,tD.jsxs)("div",{className:"radio",onClick:function(){return f(o,"finished")},children:[(0,tD.jsx)("input",{type:"radio"}),(0,tD.jsx)("p",{children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]}):(0,tD.jsxs)("div",{className:"radio",checked:!0,onClick:function(){return f(o,"process")},children:[(0,tD.jsx)("input",{type:"radio"}),(0,tD.jsx)("p",{children:"\u0413\u043e\u0442\u043e\u0432\u043e"})]}),(0,tD.jsxs)("div",{className:"TodoPage",children:[(0,tD.jsxs)("div",{className:"content",children:[(0,tD.jsx)("h3",{children:r}),(0,tD.jsx)("p",{children:h(i).format("DD.MM.YYYY")}),(0,tD.jsx)("p",{children:a}),function(){var e=[];return s&&s.forEach((function(t,n){e.push((0,tD.jsxs)("a",{target:"_blank",rel:"noreferrer",href:t,children:["\u0424\u0430\u0439\u043b ",n]},n))})),e}()]}),(0,tD.jsxs)("div",{children:[(0,tD.jsx)("p",{onClick:c,className:"button",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),t,(0,tD.jsx)("p",{onClick:l,className:"button",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,tD.jsx)("p",{onClick:function(){return d(o)},className:"button",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]})]})}function iD(e){var n=e.id,r=e.close,i=e.changeViue,a=e.handleSubmit,o=e.data,u=l((0,t.useState)(o.title),2),s=u[0],c=u[1],h=l((0,t.useState)(o.deadline),2),f=h[0],d=h[1],p=l((0,t.useState)(o.description),2),v=p[0],y=p[1],m=l((0,t.useState)(null),2),g=m[0],k=m[1];return(0,tD.jsxs)("div",{className:"TodoPage",children:[(0,tD.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),a({title:s,deadline:f,description:v,status:"process"},n,g)}(e)},children:[(0,tD.jsxs)("label",{children:[(0,tD.jsx)("span",{children:"\u0417\u0430\u0434\u0430\u0447\u0430:"}),(0,tD.jsx)("input",{type:"text",value:s,onChange:function(e){return c(e.target.value)}})]}),(0,tD.jsx)("br",{}),(0,tD.jsxs)("label",{children:[(0,tD.jsx)("span",{children:"\u0414\u0435\u0434\u043b\u0430\u0439\u043d:"}),(0,tD.jsx)("input",{type:"date",value:f,onChange:function(e){return d(e.target.value)}})]}),(0,tD.jsx)("br",{}),(0,tD.jsxs)("label",{children:[(0,tD.jsx)("span",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:"}),(0,tD.jsx)("input",{type:"text",value:v,onChange:function(e){return y(e.target.value)}})]}),(0,tD.jsx)("br",{}),(0,tD.jsx)("input",{type:"file",multiple:!0,onChange:function(e){return k(e.target.files)}}),(0,tD.jsx)("br",{}),(0,tD.jsx)("input",{type:"submit",value:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]}),(0,tD.jsxs)("div",{children:[(0,tD.jsx)("p",{onClick:r,className:"button",children:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"}),i?(0,tD.jsx)("p",{onClick:i,className:"button",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}):""]})]})}function aD(e){var n=l((0,t.useState)("show"),2),r=n[0],i=n[1],a=function(){i("show"===r?"edit":"show")};return"show"===r?(0,tD.jsx)(rD,{data:e.data,id:e.id,links:e.links,taskStatus:e.data.status,close:e.close,changeViue:a,changeStatus:e.changeTaskStatus,remove:e.remove}):(0,tD.jsx)(iD,{data:e.data,id:e.id,close:e.close,changeViue:a,handleSubmit:e.changeTask})}var oD=function(e){var n=l((0,t.useState)(),2),r=n[0],i=n[1],a=l((0,t.useState)(),2),o=a[0],s=a[1],c=l((0,t.useState)(!0),2),f=c[0],d=c[1],p=l((0,t.useState)([]),2),v=p[0],y=p[1];(0,t.useEffect)((function(){vA(fA(ZP)).then((function(e){e.exists()?(i(e.val()),d(!1)):(i([]),d(!1))})).catch((function(e){console.error(e)}))}),[]);var m=function(e,t){for(var n=0;n<e.length;n++){var r=e[n];GP(YP(eD,"files/".concat(t,"/").concat(r.name)),r).then((function(){console.log("\u0424\u0430\u0439\u043b \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d")}))}},g=function(e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=e.title,a=e.deadline,o=e.description,u=Object.keys(r)[Object.keys(r).length-1],c=Number(u)+1;t&&m(t,c);var l=r;l[c]={title:n,deadline:a,description:o,status:"process",filesPath:"files/".concat(c,"/")},pA(fA(ZP),l).then(vA(fA(ZP)).then((function(e){e.exists()?(i(e.val()),s(),console.log("\u041d\u043e\u0432\u0430\u044f \u0437\u0430\u0434\u0430\u0447\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0430")):console.log("No data available")})).catch((function(e){console.error(e)}))).catch((function(e){console.error(e)}))},k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n&&m(n,t);var a=r;a[t]=e,pA(fA(ZP),a).then(vA(fA(ZP)).then((function(e){e.exists()?(i(e.val()),s(),console.log("\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0430")):console.log("No data available")}))).catch((function(e){console.error(e)}))},w=function(e){var t=r;delete t[e],d(!0),pA(fA(ZP),t).then(vA(fA(ZP)).then((function(e){e.exists()?(i(e.val()),s(),d(!1),console.log("\u0417\u0430\u0434\u0430\u0447\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u0430")):console.log("No data available")}))).catch((function(e){console.error(e)}))},_=function(e,t){var n=r[e],i=n.deadline,a=n.description,o=n.title;k({deadline:i,description:a,status:t,title:o},e)},b=function(e){if(r[e]){var t=r[e].filesPath;y([]),t&&QP(YP(eD,t)).then((function(e){e.items.forEach((function(e,t){(function(e){return FP(e=we(e))})(e).then((function(e){return y((function(t){return[].concat(u(t),[e])})),!0}))}))}))}s(e)},x=function(e,t){var n=h(new Date).format("YYYY-MM-DD");n=n.split("-"),console.log(e),e=e.split("-"),n[2]-e[2]>0&&"overdue"!==r[t].status&&_(t,"overdue")};return f?(0,tD.jsx)("p",{children:"....loading"}):(0,tD.jsxs)("div",{className:"ToDoApp",children:[function(){var e=[(0,tD.jsx)(nD,{status:"empty",onClick:function(){return s("new")}},"emptyCard")];if(r)for(var t=Object.keys(r),n=t.length-1;n>-1;n--)x(r[t[n]].deadline,t[n]),e.push((0,tD.jsx)(nD,{id:t[n],title:r[t[n]].title,deadline:r[t[n]].deadline,status:r[t[n]].status,changeTaskStatus:_,removeTodo:w,onClick:b},"card"+t[n]));return(0,tD.jsx)("div",{className:"cardsCollection",children:e})}(),"string"===typeof o?(0,tD.jsx)(iD,{data:{title:"",deadline:"",description:""},close:function(){return s()},handleSubmit:g}):o||0===o?(0,tD.jsx)(aD,{id:o,data:r[o],links:v,changeTask:k,changeTaskStatus:_,remove:w,close:function(){return s()}}):""]})};r.createRoot(document.getElementById("root")).render((0,tD.jsx)(oD,{}))}()}();
//# sourceMappingURL=main.c50d41d7.js.map